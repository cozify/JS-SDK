!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("axios")):"function"==typeof define&&define.amd?define(["exports","axios"],t):t((e=e||self).CozifySDK={},e.axios)}(this,(function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var n=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};var r=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),o=function(){return Math.random().toString(36).substring(7).split("").join(".")},i={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function c(e,t,n){var o;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(c)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var a=e,u=t,s=[],l=s,f=!1;function d(){l===s&&(l=s.slice())}function p(){if(f)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return u}function h(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(f)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return d(),l.push(e),function(){if(t){if(f)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,d();var n=l.indexOf(e);l.splice(n,1)}}}function y(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,u=a(u,e)}finally{f=!1}for(var t=s=l,n=0;n<t.length;n++){(0,t[n])()}return e}return y({type:i.INIT}),(o={dispatch:y,subscribe:h,getState:p,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");a=e,y({type:i.REPLACE})}})[r]=function(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(p())}return n(),{unsubscribe:t(n)}}})[r]=function(){return this},e},o}function a(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function u(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];"function"==typeof e[o]&&(n[o]=e[o])}var c,u=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:i.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:i.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+i.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){c=e}return function(e,t){if(void 0===e&&(e={}),c)throw c;for(var r=!1,o={},i=0;i<u.length;i++){var s=u[i],l=n[s],f=e[s],d=l(f,t);if(void 0===d){var p=a(s,t);throw new Error(p)}o[s]=d,r=r||d!==f}return r?o:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return l({},n,{dispatch:r=f.apply(void 0,i)(n.dispatch)})}}}var p,h,y,b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m="undefined"!=typeof Symbol?Symbol("immer-nothing"):(y=!0,(h="immer-nothing")in(p={})?Object.defineProperty(p,h,{value:y,enumerable:!0,configurable:!0,writable:!0}):p[h]=y,p),g="undefined"!=typeof Symbol?Symbol("immer-draftable"):"__$immer_draftable",O="undefined"!=typeof Symbol?Symbol("immer-state"):"__$immer_state";function w(e){return!!e&&!!e[O]}function S(e){if(!e||"object"!==(void 0===e?"undefined":b(e)))return!1;if(Array.isArray(e))return!0;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype||(!!e[g]||!!e.constructor[g])}var _=Object.assign||function(e,t){for(var n in t)D(t,n)&&(e[n]=t[n]);return e},I="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function A(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Array.isArray(e))return e.slice();var n=Object.create(Object.getPrototypeOf(e));return I(e).forEach((function(r){if(r!==O){var o=Object.getOwnPropertyDescriptor(e,r);if(o.get){if(!t)throw new Error("Immer drafts cannot have computed properties");o.value=o.get.call(e)}o.enumerable?n[r]=o.value:Object.defineProperty(n,r,{value:o.value,writable:!0,configurable:!0})}})),n}function N(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(n,e[n],e);else I(e).forEach((function(n){return t(n,e[n],e)}))}function T(e,t){return Object.getOwnPropertyDescriptor(e,t).enumerable}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function P(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var C={},j=[],R=function(){return j[j.length-1]};function U(e,t){var n=Array.isArray(e),r=M(e);N(r,(function(t){!function(e,t,n){var r=C[t];r?r.enumerable=n:C[t]=r={configurable:!0,enumerable:n,get:function(){return function(e,t){H(e);var n=L(e)[t];if(!e.finalizing&&n===e.base[t]&&S(n))return k(e),e.copy[t]=U(n,e);return n}(this[O],t)},set:function(e){!function(e,t,n){if(H(e),e.assigned[t]=!0,!e.modified){if(P(L(e)[t],n))return;x(e),k(e)}e.copy[t]=n}(this[O],t,e)}};Object.defineProperty(e,t,r)}(r,t,n||T(e,t))}));var o={scope:t?t.scope:R(),modified:!1,finalizing:!1,finalized:!1,assigned:{},parent:t,base:e,draft:r,copy:null,revoke:K,revoked:!1};return function(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0})}(r,O,o),o.scope.push(o),r}function K(){this.revoked=!0}function L(e){return e.copy||e.base}function x(e){e.modified||(e.modified=!0,e.parent&&x(e.parent))}function k(e){e.copy||(e.copy=M(e.base))}function M(e){var t=e&&e[O];if(t){t.finalizing=!0;var n=A(t.draft,!0);return t.finalizing=!1,n}return A(e)}function H(e){if(!0===e.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(L(e)))}function G(e){for(var t=e.base,n=e.draft,r=Object.keys(n),o=r.length-1;o>=0;o--)if(void 0===t[r[o]]&&!D(t,r[o]))return!0;return r.length!==Object.keys(t).length}function V(e){var t=e.draft;if(t.length!==e.base.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!n||n.get)}var z=Object.freeze({scopes:j,currentScope:R,willFinalize:function(e,t,n){var r=R();r.forEach((function(e){return e.finalizing=!0})),void 0!==e&&e!==t||(n&&function e(t){if(!t||"object"!==(void 0===t?"undefined":b(t)))return;var n=t[O];if(!n)return;var r=n.base,o=n.draft,i=n.assigned;if(Array.isArray(t)){if(V(n)){if(x(n),i.length=!0,o.length<r.length)for(var c=o.length;c<r.length;c++)i[c]=!1;else for(var a=r.length;a<o.length;a++)i[a]=!0;for(var u=0;u<o.length;u++)void 0===i[u]&&e(o[u])}}else Object.keys(o).forEach((function(t){void 0!==r[t]||D(r,t)?i[t]||e(o[t]):(i[t]=!0,x(n))})),Object.keys(r).forEach((function(e){void 0!==o[e]||D(o,e)||(i[e]=!1,x(n))}))}(t),function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];!1===n.modified&&(Array.isArray(n.base)?V(n)&&x(n):G(n)&&x(n))}}(r))},createDraft:U}),$=[],Z=function(){return $[$.length-1]};function B(e,t){var n={scope:t?t.scope:Z(),modified:!1,finalized:!1,assigned:{},parent:t,base:e,draft:null,drafts:{},copy:null,revoke:null},r=Array.isArray(e)?Proxy.revocable([n],F):Proxy.revocable(n,W),o=r.revoke,i=r.proxy;return n.draft=i,n.revoke=o,n.scope.push(n),i}var W={get:function(e,t){if(t===O)return e;var n=e.drafts;if(!e.modified&&D(n,t))return n[t];var r=Y(e)[t];if(e.finalized||!S(r))return r;if(e.modified){if(r!==e.base[t])return r;n=e.copy}return n[t]=B(r,e)},has:function(e,t){return t in Y(e)},ownKeys:function(e){return Reflect.ownKeys(Y(e))},set:function(e,t,n){if(!e.modified){if(n?P(e.base[t],n)||n===e.drafts[t]:P(e.base[t],n)&&t in e.base)return!0;X(e)}return e.assigned[t]=!0,e.copy[t]=n,!0},deleteProperty:function(e,t){(void 0!==e.base[t]||t in e.base)&&(e.assigned[t]=!1,X(e));e.copy&&delete e.copy[t];return!0},getOwnPropertyDescriptor:function(e,t){var n=Y(e),r=Reflect.getOwnPropertyDescriptor(n,t);r&&(r.writable=!0,r.configurable=!Array.isArray(n)||"length"!==t);return r},defineProperty:function(){throw new Error("Object.defineProperty() cannot be used on an Immer draft")},getPrototypeOf:function(e){return Object.getPrototypeOf(e.base)},setPrototypeOf:function(){throw new Error("Object.setPrototypeOf() cannot be used on an Immer draft")}},F={};function Y(e){return e.copy||e.base}function X(e){e.modified||(e.modified=!0,e.copy=_(A(e.base),e.drafts),e.drafts=null,e.parent&&X(e.parent))}N(W,(function(e,t){F[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),F.deleteProperty=function(e,t){if(isNaN(parseInt(t)))throw new Error("Immer only supports deleting array indices");return W.deleteProperty.call(this,e[0],t)},F.set=function(e,t,n){if("length"!==t&&isNaN(parseInt(t)))throw new Error("Immer only supports setting array indices and the 'length' property");return W.set.call(this,e[0],t,n)};var q=Object.freeze({scopes:$,currentScope:Z,willFinalize:function(){},createDraft:B});function J(e,t,n,r){Array.isArray(e.base)?function(e,t,n,r){for(var o=e.base,i=e.copy,c=e.assigned,a=Math.min(o.length,i.length),u=0;u<a;u++)if(c[u]&&o[u]!==i[u]){var s=t.concat(u);n.push({op:"replace",path:s,value:i[u]}),r.push({op:"replace",path:s,value:o[u]})}if(a<i.length){for(var l=a;l<i.length;l++)n.push({op:"add",path:t.concat(l),value:i[l]});r.push({op:"replace",path:t.concat("length"),value:o.length})}else if(a<o.length){n.push({op:"replace",path:t.concat("length"),value:i.length});for(var f=a;f<o.length;f++)r.push({op:"add",path:t.concat(f),value:o[f]})}}(e,t,n,r):function(e,t,n,r){var o=e.base,i=e.copy;N(e.assigned,(function(e,c){var a=o[e],u=i[e],s=c?e in o?"replace":"add":"remove";if(a!==u||"replace"!==s){var l=t.concat(e);n.push("remove"===s?{op:s,path:l}:{op:s,path:l,value:u}),r.push("add"===s?{op:"remove",path:l}:"remove"===s?{op:"add",path:l,value:a}:{op:"replace",path:l,value:a})}}))}(e,t,n,r)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n],o=r.path;if(0===o.length&&"replace"===r.op)e=r.value;else{for(var i=e,c=0;c<o.length-1;c++)if(!(i=i[o[c]])||"object"!==(void 0===i?"undefined":b(i)))throw new Error("Cannot apply patch, path doesn't resolve: "+o.join("/"));var a=o[o.length-1];switch(r.op){case"replace":case"add":i[a]=r.value;break;case"remove":if(Array.isArray(i)){if(a!==i.length-1)throw new Error("Only the last index of an array can be removed, index: "+a+", length: "+i.length);i.length-=1}else delete i[a];break;default:throw new Error("Unsupported patch operation: "+r.op)}}}return e}var ee={useProxies:"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect,autoFreeze:"undefined"==typeof process&&"verifyMinified"===function(){}.name,onAssign:null,onDelete:null,onCopy:null},te=new(function(){function e(t){v(this,e),_(this,ee,t),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this)}return E(e,[{key:"produce",value:function(e,t,n){var r=this;if("function"==typeof e&&"function"!=typeof t){var o=t;return t=e,function(){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return r.produce(c,(function(e){var r;return(r=t).call.apply(r,[e,e].concat(n))}))}}if("function"!=typeof t)throw new Error("if first argument is not a function, the second argument to produce should be a function");if(void 0!==n&&"function"!=typeof n)throw new Error("the third argument of a producer should not be set or a function");var i=void 0;if(S(e)){this.scopes.push([]);var c=this.createDraft(e);try{i=t.call(c,c),this.willFinalize(i,c,!!n);var a=n&&[],u=n&&[];if(void 0===i||i===c)i=this.finalize(c,[],a,u);else{if(c[O].modified)throw new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");S(i)&&(i=this.finalize(i)),n&&(a.push({op:"replace",path:[],value:i}),u.push({op:"replace",path:[],value:e}))}}finally{this.currentScope().forEach((function(e){return e.revoke()})),this.scopes.pop()}n&&n(a,u)}else if(void 0===(i=t(e)))return e;return i===m?void 0:i}},{key:"setAutoFreeze",value:function(e){this.autoFreeze=e}},{key:"setUseProxies",value:function(e){this.useProxies=e,_(this,e?q:z)}},{key:"applyPatches",value:function(e,t){return w(e)?Q(e,t):this.produce(e,(function(e){return Q(e,t)}))}},{key:"finalize",value:function(e,t,n,r){var o=this,i=e[O];if(!i)return Object.isFrozen(e)?e:this.finalizeTree(e);if(i.scope!==this.currentScope())return e;if(!i.modified)return i.base;if(!i.finalized){if(i.finalized=!0,this.finalizeTree(i.draft,t,n,r),this.onDelete)if(this.useProxies){var c=i.assigned;for(var a in c)c[a]||this.onDelete(i,a)}else{var u=i.base,s=i.copy;N(u,(function(e){D(s,e)||o.onDelete(i,e)}))}this.onCopy&&this.onCopy(i),this.autoFreeze&&1===this.scopes.length&&Object.freeze(i.copy),n&&J(i,t,n,r)}return i.copy}},{key:"finalizeTree",value:function(e,t,n,r){var o=this,i=e[O];i&&(this.useProxies||(i.finalizing=!0,i.copy=A(i.draft,!0),i.finalizing=!1),e=i.copy);var c=this.onAssign;return N(e,(function a(u,s,l){if(s===l)throw Error("Immer forbids circular references");var f=!!i&&l===e;if(w(s)){if(s=n&&f&&!i.assigned[u]?o.finalize(s,t.concat(u),n,r):o.finalize(s),Array.isArray(l)||T(l,u)?l[u]=s:Object.defineProperty(l,u,{value:s}),f&&s===i.base[u])return}else{if(f&&P(s,i.base[u]))return;S(s)&&!Object.isFrozen(s)&&N(s,a)}f&&c&&c(i,u,s)})),e}}]),e}()),ne=te.produce,re=(te.setAutoFreeze.bind(te),te.setUseProxies.bind(te),te.applyPatches.bind(te),{clear:function(){re.results={},re.size=0},results:{},size:0}),oe=/"[^"]+"|`[^`]+`|'[^']+'|[^.[\]]+/g,ie=/^\d+$/i,ce=/^"[^"]+"|`[^`]+`|'[^']+'$/,ae=function(e,t){for(var n=e.length,r=[],o=0;o<n;o++)r[o]=t(e[o]);return r},ue=function(e){var t=function(e){return ce.test(e)}(e)?e.slice(1,e.length-1):e;return function(e){return!(!e||!e.length)&&ie.test(e)}(t)?+t:t},se=Array.isArray,le=function(e){if("string"==typeof e)return function(e){return re.results[e]?re.results[e]:(re.size>500&&re.clear(),re.results[e]=e?ae(e.match(oe),ue):[e],re.size++,re.results[e])}(e);if(se(e))return ae(e,ue);var t=ue(e);return["number"==typeof t?t:""+t]},fe="function"==typeof Map,de="function"==typeof Set,pe="function"==typeof WeakSet,he=Object.keys,ye=function(e,t){return e&&"object"==typeof e&&t.add(e)},be=function(e,t,n,r){for(var o,i=0;i<e.length;i++)if(n((o=e[i])[0],t[0],r)&&n(o[1],t[1],r))return!0;return!1},ve=function(e,t,n,r){for(var o=0;o<e.length;o++)if(n(e[o],t,r))return!0;return!1},Ee=function(e,t){return e===t||e!=e&&t!=t},me=function(e){return e.constructor===Object},ge=function(e){return"function"==typeof e.then},Oe=function(e){return!(!e.$$typeof||!e._store)},we=function(e){return function(t){var n=e||t;return function(e,t,r){void 0===r&&(r=pe?new WeakSet:Object.create({_values:[],add:function(e){this._values.push(e)},has:function(e){return!!~this._values.indexOf(e)}}));var o=r.has(e),i=r.has(t);return o||i?o&&i:(ye(e,r),ye(t,r),n(e,t,r))}}},Se=function(e){var t=[];return e.forEach((function(e,n){return t.push([n,e])})),t},_e=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},Ie=function(e,t,n,r){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(!n(e[o],t[o],r))return!1;return!0},Ae=function(e,t,n,r){var o=Se(e),i=Se(t);if(o.length!==i.length)return!1;for(var c=0;c<o.length;c++)if(!be(i,o[c],n,r)||!be(o,i[c],n,r))return!1;return!0},Ne=function(e,t,n,r){var o,i=he(e),c=he(t);if(i.length!==c.length)return!1;for(var a=0;a<i.length;a++){if(o=i[a],!ve(c,o,Ee))return!1;if(("_owner"!==o||!Oe(e)||!Oe(t))&&!n(e[o],t[o],r))return!1}return!0},Te=function(e,t){return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.unicode===t.unicode&&e.sticky===t.sticky&&e.lastIndex===t.lastIndex},De=function(e,t,n,r){var o=_e(e),i=_e(t);if(o.length!==i.length)return!1;for(var c=0;c<o.length;c++)if(!ve(i,o[c],n,r)||!ve(o,i[c],n,r))return!1;return!0},Pe=Array.isArray,Ce=function(e){var t="function"==typeof e?e(n):n;function n(e,n,r){if(Ee(e,n))return!0;var o=typeof e;if(o!==typeof n||"object"!==o||!e||!n)return!1;if(me(e)&&me(n))return Ne(e,n,t,r);var i=Pe(e),c=Pe(n);if(i||c)return i===c&&Ie(e,n,t,r);var a=e instanceof Date,u=n instanceof Date;if(a||u)return a===u&&Ee(e.getTime(),n.getTime());var s=e instanceof RegExp,l=n instanceof RegExp;if(s||l)return s===l&&Te(e,n);if(ge(e)||ge(n))return e===n;if(fe){var f=e instanceof Map,d=n instanceof Map;if(f||d)return f===d&&Ae(e,n,t,r)}if(de){var p=e instanceof Set,h=n instanceof Set;if(p||h)return p===h&&De(e,n,t,r)}return Ne(e,n,t,r)}return n};Ce(we()),Ce(we(Ee)),Ce(),Ce((function(){return Ee}));function je(e,t){return e===t}function Re(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e(t[o],n[o]))return!1;return!0}function Ue(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}!function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:je,n=null,r=null;return function(){return Re(t,n,arguments)||(r=e.apply(null,arguments)),n=arguments,r}}));var Ke="function"==typeof Symbol?Symbol("curriable placeholder"):60881,Le=function(e,t,n){return function(){var r,o=n.length,i=arguments,c=i.length,a=[],u=0,s=t;if(o)for(var l=0;l<o;l++)a[l]=r=n[l]===Ke&&u<c?i[u++]:n[l],r!==Ke&&--s;if(u<c)for(;u<c;u++)a[a.length]=r=i[u],r!==Ke&&u<t&&--s;return s>0?Le(e,t,a):e.apply(this,a)}},xe=function(e,t){void 0===t&&(t=e.length);var n=Le(e,t,[]);return n.arity=t,n.fn=e,n};xe.__=Ke;xe.uncurry=function(e){return e.fn};var ke=Object,Me=ke.create,He=ke.getOwnPropertySymbols,Ge=ke.getPrototypeOf,Ve=ke.keys,ze=ke.propertyIsEnumerable,$e=ke.prototype.toString,Ze=Function.prototype.toString,Be=Array.isArray,We="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("react.element"):60103,Fe=function(e,t,n){for(var r=n,o=0;o<e.length;o++)r=t(r,e[o]);return r},Ye=function(e){var t=He(e);return t.length?Ve(e).concat(Fe(t,(function(t,n){return ze.call(e,n)&&t.push(n),t}),[])):Ve(e)},Xe="function"==typeof ke.assign?ke.assign:function(e,t){return t?Fe(Ye(t),(function(e,n){return e[n]=t[n],e}),Object(e)):e},qe=function(e){return Me(e.__proto__||Ge(e))},Je=function(e){if(!e||"object"!=typeof e||e.$$typeof===We)return!1;var t=$e.call(e);return"[object Date]"!==t&&"[object RegExp]"!==t},Qe=function(e){return null==e||Be(e)&&!e.length},et=function(e){return"function"==typeof e&&!!~Ze.call(e).indexOf("[native code]")},tt=function(e,t,n){return"function"==typeof e?e.apply(t,n):void 0},nt=function(e){return Be(e)?[]:{}},rt=function(e){return e.constructor===ke?Xe({},e):Be(e)?function(e){for(var t=new e.constructor,n=0;n<e.length;n++)t[n]=e[n];return t}(e):et(e.constructor)?{}:Xe(qe(e),e)},ot=function(e,t){return e===t||e!=e&&t!=t},it=function(e,t){return Je(e)?rt(e):function(e){return"number"==typeof e?[]:{}}(t)},ct=function(e,t){return void 0===e?t:e},at=function(e){return Be(e)?e:le(e)},ut=function(e,t,n,r){var o=e[r],i=r+1;return i===e.length?n(t,o):t[o]=ut(e,it(t[o],e[i]),n,i),t},st=function(e,t,n){var r=at(e),o=it(t,r[0]);return 1===r.length?(n(o,r[0]),o):ut(r,o,n,0)},lt=function(e,t,n){var r,o=Be(e);if(o!==Be(t)||!Je(e))return Je(r=t)?rt(r):r;if(o)return e.concat(t);var i=e.constructor===ke||et(e.constructor)?{}:qe(e);return Fe(Ye(t),(function(r,o){return r[o]=n&&Je(t[o])?lt(e[o],t[o],n):t[o],r}),Xe(i,e))},ft=function(e,t,n){var r=at(e);if(1===r.length)return t?ct(t[r[0]],n):n;for(var o=t,i=r[0],c=0;c<r.length-1;c++){if(!o||!o[i])return n;o=o[i],i=r[c+1]}return o?ct(o[i],n):n},dt=function(e,t,n){var r=Qe(e),o=r?t:n?n(ft(e,t)):ft(e,t);return Be(o)?Be(e)?e.concat([o.length]):(r?"":e)+"["+o.length+"]":e},pt=function(e,t){if(e.length){for(var n=e.length,r=t;r<n-1;)e[r]=e[r+1],++r;--e.length}},ht=function(){throw new TypeError('handler passed is not of type "function".')},yt=Array.isArray,bt=Array.prototype.slice,vt=function(e){return e?function(e,t,n,r,o){void 0===o&&(o=r),"function"!=typeof e&&ht();var i=bt.call(arguments,5);if(Qe(t))return tt(e.apply(void 0,[r].concat(i)),o,n);var c=ft(t,r);if(void 0!==c){var a=e.apply(void 0,[c].concat(i));return tt(a,o,n)}}:function(e,t,n,r){void 0===r&&(r=n);var o=Qe(e)?n:ft(e,n);return tt(o,r,t)}},Et=function(e){return e?function(e,t,n){"function"!=typeof e&&ht();var r=bt.call(arguments,4);if(Qe(t))return e.apply(void 0,[n].concat(r));var o=ft(t,n);return void 0===o?o:e.apply(void 0,[o].concat(r))}:function(e,t){return Qe(e)?t:ft(e,t)}},mt=function(e){return e?function(e,t,n,r){"function"!=typeof e&&ht();var o=bt.call(arguments,4);if(Qe(n))return e.apply(void 0,[r].concat(o));var i=ft(n,r);return void 0===i?t:e.apply(void 0,[i].concat(o))}:function(e,t,n){return Qe(t)?n:ft(t,n,e)}},gt=function(e){return e?function(e,t,n){"function"!=typeof e&&ht();var r=bt.call(arguments,3);if(Qe(t))return!!e.apply(void 0,[n].concat(r));var o=ft(t,n);return void 0!==o&&!!e.apply(void 0,[o].concat(r))}:function(e,t){return Qe(e)?null!=t:void 0!==ft(e,t)}},Ot=function(e){return e?function(e,t,n,r){"function"!=typeof e&&ht();var o=bt.call(arguments,4);return Qe(t)?ot(e.apply(void 0,[r].concat(o)),n):ot(e.apply(void 0,[ft(t,r)].concat(o)),n)}:function(e,t,n){return Qe(e)?ot(n,t):ot(ft(e,n),t)}},wt=function(e,t){return e?function(e,n,r){"function"!=typeof e&&ht();var o=bt.call(arguments,3);if(!Je(r))return e.apply(void 0,[r].concat(o));if(Qe(n)){var i=e.apply(void 0,[r].concat(o));return i?lt(r,i,t):r}var c=!1,a=st(n,r,(function(n,r){var i=e.apply(void 0,[n[r]].concat(o));i&&(n[r]=lt(n[r],i,t),c=!0)}));return c?a:r}:function(e,n,r){return Je(r)?Qe(e)?lt(r,n,!0):st(e,r,(function(e,r){e[r]=lt(e[r],n,t)})):n}},St=function(e){var t=Ot(e);return function(){return!t.apply(this,arguments)}},_t=function(e){return e?function(e,t,n){"function"!=typeof e&&ht();var r=bt.call(arguments,3);if(Qe(t)){var o=nt(n);return e.apply(void 0,[o].concat(r))?o:n}var i=ft(t,n);return void 0!==i&&e.apply(void 0,[i].concat(r))?st(t,n,(function(e,t){yt(e)?pt(e,t):delete e[t]})):n}:function(e,t){return Qe(e)?nt(t):void 0!==ft(e,t)?st(e,t,(function(e,t){yt(e)?pt(e,t):delete e[t]})):t}},It=function(e){return e?function(e,t,n){"function"!=typeof e&&ht();var r=bt.call(arguments,3);return Qe(t)?e.apply(void 0,[n].concat(r)):st(t,n,(function(t,n){t[n]=e.apply(void 0,[t[n]].concat(r))}))}:function(e,t,n){return Qe(e)?t:st(e,n,(function(e,n){e[n]=t}))}},At=function(e){var t=It(e);return e?function(e,n,r){return t.apply(this,[e,dt(n,r,e),r].concat(bt.call(arguments,3)))}:function(e,n,r){return t(dt(e,r),n,r)}},Nt=(xe(At(!1),3),xe(At(!0),3),xe(wt(!1,!1),3),xe(wt(!0,!1),3),xe(vt(!1),3),xe(vt(!0),4),xe(Et(!1),2),xe(mt(!1),3),xe(Et(!0),3),xe(mt(!0),4),xe(gt(!1),2),xe(gt(!0),3),xe(Ot(!1),3),xe(Ot(!0),4),xe(wt(!1,!0),3),xe(wt(!0,!0),3),xe(St(!1),3),xe(St(!0),4),xe(_t(!1),2),xe(_t(!0),3),xe(It(!1),3),xe(It(!0),3),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{});function Tt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Dt(e,t){return e(t={exports:{}},t.exports),t.exports}var Pt=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ct={INIT:"@@redux/INIT"+Pt(),REPLACE:"@@redux/REPLACE"+Pt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Pt()}};function jt(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function Rt(e,t){return function(){return t(e.apply(this,arguments))}}function Ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(n,!0).forEach((function(t){Ut(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var kt,Mt=(kt=Object.freeze({__proto__:null,__DO_NOT_USE__ActionTypes:Ct,applyMiddleware:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return Lt({},n,{dispatch:r=xt.apply(void 0,i)(n.dispatch)})}}},bindActionCreators:function(e,t){if("function"==typeof e)return Rt(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in e){var o=e[r];"function"==typeof o&&(n[r]=Rt(o,t))}return n},combineReducers:function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];"function"==typeof e[o]&&(n[o]=e[o])}var i,c=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:Ct.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:Ct.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Ct.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var r=!1,o={},a=0;a<c.length;a++){var u=c[a],s=n[u],l=e[u],f=s(l,t);if(void 0===f){var d=jt(u,t);throw new Error(d)}o[u]=f,r=r||f!==l}return r?o:e}},compose:xt,createStore:function e(t,n,o){var i;if("function"==typeof n&&"function"==typeof o||"function"==typeof o&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof n&&void 0===o&&(o=n,n=void 0),void 0!==o){if("function"!=typeof o)throw new Error("Expected the enhancer to be a function.");return o(e)(t,n)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var c=t,a=n,u=[],s=u,l=!1;function f(){s===u&&(s=u.slice())}function d(){if(l)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return a}function p(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(l)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return f(),s.push(e),function(){if(t){if(l)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,f();var n=s.indexOf(e);s.splice(n,1)}}}function h(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,a=c(a,e)}finally{l=!1}for(var t=u=s,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:Ct.INIT}),(i={dispatch:h,subscribe:p,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");c=e,h({type:Ct.REPLACE})}})[r]=function(){var e,t=p;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[r]=function(){return this},e},i}}))&&kt.default||kt,Ht=Dt((function(e,t){var n=Mt.compose;t.__esModule=!0,t.composeWithDevTools="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?n:n.apply(null,arguments)},t.devToolsEnhancer="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}}}));Tt(Ht);var Gt=Ht.composeWithDevTools;Ht.devToolsEnhancer;function Vt(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(o){return"function"==typeof o?o(n,r,e):t(o)}}}}var zt=Vt();function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}zt.withExtraArgument=Vt;var Bt=!0;function Wt(e,t){return e?"".concat(e,"/").concat(t):t}function Ft(e){var t=e.slice,n=void 0===t?"":t,r=e.initialState,o=e.reducers||{},i=e.extraReducers||{},c=Object.keys(o),a=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return ne(n,(function(e){var n=t[r.type];return n?n(e,r):void 0}))}}(r,c.reduce((function(e,t){return e[Wt(n,t)]=o[t],e}),i)),u=c.reduce((function(e,t){var r=Wt(n,t);return e[t]=function(e){function t(t){return{type:e,payload:t}}return t.toString=function(){return"".concat(e)},t.type=e,t}(r),e}),{}),s=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},function(e){return e?"get ".concat(e).replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"").replace(/[-_]/g,""):"getState"}(n),function(e){return e?function(t){return t[e]}:function(e){return e}}(n));return{slice:n,reducer:a,actions:u,selectors:s}}function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yt(r,!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const qt=Ft({slice:"alarms",initialState:{},reducers:{setAlarms(e,t){const n=e,{hubId:r}=t.payload,{alarms:o}=t.payload,i={};Object.entries(o).forEach(e=>{const[t,n]=e;i[t]=Xt({},n)}),n[r]=Xt({},i)},setAlarm(e,t){const n=e,{hubId:r}=t.payload,{alarm:o}=t.payload;r&&n[r]&&(n[r][o.id]=Xt({},o))},removeAlarm(e,t){const n=e,{hubId:r}=t.payload,{alarmId:o}=t.payload;r&&o&&n[r]&&n[r][o]&&delete n[r][o]}}}),{actions:Jt,reducer:Qt}=qt;let en=!1;"object"==typeof process&&"object"==typeof process.versions&&(void 0!==process.versions.node?(en=!0,console.log("Running in node.js")):console.log("Running in browser"));const tn=en;let nn=e=>(console.error("Invalid atob for string ",e),"invalid atob");if(en){nn=e=>{return Buffer.from(e,"base64").toString("binary")}}else nn=window.atob;function rn(e){const t=e.replace(/-/g,"+").replace(/_/g,"/");let n=t;switch(n.length%4){case 0:case 2:n+="==";break;case 3:n+="=";break;default:throw new Error("Illegal base64url string!")}let r="",o=e=>(console.error("Invalid atob for string ",e),"invalid atob");if(en){o=e=>{return Buffer.from(e,"base64").toString("binary")}}else o=window.atob;try{r=o(t)}catch(e){try{r=o(n)}catch(e){console.error("urlBase64Decode: trying atob failed")}}return r}const on=["91 30 CF 20 17 F7 D7 EC F7 BA 43 30 8E 19 83 B4 CF DE 5A CC","26 B0 20 FA AB E8 A3 81 63 37 C6 B7 EF 94 4D 40 3D 1B 85 10"],cn="https://testapi.cozify.fi",an="ui/0.2/";let un="https://api.cozify.fi";function sn(){return`${un}/${an}`}const ln="1.13",fn=Object.freeze({USER_LOGIN:{method:"POST",url:"user/login",params:["password","email"],config:{responseType:tn?"blob":"stream",timeout:15e3}},HUB_KEYS:{method:"GET",url:"user/hubkeys",timeout:15e3},HUB_LOCK_BACKUP:{method:"POST",url:"hub/remote/cc/$API_VER/hub/lockconfig"},REFRESH_AUTHKEY:{method:"GET",url:"user/refreshsession"},CLOUD_IP:{method:"GET",url:"hub/lan_ip"},CLOUD_META:{method:"GET",url:"hub/remote/hub"},POLL:{method:"GET",url:"hub/remote/cc/$API_VER/hub/poll",urlParams:["ts"]},PAIR_START:{method:"GET",url:"hub/remote/cc/$API_VER/hub/scan",urlParams:["ts"]},PAIR_IGNORE:{method:"PUT",url:"hub/remote/cc/$API_VER/hub/scan",type:"SET_SCAN_RESULT",params:["id","ignored"]},PAIR_STOP:{method:"GET",url:"hub/remote/cc/$API_VER/hub/stopscan"},CMD_DEVICE_STATE:{method:"PUT",url:"hub/remote/cc/$API_VER/devices/command",type:"CMD_DEVICE",params:["id","state"]},CMD_DEVICE_IGNORE:{method:"PUT",url:"hub/remote/cc/$API_VER/devices/command",type:"CMD_IGNORE_DEVICE",params:["id"]},CMD_DEVICE_IDENTIFY:{method:"PUT",url:"hub/remote/cc/$API_VER/devices/command",type:"CMD_IDENTIFY",params:["id"]},CMD_DEVICE_META:{method:"PUT",url:"hub/remote/cc/$API_VER/devices/command",type:"CMD_DEVICE_META",params:["id","name","room"]},CMD_GET_ROOMS:{method:"GET",url:"hub/remote/cc/$API_VER/rooms"},CMD_SET_ROOM:{method:"PUT",url:"hub/remote/cc/$API_VER/rooms",type:"CMD_ROOM",params:["id","name","order"]},CMD_REMOVE_ROOM:{method:"DELETE",url:"hub/remote/cc/$API_VER/rooms",urlParams:["roomId"]},CMD_GET_ALARMS:{method:"GET",url:"hub/remote/cc/$API_VER/alarms"},CMD_CLOSE_ALARM:{method:"PUT",url:"hub/remote/cc/$API_VER/alarms/close",urlParams:["alarmId"]},CMD_REMOVE_ALARM:{method:"DELETE",url:"hub/remote/cc/$API_VER/alarms",urlParams:["roomId"]},ZWAVE_START_INCLUSION:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_START_INCLUSION"},ZWAVE_STOP_INCLUSION:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_CANCEL_INCLUSION"},ZWAVE_START_EXCLUSION:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_START_EXCLUSION"},ZWAVE_STOP_EXCLUSION:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_CANCEL_EXCLUSION"},ZWAVE_INCLUSION_STATUS:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"GET_ZWAVE_INCLUSION_STATUS"},ZWAVE_EXCLUSION_STATUS:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"GET_ZWAVE_EXCLUSION_STATUS"},ZWAVE_HEAL:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_HEAL"},CMD_GET_PLANS:{method:"GET",url:"plans"},CMD_SAVE_PLANS:{method:"POST",url:"plans",params:["templates","installations","locations"]}}),dn=Object.freeze({UNCONNECTED:"no connection",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",OBSOLETE_API_VERSION:"obsolete api version",LATE_PAYMENT:"late payment",CONNECTED:"connected"}),pn=Object.freeze({UNCONNECTED:"no connection",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",OBSOLETE_API_VERSION:"obsolete api version",REMOTE:"remote",LOCAL:"local"}),hn=Ft({slice:"connections",initialState:{cloudState:dn.UNCONNECTED},reducers:{setCloudConnectionState(e,t){const n=e,r=t.payload,o=e.cloudState;Object.values(dn).indexOf(r)>-1&&o!==r&&(console.log(`CLOUD connection state ${o} -> ${r}`),n.cloudState=r)}}}),{actions:yn,reducer:bn}=hn;function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vn(r,!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vn(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const mn=Ft({slice:"pairings",initialState:{},reducers:{setPairingDevices(e,t){const n=e,{hubId:r}=t.payload,{devices:o}=t.payload,i={};Object.entries(o).forEach(e=>{const[t,n]=e;i[t]=En({},n)}),n[r]=En({},i)},setPairingDevice(e,t){const n=e,{hubId:r}=t.payload,{device:o}=t.payload;n[r]&&(n[r][o.id]=En({},o))},deletePairingDevice(e,t){const n=e,{hubId:r}=t.payload,{deviceId:o}=t.payload;r&&o&&n[r]&&n[r][o]&&delete n[r][o]}}}),{actions:gn,reducer:On}=mn;function wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wn(r,!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wn(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const _n=Ft({slice:"devices",initialState:{},reducers:{setDevices(e,t){const n=e,{hubId:r}=t.payload,{devices:o}=t.payload,i={};Object.entries(o).forEach(e=>{const[t,n]=e;i[t]=Sn({},n)}),n[r]=Sn({},i)},setDevice(e,t){const n=e,{hubId:r}=t.payload,{device:o}=t.payload;n[r]&&(n[r][o.id]=Sn({},o))},deleteDevice(e,t){const n=e,{hubId:r}=t.payload,{deviceId:o}=t.payload;r&&o&&n[r]&&n[r][o]&&delete n[r][o]}}}),{actions:In,reducer:An}=_n,{setDevices:Nn,deleteDevice:Tn}=In;function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Pn=Ft({slice:"hubs",initialState:{},reducers:{updateHubs(e,t){const r=e,o=t.payload;console.log("updateHubs",o),Object.entries(o).forEach(t=>{const[o,i]=t;r[o]=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dn(r,!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dn(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e[o],{},i)})},selectHub(e,t){const n=e,{hubId:r}=t.payload;console.log("selectHub",r),e[r]&&(n[r].selected=!0,console.log("selectHub",e[r]))},unSelectHub(e,t){const n=e,{hubId:r}=t.payload;e[r]&&(n[r].selected=!1)},setHubConnectionState(e,t){const{hubId:n}=t.payload,r=e,o=t.payload.state,i=e[n]?e[n].connectionState:void 0;Object.values(pn).indexOf(o)>-1&&i&&i!==o&&(r[n].connectionState=o)}}}),{actions:Cn,reducer:jn}=Pn,{updateHubs:Rn,selectHub:Un,unSelectHub:Kn,setHubConnectionState:Ln}=Cn;var xn=Object.prototype;var kn=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||xn)};var Mn=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),Hn=Object.prototype.hasOwnProperty;var Gn=function(e){if(!kn(e))return Mn(e);var t=[];for(var n in Object(e))Hn.call(e,n)&&"constructor"!=n&&t.push(n);return t},Vn="object"==typeof Nt&&Nt&&Nt.Object===Object&&Nt,zn="object"==typeof self&&self&&self.Object===Object&&self,$n=Vn||zn||Function("return this")(),Zn=$n.Symbol,Bn=Object.prototype,Wn=Bn.hasOwnProperty,Fn=Bn.toString,Yn=Zn?Zn.toStringTag:void 0;var Xn=function(e){var t=Wn.call(e,Yn),n=e[Yn];try{e[Yn]=void 0;var r=!0}catch(e){}var o=Fn.call(e);return r&&(t?e[Yn]=n:delete e[Yn]),o},qn=Object.prototype.toString;var Jn=function(e){return qn.call(e)},Qn="[object Null]",er="[object Undefined]",tr=Zn?Zn.toStringTag:void 0;var nr=function(e){return null==e?void 0===e?er:Qn:tr&&tr in Object(e)?Xn(e):Jn(e)};var rr=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},or="[object AsyncFunction]",ir="[object Function]",cr="[object GeneratorFunction]",ar="[object Proxy]";var ur,sr=function(e){if(!rr(e))return!1;var t=nr(e);return t==ir||t==cr||t==or||t==ar},lr=$n["__core-js_shared__"],fr=(ur=/[^.]+$/.exec(lr&&lr.keys&&lr.keys.IE_PROTO||""))?"Symbol(src)_1."+ur:"";var dr=function(e){return!!fr&&fr in e},pr=Function.prototype.toString;var hr=function(e){if(null!=e){try{return pr.call(e)}catch(e){}try{return e+""}catch(e){}}return""},yr=/^\[object .+?Constructor\]$/,br=Function.prototype,vr=Object.prototype,Er=br.toString,mr=vr.hasOwnProperty,gr=RegExp("^"+Er.call(mr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Or=function(e){return!(!rr(e)||dr(e))&&(sr(e)?gr:yr).test(hr(e))};var wr=function(e,t){return null==e?void 0:e[t]};var Sr=function(e,t){var n=wr(e,t);return Or(n)?n:void 0},_r=Sr($n,"DataView"),Ir=Sr($n,"Map"),Ar=Sr($n,"Promise"),Nr=Sr($n,"Set"),Tr=Sr($n,"WeakMap"),Dr=hr(_r),Pr=hr(Ir),Cr=hr(Ar),jr=hr(Nr),Rr=hr(Tr),Ur=nr;(_r&&"[object DataView]"!=Ur(new _r(new ArrayBuffer(1)))||Ir&&"[object Map]"!=Ur(new Ir)||Ar&&"[object Promise]"!=Ur(Ar.resolve())||Nr&&"[object Set]"!=Ur(new Nr)||Tr&&"[object WeakMap]"!=Ur(new Tr))&&(Ur=function(e){var t=nr(e),n="[object Object]"==t?e.constructor:void 0,r=n?hr(n):"";if(r)switch(r){case Dr:return"[object DataView]";case Pr:return"[object Map]";case Cr:return"[object Promise]";case jr:return"[object Set]";case Rr:return"[object WeakMap]"}return t});var Kr=Ur;var Lr=function(e){return null!=e&&"object"==typeof e},xr="[object Arguments]";var kr=function(e){return Lr(e)&&nr(e)==xr},Mr=Object.prototype,Hr=Mr.hasOwnProperty,Gr=Mr.propertyIsEnumerable,Vr=kr(function(){return arguments}())?kr:function(e){return Lr(e)&&Hr.call(e,"callee")&&!Gr.call(e,"callee")},zr=Array.isArray,$r=9007199254740991;var Zr=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=$r};var Br=function(e){return null!=e&&Zr(e.length)&&!sr(e)};var Wr=function(){return!1},Fr=Dt((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?$n.Buffer:void 0,i=(o?o.isBuffer:void 0)||Wr;e.exports=i})),Yr={};Yr["[object Float32Array]"]=Yr["[object Float64Array]"]=Yr["[object Int8Array]"]=Yr["[object Int16Array]"]=Yr["[object Int32Array]"]=Yr["[object Uint8Array]"]=Yr["[object Uint8ClampedArray]"]=Yr["[object Uint16Array]"]=Yr["[object Uint32Array]"]=!0,Yr["[object Arguments]"]=Yr["[object Array]"]=Yr["[object ArrayBuffer]"]=Yr["[object Boolean]"]=Yr["[object DataView]"]=Yr["[object Date]"]=Yr["[object Error]"]=Yr["[object Function]"]=Yr["[object Map]"]=Yr["[object Number]"]=Yr["[object Object]"]=Yr["[object RegExp]"]=Yr["[object Set]"]=Yr["[object String]"]=Yr["[object WeakMap]"]=!1;var Xr=function(e){return Lr(e)&&Zr(e.length)&&!!Yr[nr(e)]};var qr=function(e){return function(t){return e(t)}},Jr=Dt((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n&&Vn.process,i=function(){try{var e=r&&r.require&&r.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i})),Qr=Jr&&Jr.isTypedArray,eo=Qr?qr(Qr):Xr,to="[object Map]",no="[object Set]",ro=Object.prototype.hasOwnProperty;var oo=function(e){if(null==e)return!0;if(Br(e)&&(zr(e)||"string"==typeof e||"function"==typeof e.splice||Fr(e)||eo(e)||Vr(e)))return!e.length;var t=Kr(e);if(t==to||t==no)return!e.size;if(kn(e))return!Gn(e).length;for(var n in e)if(ro.call(e,n))return!1;return!0};const io=Object.freeze({NONE:"none",EN_EN:"en",EN_UK:"en-UK",FI_FI:"fi-FI",FI:"fi",EN:"en"}),co=Object.freeze({WAITING_LANGUAGE:"wait language",LANGUAGE_SET:"language set",WAITING_LOGIN:"wait login",LOGIN_DONE:"login done",WAITING_EULA:"wait eula",EULA_ACCEPTED:"eula accepted",AUTHENTICATED:"logged in",KEYED:"key entered",LOGGED_OUT:"logged out"}),ao=Object.freeze({ADMIN:32,USER:8,GUEST:2,ANONYMOUS:1}),uo=Ft({slice:"user",initialState:{firstName:"",lastName:"",email:"",language:io.NONE,authKey:"",role:ao.ANONYMOUS,eulaAccepted:!1,state:co.WAITING_LANGUAGE},reducers:{changeState(e,t){const n=e,r=t.payload,o=e.state;switch(console.log(`User state ${o} -> ${r}`),o){case co.WAITING_LANGUAGE:r===co.LANGUAGE_SET&&(oo(e.language)||(n.state=co.WAITING_LOGIN));break;case co.WAITING_LOGIN:r===co.LOGIN_DONE&&(oo(e.authKey)||(oo(e.eulaAcceted)?n.state=co.WAITING_EULA:n.state=co.AUTHENTICATED));break;case co.WAITING_EULA:r===co.EULA_ACCEPTED&&(n.state=co.AUTHENTICATED);break;case co.AUTHENTICATED:r===co.LOGGED_OUT&&(n.state=co.WAITING_LOGIN)}},setEula(e,t){e.eulaAccepted=t.payload},setLanguage(e,t){e.language=t.payload},setAuthKey(e,t){e.authKey=t.payload},setAuthenticated(e,t){const n=e;n.authKey=t.payload,n.state=co.KEYED}}}),{actions:so,reducer:lo}=uo;function fo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function po(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fo(r,!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fo(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ho=Ft({slice:"rooms",initialState:{},reducers:{setRooms(e,t){const n=e,{hubId:r}=t.payload,{rooms:o}=t.payload,i={};Object.entries(o).forEach(e=>{const[t,n]=e;i[t]=po({},n)}),n[r]=po({},i)},setRoom(e,t){const n=e,{hubId:r}=t.payload,{room:o}=t.payload;r&&n[r]&&(n[r][o.id]=po({},o))},removeRoom(e,t){const n=e,{hubId:r}=t.payload,{roomId:o}=t.payload;r&&o&&n[r]&&n[r][o]&&delete n[r][o]}}}),{actions:yo,reducer:bo}=ho;function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vo(r,!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vo(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const mo=e=>{const t=e;return t.id||(t.id=Date.now()),t},go=(e,t)=>e[t].childIds.reduce((t,n)=>[...t,n,...go(e,n)],[]),Oo=Ft({slice:"plans",initialState:{templates:{},installations:{},locations:{root:{id:"root",childIds:[],data:{name:"root"},open:!1}}},reducers:{setPlansState(e,t){const n=e,r=t.payload,o=n.plansState;console.log(`PLANS state ${o} -> ${r}`),n.templates=Eo({},r.templates),n.installations=Eo({},r.installations),n.locations=Eo({},r.locations)},setTemplates(e,t){const n=e,{templates:r}=t.payload,o={};Object.entries(r).forEach(e=>{mo(e);const[t,n]=e;o[t]=Eo({},n)}),n.templates=Eo({},o)},addTemplate(e,t){const n=e,r=t.payload;mo(r),r.id&&(n.templates[r.id]=Eo({},r))},setTemplate(e,t){const n=e,r=t.payload;mo(r),r.id&&n.templates[r.id]&&(n.templates[r.id]=Eo({},r))},removeTemplate(e,t){const n=e,r=t.payload;mo(r),r.id&&n.templates[r.id]&&delete n.templates[r.id]},setInstallations(e,t){const n=e,{installations:r}=t.payload,o={};Object.entries(r).forEach(e=>{mo(e);const[t,n]=e;o[t]=Eo({},n)}),n.installations=Eo({},o)},addInstallation(e,t){const n=e,r=t.payload;mo(r),r.id&&(n.installations[r.id]=Eo({},r))},setInstallation(e,t){const n=e,r=t.payload;mo(r),n.installations[r.id]&&(n.installations[r.id]=Eo({},r))},removeInstallation(e,t){const n=e,r=t.payload;mo(r),r.id&&n.installations[r.id]&&delete n.installations[r.id]},addLocationCountry(e,t){const n=e,r=t.payload;mo(r),r.id&&(n.locations[r.id]=Eo({},r))},setLocationCountry(e,t){const n=e,r=t.payload;mo(r),n.locations[r.id]&&(n.locations[r.id]=Eo({},r))},removeLocationCountry(e,t){const n=e,r=t.payload;mo(r),r.id&&n.locations[r.id]&&delete n.locations[r.id]},addLocationNode(e,t){const n=e,{parentId:r,newNode:o}=t.payload,i=r||"root";if(o.id?o.id=i.concat(":").concat(o.id):o.data&&o.data.name?o.id=i.concat(":").concat(o.data.name.replace(/\s+/g,"").replace(/\./g,"").replace(/:/g,"")):o.id=i.concat(":?"),!o||!o.id)throw new Error("SDK addLocationNode - no new node given");if(n.locations[o.id])throw new Error(`SDK addLocationNode - node ${o.id} already exist`);o.childIds||(o.childIds=[]),n.locations[i]&&o&&o.id&&(n.locations[i].childIds||(n.locations[i].childIds=[]),n.locations[i].childIds=[...n.locations[i].childIds,o.id],n.locations[o.id]=Eo({},o))},setLocationNode(e,t){const n=e,r=t.payload;if(!r||!r.id)throw new Error("SDK setLocationNode - no node given");if(!n.locations[r.id])throw new Error(`SDK setLocationNode - node ${r.id} does not exist`);r.childIds||(r.childIds=[]);const o=r.id.substr(0,r.id.lastIndexOf(":"));if(r.data&&r.data.name){const e=r.id;if(r.id=o.concat(":").concat(r.data.name.replace(/\s+/g,"").replace(/\./g,"").replace(/:/g,"")),e!==r.id&&n.locations[e])n.locations[o].childIds=n.locations[o].childIds.filter(t=>t!==e),n.locations[o].childIds.push(r.id),delete n.locations[e],n.locations[r.id]=Eo({},r);else{if(!(r&&r.id&&n.locations[r.id]))throw new Error(`SDK setLocationNode - node ${r.id} could not be set`);n.locations[r.id]=Eo({},r)}}else n.locations[r.id]=Eo({},r)},removeLocationNode(e,t){const n=e,r=t.payload;if(!r)throw new Error("SDK removeLocationNode - no nodeId given");if(!n.locations[r])throw new Error(`SDK removeLocationNode - node ${r} doesnt exist`);if(r&&"root"!==r){const e=go(n.locations,r),t=((e,t)=>{let n;return Object.values(e).forEach(e=>{n||e&&e.childIds&&zr(e.childIds)&&e.childIds.includes(t)&&(n=e)}),n})(n.locations,r);if(!t||!t.id)throw new Error(`SDK removeLocationNode - node ${r} parent does not exist`);n.locations=((e,t)=>{const n=Eo({},e);return t.forEach(e=>delete n[e]),n})(n.locations,[r,...e]),n.locations[t.id].childIds=n.locations[t.id].childIds.filter(e=>e!==r)}}}}),{actions:wo,reducer:So}=Oo,_o={alarms:Qt,connections:bn,pairings:On,devices:An,hubs:jn,user:lo,rooms:bo,plans:So};
/*!
   * isobject <https://github.com/jonschlinkert/isobject>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */
var Io=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)},Ao=function(e,t,n){if(Io(n)||(n={default:n}),!Do(e))return void 0!==n.default?n.default:e;"number"==typeof t&&(t=String(t));const r=Array.isArray(t),o="string"==typeof t,i=n.separator||".",c=n.joinChar||("string"==typeof i?i:".");if(!o&&!r)return e;if(o&&t in e)return To(t,e,n)?e[t]:n.default;let a=r?t:function(e,t,n){if("function"==typeof n.split)return n.split(e);return e.split(t)}(t,i,n),u=a.length,s=0;do{let t=a[s];for("number"==typeof t&&(t=String(t));t&&"\\"===t.slice(-1);)t=No([t.slice(0,-1),a[++s]||""],c,n);if(t in e){if(!To(t,e,n))return n.default;e=e[t]}else{let r=!1,o=s+1;for(;o<u;)if(r=(t=No([t,a[o++]],c,n))in e){if(!To(t,e,n))return n.default;e=e[t],s=o-1;break}if(!r)return n.default}}while(++s<u&&Do(e));return s===u?e:n.default};
/*!
   * get-value <https://github.com/jonschlinkert/get-value>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   */function No(e,t,n){return"function"==typeof n.join?n.join(e):e[0]+t+e[1]}function To(e,t,n){return"function"!=typeof n.isValid||n.isValid(e,t)}function Do(e){return Io(e)||Array.isArray(e)||"function"==typeof e}const Po=function(e){var t,n=e||{},r=n.reducer,o=void 0===r?void 0:r,i=n.middleware,a=void 0===i?[zt]:i,s=n.devTools,l=void 0===s||s,p=n.preloadedState,h=void 0===p?void 0:p,y=n.enhancers,b=void 0===y?[]:y;if("function"==typeof o)t=o;else{if(!function(e){if("object"!==$t(e)||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(o))throw new Error("Reducer argument must be a function or an object of functions that can be passed to combineReducers");t=u(o)}var v=d.apply(void 0,Zt(a)),E=f;l&&(E=Gt({trace:!Bt}));var m=[v].concat(Zt(b));return c(t,h,E.apply(void 0,Zt(m)))}({reducer:_o});function Co(e,t,n){const r=n||Po,o=function(e,t){let n=Ao(e(),t);return function(r){return()=>{const o=Ao(e(),t);if(n!==o){const e=n;n=o,r(o,e)}}}}(r.getState,e);r.subscribe(o(t))}console.log("Store Initial State: ",Po.getState());const jo=Object.freeze({UNCLAIMED:"unclaimed",CLAIMED:"claimed",TOO_NEW_VERSION:"new version",NO_ACCESS:"no access",CONNECTED:"connected"}),Ro=Object.freeze({NOT_PAIRING:"NOT_PAIRING",IDLE:"IDLE",RUNNING:"RUNNING",TIMEOUT:"TIMEOUT",SUCCESS:"SUCCESS",CANCEL:"CANCEL",NO_ZWAVE:"NO_ZWAVE",ERROR:"ERROR"}),Uo=Object.freeze({IDLE:"IDLE",RUNNING:"RUNNING",TIMEOUT:"TIMEOUT",SUCCESS:"SUCCESS",CANCEL:"CANCEL",NO_ZWAVE:"NO_ZWAVE",ERROR:"ERROR"}),Ko=45e3,Lo=1e3,xo=3e3,ko=3e3,Mo=3e3,Ho="http://",Go="8893";function Vo(e){Po.dispatch(hn.actions.setCloudConnectionState(e))}function zo(e){const t=Po.getState(),n=Pn.selectors.getHubs(t),r=e;r.state===pn.UNCONNECTED&&n[r.hubId]&&n[r.hubId].connectionState===pn.REMOTE&&(r.state=pn.LOCAL),Po.dispatch(Pn.actions.setHubConnectionState(r))}var $o="[object String]";var Zo=function(e){return"string"==typeof e||!zr(e)&&Lr(e)&&nr(e)==$o},Bo=["ETIMEDOUT","ECONNRESET","EADDRINUSE","ESOCKETTIMEDOUT","ECONNREFUSED","EPIPE","EHOSTUNREACH","EAI_AGAIN"],Wo=["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED"],Fo=function(e){return!e||!e.code||(-1!==Bo.indexOf(e.code)||-1===Wo.indexOf(e.code))},Yo=Dt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isNetworkError=o,t.isRetryableError=a,t.isSafeRequestError=u,t.isIdempotentRequestError=s,t.isNetworkOrIdempotentRequestError=l,t.exponentialDelay=d,t.default=h;var n=function(e){return e&&e.__esModule?e:{default:e}}(Fo);var r="axios-retry";function o(e){return!e.response&&Boolean(e.code)&&"ECONNABORTED"!==e.code&&(0,n.default)(e)}var i=["get","head","options"],c=i.concat(["put","delete"]);function a(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&e.response.status<=599)}function u(e){return!!e.config&&(a(e)&&-1!==i.indexOf(e.config.method))}function s(e){return!!e.config&&(a(e)&&-1!==c.indexOf(e.config.method))}function l(e){return o(e)||s(e)}function f(){return 0}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=100*Math.pow(2,e);return t+.2*t*Math.random()}function p(e){var t=e[r]||{};return t.retryCount=t.retryCount||0,e[r]=t,t}function h(e,t){e.interceptors.request.use((function(e){return p(e).lastRequestTime=Date.now(),e})),e.interceptors.response.use(null,(function(n){var o=n.config;if(!o)return Promise.reject(n);var i=function(e,t){return Object.assign({},t,e[r])}(o,t),c=i.retries,a=void 0===c?3:c,u=i.retryCondition,s=void 0===u?l:u,d=i.retryDelay,h=void 0===d?f:d,y=i.shouldResetTimeout,b=void 0!==y&&y,v=p(o);if(s(n)&&v.retryCount<a){v.retryCount+=1;var E=h(v.retryCount,n);if(function(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}(e,o),!b&&o.timeout&&v.lastRequestTime){var m=Date.now()-v.lastRequestTime;o.timeout=Math.max(o.timeout-m-E,1)}return o.transformRequest=[function(e){return e}],new Promise((function(t){return setTimeout((function(){return t(e(o))}),E)}))}return Promise.reject(n)}))}h.isNetworkError=o,h.isSafeRequestError=u,h.isIdempotentRequestError=s,h.isNetworkOrIdempotentRequestError=l,h.exponentialDelay=d,h.isRetryableError=a}));Tt(Yo);Yo.isNetworkError,Yo.isRetryableError,Yo.isSafeRequestError,Yo.isIdempotentRequestError,Yo.isNetworkOrIdempotentRequestError,Yo.exponentialDelay;var Xo=Yo.default;const qo=36e5;function Jo(e,t){let n="0.0";const r=e.indexOf(".");let o=-1;return-1!==r&&(o=e.indexOf(".",r+1)),-1!==o&&(n=e.substring(0,o)),function(e,t){const n=e.split("."),r=t.split("."),o=Math.min(n.length,r.length);if(o>0)for(let e=0;e<o-1;e+=1){const t=Number(n[e])-Number(r[e]);if(0!==t)return t}return n.length-r.length}(n,t)>0&&(n=t),n}function Qo(e){let t=dn.UNCONNECTED;return e&&e.response&&401===e.response.status?(t=dn.UNAUTHENTICATED,console.error("send: authentication error ",e)):e&&e.response&&403===e.response.status?(t=dn.LATE_PAYMENT,console.error("send: unauhorized error ",e)):e&&e.response&&403===e.response.status?(t=dn.UNAUTHORIZED,console.error("send: unauhorized error ",e)):e&&e.response&&410===e.response.status&&(t=dn.OBSOLETE_API_VERSION,console.error("send: version error ",e)),t}function ei(e){let t=pn.UNCONNECTED;return e&&e.response&&400===e.response.status?console.log("send: no-connection error ",e):e&&e.response&&401===e.response.status?(t=pn.UNAUTHENTICATED,console.error("send: authentication error ",e)):e&&e.response&&403===e.response.status?(t=pn.UNAUTHORIZED,console.error("send: unauhorized error ",e)):e&&e.response&&410===e.response.status&&(t=pn.OBSOLETE_API_VERSION,console.error("send: version error ",e)),t}let ti=!1,ni=null;function ri(e){return new Promise(t=>{if(!e)return void t(!0);const n=(new Date).getTime();ti||ni&&!(n-ni>qo)?t(!0):(ti=!0,ni=n,!tn&&window&&window.plugins&&window.plugins.sslCertificateChecker?window.plugins.sslCertificateChecker.check(()=>{ti=!1,t(!0)},e=>{"CONNECTION_NOT_SECURE"===e?(ti=!1,t(!1)):(ti=!1,ni=void 0,t(!0))},un,on):(setTimeout(()=>{ti=!1},qo),t(!0)))})}const oi=["get","head","options"].concat(["put","delete"]),ii=oi.concat(["post"]);function ci(e){return!!e.config&&(function(e){return!e.response||e.response.status>=500&&e.response.status<=599}(e)&&-1!==ii.indexOf(e.config.method))}const ai={},ui=2;let si=!1;function li(e){let t=null,n={},r={},o=null;if(e){const t=e.split(".");n=JSON.parse(rn(t[0])),r=JSON.parse(rn(t[1]))}var i;(n&&n.exp||null!=r&&r.exp)&&(t=n.exp?n.exp:r.exp),t&&(o=t-Math.round((new Date).getTime()/1e3)),!o||o<0?Vo(dn.UNAUTHENTICATED):o&&o<432e3&&(i=e,si||(si=!0,pi({command:fn.REFRESH_AUTHKEY,authKey:i}).then(e=>{setTimeout(()=>{si=!1},6e5),e.length>10&&Po.dispatch(uo.actions.setAuthKey(e))}).catch(()=>{si=!1})))}function fi(e){return new Promise(t=>{Promise.all(e).then(()=>{t()}).catch(()=>{t()})})}Xo(t,{retryCondition:function(e){if(!(e&&e.config&&e.config.url))return console.error("retryCondition unknown",e),!1;if(ai[e.config.url]){if(ai[e.config.url]>=ui)return ai[e.config.url]=0,console.error("retryCondition count >",ui),!1;ai[e.config.url]+=ai[e.config.url],console.info("retryCondition count set ",ai[e.config.url])}else ai[e.config.url]=1,console.info("retryCondition count set to 1");ci(e)&&-1!==oi.indexOf(e.config.method)?console.info("retryCondition condition true",e.config):(console.info("retryCondition condition false",e.config),ai[e.config.url]=0);const t=ci(e)&&-1!==oi.indexOf(e.config.method);return console.info("retryCondition return ",t),t},shouldResetTimeout:!0,retryDelay:(e,t)=>(console.error("axiosRetry ",t),5e3)});let di=!1;function pi({command:e,localUrl:n,url:r,timeout:o,method:i,authKey:c,hubKey:a,type:u,config:s,data:l,hubId:f}){let d=i,p=r,h=o,y=c,b=a,v=s,E=u;null==d&&(d="GET"),null==E&&(E="application/json;charset=UTF-8");const m=l;let g=!1;const O=!oo(f),w=Po.getState(),S=uo.selectors.getUser(w);if(void 0!==e&&e){if(e.method&&(d=e.method),oo(p)&&e.url)if(-1!==e.url.indexOf("$API_VER")){const t=Pn.selectors.getHubs(w);if(!t[f]||!t[f].hubKey)return new Promise((e,t)=>{t(new Error("SDK Error: Send - Hub or hubKey not found error"))});const n=t[f];if(!n.version||n.connectionState===pn.UNCONNECTED&&-1===e.url.indexOf("hub/remote/hub"))return new Promise((e,t)=>{t(new Error("SDK Error: Send - No Hub connection error"))});const r=Jo(n.version,ln);p=sn().concat(e.url.replace("$API_VER",r))}else p=sn().concat(e.url);if(p){const e=p.split("hub/remote");e&&e[1]&&n&&(p=n+e[1],b&&(y=b,b=null))}if(p&&p.indexOf(sn())>-1&&(g=!0),e.type&&m&&(zr(m)?m[0]?m[0].type=e.type:m.push({type:e.type}):m&&(m.type=e.type)),e.params&&(e.params.includes("type")||e.params.push("type"),e.params.forEach(e=>{zr(l)?m&&m[0]&&l&&l[0]&&(m[0][e]=l[0][e]):m&&l&&(m[e]=l[e])})),e.urlParams){const t=[];e.urlParams.forEach(e=>{l&&void 0!==l[e]&&t.push(`${encodeURIComponent(e)}=${encodeURIComponent(l[e])}`)}),p&&t.length>0&&(p=`${p}?${t.join("&")}`)}e.timeout&&(h=e.timeout),e.config&&(v=e.config)}const _=JSON.stringify(m),I={timeout:h||15e3,method:d,headers:{Accept:"application/json, application/binary, text/plain, */*","Content-Type":E,Authorization:y||null,"X-Hub-Key":b||null,"Accept-Language":null},crossDomain:!0,responseType:"application/json",url:p,data:oo(_)?null:_};return S.language&&S.language!==io.NONE?I.headers["Accept-Language"]=S.language:delete I.headers["Accept-Language"],Object.assign(I,v),new Promise((n,r)=>{e||p?(t.interceptors.response.use(e=>e.headers["content-type"].includes("application/json")||e.headers["content-type"].includes("application/binary")?(function(e){ai[e]&&(console.warn("resetRetry to 0"),ai[e]=0,delete ai[e])}(p),e):(console.error("send: unknown response type"),e),e=>Promise.reject(e)),ri(g).then(o=>{!o||di?(di=!0,r(new Error("SDK Error: SSL failure."))):(y&&li(y),t(I).then(e=>{g?Vo(dn.CONNECTED):f&&zo({hubId:f,state:pn.LOCAL}),n(e.data)}).catch(t=>{let n="SDK Send error:";t&&t.response?(t.response.data&&t.response.data.message&&(n=n.concat(t.response.data.message)),t.response.status&&(n=n.concat(`Status: ${t.response.status}`)),g?(e!==fn.CLOUD_META&&Vo(Qo(t)),O&&f&&zo({hubId:f,state:ei(t)})):(t&&t.response&&401===t.response.status&&Vo(Qo(t)),O&&f&&zo({hubId:f,state:ei(t)}))):t.request?g?(Vo(dn.UNCONNECTED),O&&f&&zo({hubId:f,state:pn.UNCONNECTED}),n=n.concat(`Cloud unconnected in remote. Status ${t.request.status}`)):O&&f&&(zo({hubId:f,state:pn.UNCONNECTED}),n=n.concat(`Hub unconnected. Status ${t.request.status}`)):g?(Vo(dn.UNCONNECTED),n=n.concat("Cloud unconnected in remote"),O&&f&&(zo({hubId:f,state:pn.UNCONNECTED}),n=n.concat("Hub unconnected in remote"))):O&&f&&(zo({hubId:f,state:pn.UNCONNECTED}),n=n.concat("Hub unconnected")),console.error(n),r(t)}))})):r(new Error("SDK Error: Command or Command API URL not found."))})}function hi(){return uo.selectors.getUser(Po.getState())}function yi(){const e=Po.getState();return _n.selectors.getDevices(e)}function bi(){const e=Po.getState();return mn.selectors.getPairings(e)}function vi(e,t,n){let r={};const o=bi();o&&o[e]&&(r=o[e]);const i={hubId:e,devices:{}};n.map(e=>(i.devices[e.id]=e,!0)),t?Po.dispatch(mn.actions.setPairingDevices(i)):Object.entries(i.devices).forEach(([t,n])=>{const o={hubId:e,device:n};t&&n?Po.dispatch(mn.actions.setPairingDevice(o)):t&&r[t]&&Po.dispatch(mn.actions.deletePairingDevice(t))})}function Ei(){const e=Po.getState();return ho.selectors.getRooms(e)}function mi(e,t,n){return new Promise((r,o)=>{const i=Po.getState(),c=uo.selectors.getUser(i);if(!c||!c.authKey)return console.error("SDK sendRoomCmd error: No userKey!"),void o(new Error("Room command error: No userKey!"));const a=Pn.selectors.getHubs(i),u=a[e],{hubKey:s}=a[e];if(!u||!s)return console.error("SDK sendRoomCmd error: No hubKey!"),void o(new Error("Room command error: No hubKey!"));if(u.connectionState!==pn.LOCAL&&u.connectionState!==pn.REMOTE)return console.error("SDK sendRoomCmd error: No Hub connection"),void o(new Error("Room command error: No hub connection"));const{authKey:l}=c;if(!l)return console.error("SDK sendRoomCmd error: No authKey!"),void o(new Error("Room command error: No authKey!"));t&&pi({command:t,authKey:l,hubId:e,localUrl:u.url,hubKey:s,data:n}).then(t=>{console.debug("SDK sendRoomCmd ok",t),pi({command:fn.CMD_GET_ROOMS,authKey:l,hubId:e,localUrl:u.url,hubKey:s}).then(t=>{console.debug("SDK sendRoomCmd refresh rooms ok",t),Po.dispatch(ho.actions.setRooms({hubId:e,rooms:t})),r(t)}).catch(e=>{console.error("SDK Room command error:",e),o(e)})}).catch(e=>{console.error("SDK Room command error:",e),o(e)})})}const gi=e=>{const t=e;return e.message&&(t.messageHTML=function(e){try{return decodeURIComponent(Array.prototype.map.call(nn(e),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}catch(e){return console.error("b64DecodeUnicode: trying atob failed"),"b64DecodeUnicode error"}}(e.message),t.messageTxt=function(e){let t=e;return(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<\/div>/gi,"")).replace(/<\/li>/gi,"")).replace(/<li>/gi,"")).replace(/<\/ul>/gi,"")).replace(/<\/p>/gi,"")).replace(/<br\s*[\/]?>/gi,"")).replace(/<[^>]+>/gi,"")).replace(/\s\s+/g," ")).trim()}(t.message)),t};function Oi(){const e=Po.getState();return qt.selectors.getAlarms(e)}function wi(e,t,n){return new Promise((r,o)=>{const i=Po.getState(),c=uo.selectors.getUser(i);if(!c||!c.authKey)return console.error("SDK closeAlarm error: No userKey!"),void o(new Error("Alarm command error: No userKey!"));const a=Pn.selectors.getHubs(i),u=a[e],{hubKey:s}=a[e];if(!u||!s)return console.error("SDK closeAlarm error: No hubKey!"),void o(new Error("Alarm command error: No hubKey!"));if(u.connectionState!==pn.LOCAL&&u.connectionState!==pn.REMOTE)return console.error("SDK closeAlarm error: No Hub connection"),void o(new Error("Alarm command error: No hub connection"));const{authKey:l}=c;if(!l)return console.error("SDK closeAlarm error: No authKey!"),void o(new Error("Alarm command error: No authKey!"));pi({command:t,authKey:l,hubId:e,localUrl:u.url,hubKey:s,data:n}).then(t=>{console.debug("SDK sendAlarmCmd ok",t),pi({command:fn.CMD_GET_ALARMS,authKey:l,hubId:e,localUrl:u.url,hubKey:s}).then(t=>{console.debug("SDK sendAlarmCmd refresh alarms ok",t),Po.dispatch(qt.actions.setRooms({hubId:e,alarms:t})),r(t)}).catch(e=>{console.error("SDK Alarm command error:",e),o(e)})}).catch(e=>{o(e)})})}let Si,_i={};function Ii(e,t){const n=t;n.hubId&&(n.id=n.hubId,delete n.hubId),n.id&&(_i[n.id]||(_i[n.id]={id:n.id,name:n.name||""}),_i[n.id].connected=n.connected,_i[n.id].features=n.features,_i[n.id].state=n.state,_i[n.id].version=n.version,_i[n.id].connectionState=n.connected?pn.REMOTE:pn.UNCONNECTED,e?(_i[n.id].connectionState=pn.LOCAL,_i[n.id].url=e):_i[n.id].url=void 0)}function Ai(e,t,n){return new Promise((r,o)=>{pi({command:fn.CLOUD_META,authKey:t,hubKey:n,hubId:e}).then(e=>{Ii(void 0,e),r(e)}).catch(t=>{console.log(`doRemoteIdQuery ${e} error `,t.message),o(e)})})}function Ni(){return Pn.selectors.getHubs(Po.getState())}function Ti(){return new Promise(e=>{pi({command:fn.CLOUD_IP}).then(t=>{const n=[];t&&!oo(t)&&t.forEach(e=>{n.push(function(e){return new Promise(t=>{if(e){const n=`${Ho+e}:${Go}`;pi({url:`${n}/hub`,timeout:500}).then(r=>{Ii(n,r),t(e)}).catch(n=>{console.log(`doLocalIdQuery ${e} error `,n.message),t(e)})}else t()})}(e))}),fi(n).finally(()=>{!function(e){const t=Ni();Object.values(t).forEach(t=>{if(t.selected){const n=e[t.id];n&&(n.selected=!0)}})}(_i),Po.dispatch(Pn.actions.updateHubs(_i)),e("ok")})}).catch(t=>{console.error("doCloudDiscovery error: ",t.message),Po.dispatch(Pn.actions.updateHubs(_i)),e("error")})})}function Di(){return uo.selectors.getUser(Po.getState())}function Pi(e,t=!0,n=!1){const{authKey:r}=Di();return new Promise(o=>{_i=function(e){const t={};return e&&Object.keys(e).forEach(n=>{const r=rn(e[n].split(".")[1]),o=JSON.parse(r),i={};i.id=o.hubId||o.hub_id,i.name=o.hubName||o.hub_name,i.hubKey=e[n],i.connectionState=pn.UNCONNECTED,o.role&&(i.role=o.role,i.roleString="",Object.keys(ao).forEach(e=>{ao[e]===i.role&&(i.roleString=e)})),t[i.id]=i}),t}(e),Po.dispatch(Pn.actions.updateHubs(_i)),function(e,t){return new Promise(n=>{const r=[];Object.values(e).forEach(e=>{e.hubKey&&r.push(Ai(e.id,t,e.hubKey))}),fi(r).then(e=>{console.debug("fetchCloudMetaData values",e)}).catch(e=>{console.error("fetchCloudMetaData error",e)}).finally(()=>{n()})})}(_i,r).finally(()=>{Po.dispatch(Pn.actions.updateHubs(_i)),n?t?Ti().then(()=>{o(Ni())}).catch(()=>{o(Ni())}):o(Ni()):(t&&Ti(),o(Ni()))})})}function Ci(){const{authKey:e}=Di();return new Promise((t,n)=>{e?pi({command:fn.HUB_KEYS,authKey:e}).then(e=>{e?Pi(e).then(e=>t(e)):t(Ni())}).catch(e=>{console.error("fetchHubTokens error: ",e.message),n(e)}):n(new Error("No userKey!"))})}function ji(){Si||(Ci(),Si=setInterval(Ci,Ko))}const Ri={},Ui={},Ki={},Li={};function xi(e,t=!1){return new Promise((n,r)=>{let o=t;if(Ui[e])return console.debug("doPairing: pairing stopped"),void r(new Error("pairing stopped"));Ki[e]||(Ki[e]=0);const i=Ni()[e],{authKey:c}=Di(),{hubKey:a}=i;if(console.debug("doPairing connection state: ",i.connectionState),i.connectionState!==pn.LOCAL&&i.connectionState!==pn.REMOTE)return console.warn("SDK doPairing: no Hub connection"),void r(new Error("no hub connection"));Li[e]?r(new Error("pairing already in action")):(Li[e]=!0,o&&(Ki[e]=0),o=0===Ki[e],pi({command:fn.PAIR_START,hubId:e,authKey:c,hubKey:a,localUrl:i.url,data:{ts:Ki[e]}}).then(t=>{if(t)switch(Ki[e]=t.timestamp,t.type){case"SCAN_DELTA":vi(e,o,t.devices)}Li[e]=!1,n("ok")}).catch(t=>{console.error("SDK: doPairing error: ",t.message),Li[e]=!1,r(t)}))})}const ki={};function Mi(e){return new Promise((t,n)=>{if(ki[e])return void n(new Error("already stopping"));ki[e]=!0;const{authKey:r}=Di(),o=Ni()[e],{hubKey:i}=o;clearInterval(Ri[e]),pi({command:fn.PAIR_STOP,hubId:e,authKey:r,hubKey:i,localUrl:o.url}).then(n=>{console.debug("SDK: pairingStopped: Ok , data: ",n),Ui[e]=!0,ki[e]=!1,vi(e,!0,[]),t("ok")}).catch(t=>{console.error("SDK: pairingStopped error: ",t.message),ki[e]=!1,n(t)})})}const Hi={},Gi={},Vi={},zi={},$i={};function Zi(e,t=!1){return new Promise((n,r)=>{let o=t;if(o&&(Vi[e]=0),o=0===Vi[e],Gi[e])return console.debug("doPolling: polling stopped"),void n("stopped");Vi[e]||(Vi[e]=0);const i=Ni()[e];if(!i||i.connectionState!==pn.LOCAL&&i.connectionState!==pn.REMOTE)return console.warn("SDK doPoll: No Hub connection"),void r(new Error("doPoll error: No Hub connection"));if(console.debug("doPoll connection state: ",i.connectionState),i.connectionState===pn.REMOTE&&!o){if($i[e])return $i[e]=!1,void n("skipped");$i[e]=!0}const{authKey:c}=Di(),{hubKey:a}=i;zi[e]?r(new Error("doPoll error: Already polling")):(zi[e]=!0,pi({command:fn.POLL,hubId:e,authKey:c,hubKey:a,localUrl:i.url,data:{ts:Vi[e]}}).then(t=>{t&&((0===Vi[e]||t.full)&&(o=!0),Vi[e]=t.timestamp,t.polls.forEach(t=>{switch(t.type){case"DEVICE_DELTA":!function(e,t,n){let r={};const o=yi();if(o&&o[e]&&(r=o[e]),t){const t={hubId:e,devices:n};Po.dispatch(_n.actions.setDevices(t))}else Object.entries(n).forEach(([t,n])=>{const o={hubId:e,device:n};t&&n?Po.dispatch(_n.actions.setDevice(o)):t&&r[t]&&Po.dispatch(_n.actions.deleteDevice(t))})}(e,o,t.devices);break;case"GROUP_DELTA":case"SCENE_DELTA":case"RULE_DELTA":case"USERS_DELTA":break;case"ROOM_DELTA":!function(e,t,n){let r={};const o=Ei();if(o&&o[e]&&(r=o[e]),t){const t={hubId:e,rooms:n};Po.dispatch(ho.actions.setRooms(t))}else oo(n)||Object.entries(n).forEach(([t,n])=>{const o={hubId:e,room:n};t&&n?Po.dispatch(ho.actions.setRoom(o)):t&&r[t]&&Po.dispatch(ho.actions.removeRoom({hubId:e,roomId:t}))})}(e,o,t.rooms);break;case"ZONE_DELTA":case"USER_ALERTS":break;case"ALARM_DELTA":!function(e,t,n){let r={};const o=Oi();if(o&&o[e]&&(r=o[e]),t){const t={};oo(n)||Object.entries(n).forEach(([e,n])=>{t[e]=gi(n)});const r={hubId:e,alarms:t};Po.dispatch(qt.actions.setAlarms(r))}else oo(n)||Object.entries(n).forEach(([t,n])=>{if(t&&n){const t={hubId:e,alarm:gi(n)};Po.dispatch(qt.actions.setAlarm(t))}else t&&r[t]&&Po.dispatch(qt.actions.removeAlarm({hubId:e,alarmId:t}))})}(e,o,t.alarms)}})),zi[e]=!1,n(t)}).catch(t=>{console.error("SDK doPoll error: ",t.message),zi[e]=!1,r(t)}))})}function Bi(e){Gi[e]=!1;const t=Lo,n=e=>Zi(e).then(()=>{}).catch(()=>{});try{Hi[e]=setInterval(n,t,e)}catch(e){console.error("Catch startPollingById: ",e)}return Zi(e)}function Wi(e){Gi[e]=!0,clearInterval(Hi[e])}function Fi(e,t=!1){return new Promise((n,r)=>{const o=Ni();if(!oo(o)){let i=null,c=null;return Object.values(o).every(n=>e!==n.id||(Po.dispatch(Pn.actions.selectHub({hubId:n.id})),n.hubKey&&t?(i=Bi(n.id),!1):n.hubKey?(console.debug("SDK selectHubById: Ready to start polling"),!1):(console.error("SDK selectHubById: No hub key error"),c=new Error("no hubKey"),!1))),i?i.then(e=>n(e)).catch(()=>n("polling started")):(c?r(c):!i&&t?r(new Error("hub not found")):n("ready to poll"),!0)}return r(new Error("no hubs")),!0})}function Yi(){return uo.selectors.getUser(Po.getState())}function Xi(){return Pn.selectors.getHubs(Po.getState())}Co("user.state",e=>{e===co.AUTHENTICATED&&ji()});const qi={},Ji={},Qi={};function ec(e,t,n){(function(e){return new Promise((t,n)=>{if(qi[e])return console.debug("askZwaveInclusionStatus: inclusion stopped"),void n(new Error("inclusion stopped"));const r=Xi()[e],{authKey:o}=Yi(),{hubKey:i}=r;if(console.debug("askZwaveInclusionStatus connection state: ",r.connectionState),r.connectionState!==pn.LOCAL&&r.connectionState!==pn.REMOTE)return console.warn("SDK askZwaveInclusionStatus: no Hub connection"),void n(new Error("no hub connection"));Ji[e]?n(new Error("inclusion already in action")):(Ji[e]=!0,pi({command:fn.ZWAVE_INCLUSION_STATUS,hubId:e,authKey:o,hubKey:i,localUrl:r.url,data:[]}).then(n=>{Ji[e]=!1,t(n)}).catch(t=>{console.error("SDK: askZwaveInclusionStatus error: ",t.message),Ji[e]=!1,n(t)}))})})(e).then(r=>{if(r&&r.status)switch(r.status){case Ro.RUNNING:setTimeout(()=>{ec(e,t,n)},ko);break;case Ro.SUCCESS:t(!0);break;case Ro.TIMEOUT:case Ro.CANCEL:t(!1);break;default:n(new Error("Invalid inclusion state"))}else n(new Error("Invalid inclusion state"))}).catch(e=>{console.error("Error in askZwaveInclusionStatusPromise: ",e),n(e)})}const tc={},nc={},rc={};function oc(e){return new Promise((t,n)=>{if(tc[e])return console.debug("askZwaveExclusionStatus: exclusion stopped"),void n(new Error("exclusion stopped"));const r=Xi()[e],{authKey:o}=Yi(),{hubKey:i}=r;if(console.debug("askZwaveExclusionStatus connection state: ",r.connectionState),r.connectionState!==pn.LOCAL&&r.connectionState!==pn.REMOTE)return console.warn("SDK askZwaveExclusionStatus: no Hub connection"),void n(new Error("no hub connection"));nc[e]?n(new Error("exclusion already in action")):(nc[e]=!0,pi({command:fn.ZWAVE_EXCLUSION_STATUS,hubId:e,authKey:o,hubKey:i,localUrl:r.url,data:[]}).then(n=>{nc[e]=!1,t(n)}).catch(t=>{console.error("SDK: askZwaveExclusionStatus error: ",t.message),nc[e]=!1,n(t)}))})}const ic={};var cc="[object Symbol]";var ac=function(e){return"symbol"==typeof e||Lr(e)&&nr(e)==cc},uc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sc=/^\w*$/;var lc=function(e,t){if(zr(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ac(e))||(sc.test(e)||!uc.test(e)||null!=t&&e in Object(t))},fc=Sr(Object,"create");var dc=function(){this.__data__=fc?fc(null):{},this.size=0};var pc=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},hc="__lodash_hash_undefined__",yc=Object.prototype.hasOwnProperty;var bc=function(e){var t=this.__data__;if(fc){var n=t[e];return n===hc?void 0:n}return yc.call(t,e)?t[e]:void 0},vc=Object.prototype.hasOwnProperty;var Ec=function(e){var t=this.__data__;return fc?void 0!==t[e]:vc.call(t,e)},mc="__lodash_hash_undefined__";var gc=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=fc&&void 0===t?mc:t,this};function Oc(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Oc.prototype.clear=dc,Oc.prototype.delete=pc,Oc.prototype.get=bc,Oc.prototype.has=Ec,Oc.prototype.set=gc;var wc=Oc;var Sc=function(){this.__data__=[],this.size=0};var _c=function(e,t){return e===t||e!=e&&t!=t};var Ic=function(e,t){for(var n=e.length;n--;)if(_c(e[n][0],t))return n;return-1},Ac=Array.prototype.splice;var Nc=function(e){var t=this.__data__,n=Ic(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ac.call(t,n,1),--this.size,!0)};var Tc=function(e){var t=this.__data__,n=Ic(t,e);return n<0?void 0:t[n][1]};var Dc=function(e){return Ic(this.__data__,e)>-1};var Pc=function(e,t){var n=this.__data__,r=Ic(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Cc(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Cc.prototype.clear=Sc,Cc.prototype.delete=Nc,Cc.prototype.get=Tc,Cc.prototype.has=Dc,Cc.prototype.set=Pc;var jc=Cc;var Rc=function(){this.size=0,this.__data__={hash:new wc,map:new(Ir||jc),string:new wc}};var Uc=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Kc=function(e,t){var n=e.__data__;return Uc(t)?n["string"==typeof t?"string":"hash"]:n.map};var Lc=function(e){var t=Kc(this,e).delete(e);return this.size-=t?1:0,t};var xc=function(e){return Kc(this,e).get(e)};var kc=function(e){return Kc(this,e).has(e)};var Mc=function(e,t){var n=Kc(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Hc(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Hc.prototype.clear=Rc,Hc.prototype.delete=Lc,Hc.prototype.get=xc,Hc.prototype.has=kc,Hc.prototype.set=Mc;var Gc=Hc,Vc="Expected a function";function zc(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Vc);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var c=e.apply(this,r);return n.cache=i.set(o,c)||i,c};return n.cache=new(zc.Cache||Gc),n}zc.Cache=Gc;var $c=zc,Zc=500;var Bc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wc=/\\(\\)?/g,Fc=function(e){var t=$c(e,(function(e){return n.size===Zc&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Bc,(function(e,n,r,o){t.push(r?o.replace(Wc,"$1"):n||e)})),t}));var Yc=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},Xc=1/0,qc=Zn?Zn.prototype:void 0,Jc=qc?qc.toString:void 0;var Qc=function e(t){if("string"==typeof t)return t;if(zr(t))return Yc(t,e)+"";if(ac(t))return Jc?Jc.call(t):"";var n=t+"";return"0"==n&&1/t==-Xc?"-0":n};var ea=function(e){return null==e?"":Qc(e)};var ta=function(e,t){return zr(e)?e:lc(e,t)?[e]:Fc(ea(e))},na=1/0;var ra=function(e){if("string"==typeof e||ac(e))return e;var t=e+"";return"0"==t&&1/e==-na?"-0":t};var oa=function(e,t){for(var n=0,r=(t=ta(t,e)).length;null!=e&&n<r;)e=e[ra(t[n++])];return n&&n==r?e:void 0},ia=function(){try{var e=Sr(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var ca=function(e,t,n){"__proto__"==t&&ia?ia(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},aa=Object.prototype.hasOwnProperty;var ua=function(e,t,n){var r=e[t];aa.call(e,t)&&_c(r,n)&&(void 0!==n||t in e)||ca(e,t,n)},sa=9007199254740991,la=/^(?:0|[1-9]\d*)$/;var fa=function(e,t){var n=typeof e;return!!(t=null==t?sa:t)&&("number"==n||"symbol"!=n&&la.test(e))&&e>-1&&e%1==0&&e<t};var da=function(e,t,n,r){if(!rr(e))return e;for(var o=-1,i=(t=ta(t,e)).length,c=i-1,a=e;null!=a&&++o<i;){var u=ra(t[o]),s=n;if(o!=c){var l=a[u];void 0===(s=r?r(l,u,a):void 0)&&(s=rr(l)?l:fa(t[o+1])?[]:{})}ua(a,u,s),a=a[u]}return e};var pa=function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var c=t[r],a=oa(e,c);n(a,c)&&da(i,ta(c,e),a)}return i};var ha=function(e,t){return null!=e&&t in Object(e)};var ya=function(e,t,n){for(var r=-1,o=(t=ta(t,e)).length,i=!1;++r<o;){var c=ra(t[r]);if(!(i=null!=e&&n(e,c)))break;e=e[c]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Zr(o)&&fa(c,o)&&(zr(e)||Vr(e))};var ba=function(e,t){return null!=e&&ya(e,t,ha)};var va=function(e,t){return pa(e,t,(function(t,n){return ba(e,n)}))};var Ea=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},ma=Zn?Zn.isConcatSpreadable:void 0;var ga=function(e){return zr(e)||Vr(e)||!!(ma&&e&&e[ma])};var Oa=function e(t,n,r,o,i){var c=-1,a=t.length;for(r||(r=ga),i||(i=[]);++c<a;){var u=t[c];n>0&&r(u)?n>1?e(u,n-1,r,o,i):Ea(i,u):o||(i[i.length]=u)}return i};var wa=function(e){return(null==e?0:e.length)?Oa(e,1):[]};var Sa=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},_a=Math.max;var Ia=function(e,t,n){return t=_a(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=_a(r.length-t,0),c=Array(i);++o<i;)c[o]=r[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=r[o];return a[t]=n(c),Sa(e,this,a)}};var Aa=function(e){return function(){return e}};var Na=ia?function(e,t){return ia(e,"toString",{configurable:!0,enumerable:!1,value:Aa(t),writable:!0})}:function(e){return e},Ta=800,Da=16,Pa=Date.now;var Ca=function(e){var t=0,n=0;return function(){var r=Pa(),o=Da-(r-n);if(n=r,o>0){if(++t>=Ta)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Na);var ja=function(e){return Ca(Ia(e,void 0,wa),e+"")}((function(e,t){return null==e?{}:va(e,t)}));function Ra(e,t,n,r,o){return new Promise((t,i)=>{const c=Po.getState(),a=uo.selectors.getUser(c);if(!a||!a.authKey)return console.error("SDK sendDeviceCmd error: No userKey!"),void i(new Error("Device command error: No userKey!"));const u=Pn.selectors.getHubs(c),s=u[e],{hubKey:l}=u[e];if(!s||!l)return console.error("SDK sendDeviceCmd error: No hubKey!"),void i(new Error("Device command error: No hubKey!"));if(s.connectionState!==pn.LOCAL&&s.connectionState!==pn.REMOTE)return console.error("SDK sendDeviceCmd error: No Hub connection"),void i(new Error("Device command error: No hub connection"));const{authKey:f}=a;if(!f)return console.error("SDK sendDeviceCmd error: No authKey!"),void i(new Error("Device command error: No hubKey!"));let d=r;oo(o)||(d=ja(d,o)),n&&pi({command:n,method:void 0,authKey:f,hubId:e,localUrl:s.url,hubKey:l,data:[d]}).then(e=>{console.debug("SDK sendDeviceCmd ok",e),t(e)}).catch(e=>{console.error("SDK sendDeviceCmd error:",e),i(new Error("Device command error!"))})})}function Ua(e){Po.dispatch(Oo.actions.setPlansState(e))}function Ka(){const e=Po.getState();return Oo.selectors.getPlans(e)}e.CLOUD_CONNECTION_STATES=dn,e.HUB_CONNECTION_STATES=pn,e.HUB_STATES=jo,e.LANGUAGES=io,e.ROLES=ao,e.USER_STATES=co,e.ZWAVE_EXCLUSION_STATUS=Uo,e.ZWAVE_INCLUSION_STATUS=Ro,e.acceptEula=function(){return Po.dispatch(uo.actions.setEula(!0)),hi().state===co.WAITING_EULA&&Po.dispatch(uo.actions.changeState(co.EULA_ACCEPTED)),!0},e.addLocationNode=function(e,t){Po.dispatch(Oo.actions.addLocationNode({parentId:e,newNode:t}))},e.addRoom=async function(e,t){return new Promise((n,r)=>{mi(e,fn.CMD_SET_ROOM,[t]).then(e=>{n(e)}).catch(e=>{r(e)})})},e.changeLanguage=function(e){let t=!1;return Object.values(io).indexOf(e)>-1&&(Po.dispatch(uo.actions.setLanguage(e)),t=!0,hi().state===co.WAITING_LANGUAGE&&Po.dispatch(uo.actions.changeState(co.LANGUAGE_SET))),t},e.closeAlarm=async function(e,t){const n=t;return new Promise((t,r)=>{wi(e,fn.CMD_CLOSE_ALARM,{alarmId:n.id}).then(e=>{t(e)}).catch(e=>{r(e)})})},e.connectHubByTokens=function(e,t,n=!1,r=!0){return new Promise((o,i)=>{const{authKey:c}=Di();e||i(new Error("No Hub Id")),t||i(new Error("No hubKey")),c||i(new Error("No AuthKey"));const a={};a[e]=t,Pi(a,n,r).then(()=>{Fi(e,!1).then(()=>{o(Ni())}).catch(e=>i(e))}).catch(e=>i(e))})},e.cozifyReducer=_o,e.deleteDevice=Tn,e.devicesState=_n,e.doPoll=Zi,e.doPwLogin=function(e,t){return new Promise((n,r)=>{pi({command:fn.USER_LOGIN,data:{email:e,password:t}}).then(e=>{e&&Zo(e)&&(Po.dispatch(uo.actions.setAuthKey(e)),hi().state===co.WAITING_LOGIN&&Po.dispatch(uo.actions.changeState(co.LOGIN_DONE))),n(e)}).catch(e=>{console.debug("doPwLogin error",e),r(new Error("Login failure"))})})},e.doRemoteIdQuery=Ai,e.doZwaveExclusion=async function(e){return new Promise((t,n)=>{tc[e]=!1,function(e){return new Promise((t,n)=>{if(tc[e])return console.debug("startZwaveExclusion: exclusion stopped"),void n(new Error("exclusion stopped"));const r=Xi()[e],{authKey:o}=Yi(),{hubKey:i}=r;if(console.debug("startZwaveExclusion connection state: ",r.connectionState),r.connectionState!==pn.LOCAL&&r.connectionState!==pn.REMOTE)return console.warn("SDK startZwaveExclusion: no Hub connection"),void n(new Error("no hub connection"));nc[e]?n(new Error("exclusion already in action")):(nc[e]=!0,pi({command:fn.ZWAVE_START_EXCLUSION,hubId:e,authKey:o,hubKey:i,localUrl:r.url,data:[]}).then(r=>{nc[e]=!1,r.status===Uo.RUNNING?t(r):(console.error("SDK: doExclusionById - wrong state: ",r),n(r))}).catch(t=>{console.error("SDK: doExclusionById error: ",t.message),nc[e]=!1,n(t)}))})}(e).then(r=>{r&&r.status===Uo.RUNNING?new Promise((t,n)=>{!function e(t,n,r){oc(t).then(o=>{if(o&&o.status)switch(o.status){case Uo.RUNNING:setTimeout(()=>{e(t,n,r)},Mo);break;case Uo.SUCCESS:n(!0);break;case Uo.TIMEOUT:case Uo.CANCEL:n(!1);break;default:r(new Error("Wrong exclusion status"))}else r(new Error("Wrong exclusion status"))}).catch(e=>{console.error("Error in askZwaveExclusionStatusPromise: ",e),r(e)})}(e,t,n)}).then(e=>{t(e)}).catch(e=>{n(e)}):n(new Error("Wrong exclusion status"))}).catch(e=>{console.error("Error in doZwaveExclusion: ",e),n(e)})})},e.doZwaveInclusion=async function(e){return new Promise((t,n)=>{qi[e]=!1,function(e){return new Promise((t,n)=>{if(qi[e])return console.debug("startZwaveInclusion: inclusion stopped"),void n(new Error("inclusion stopped"));const r=Xi()[e],{authKey:o}=Yi(),{hubKey:i}=r;if(console.debug("startZwaveInclusion connection state: ",r.connectionState),r.connectionState!==pn.LOCAL&&r.connectionState!==pn.REMOTE)return console.warn("SDK startZwaveInclusion: no Hub connection"),void n(new Error("no hub connection"));Ji[e]?n(new Error("inclusion already in action")):(Ji[e]=!0,pi({command:fn.ZWAVE_START_INCLUSION,hubId:e,authKey:o,hubKey:i,localUrl:r.url,data:[]}).then(r=>{Ji[e]=!1,r?r.status===Ro.RUNNING?t(r):n(r):n(new Error("No inclusion state received"))}).catch(t=>{console.error("SDK: startZwaveInclusion error: ",t.message),Ji[e]=!1,n(t)}))})}(e).then(r=>{r&&r.status===Ro.RUNNING?new Promise((t,n)=>{ec(e,t,n)}).then(e=>{t(e)}).catch(e=>{n(e)}):n(new Error("Wrong inclusion status"))}).catch(e=>{console.error("Error in doZwavePairing: ",e),n(e)})})},e.editRoom=async function(e,t){return new Promise((n,r)=>{mi(e,fn.CMD_SET_ROOM,[t]).then(e=>{n(e)}).catch(e=>{r(e)})})},e.getAlarms=Oi,e.getCloudConnectionState=function(){const e=Po.getState();return hn.selectors.getConnections(e).cloudState},e.getDevices=yi,e.getHubAlarms=function(e){let t;const n=Oi();return n&&n[e]&&(t=n[e]),t},e.getHubConnectionState=function(e){const t=Po.getState();return Pn.selectors.getHubs(t)[e]?Pn.selectors.getHubs(t)[e].connectionState:pn.UNCONNECTED},e.getHubDevices=function(e){let t;const n=yi();return n&&n[e]&&(t=n[e]),t},e.getHubPairingDevices=function(e){let t;const n=bi();return n&&n[e]&&(t=n[e]),t},e.getHubRooms=function(e){let t;const n=Ei();return n&&n[e]&&(t=n[e]),t},e.getHubs=Ni,e.getPairingDevices=bi,e.getPlans=Ka,e.getRooms=Ei,e.getUserState=function(){return hi().state},e.healZwave=async function(e){return new Promise((t,n)=>{if(ic[e])return void n(new Error("healingInAction already in action"));ic[e]=!0;const{authKey:r}=Yi(),o=Xi()[e],{hubKey:i}=o;pi({command:fn.ZWAVE_HEAL,hubId:e,authKey:r,hubKey:i,localUrl:o.url,data:[]}).then(n=>{console.debug("SDK: healZwave: Ok , status: ",n),ic[e]=!1,t("ok")}).catch(t=>{console.error("SDK: healZwave error: ",t.message),ic[e]=!1,n(t)})})},e.hubsState=Pn,e.identifyDevice=function(e,t){return Ra(e,0,fn.CMD_DEVICE_IDENTIFY,{id:t})},e.ignorePairingByIds=function(e,t,n){const{authKey:r}=Di(),o=Ni()[e],{hubKey:i}=o;return pi({command:fn.PAIR_IGNORE,hubId:e,authKey:r,hubKey:i,localUrl:o.url,data:{id:t,ignored:n}})},e.isZwaveEnabled=async function(e){return new Promise((t,n)=>{oc(e).then(e=>{e&&e.status!==Uo.NO_ZWAVE?t(!0):t(!1)}).catch(e=>{console.error("Error in isZwaveEnabled: ",e),n(e)})})},e.loadPlans=async function(){return new Promise((e,t)=>{const n=Po.getState(),r=uo.selectors.getUser(n);if(!r||!r.authKey)return console.error("SDK loadPlans error: No userKey!"),void t(new Error("Load plans error: No userKey!"));const{authKey:o}=r;if(!o)return console.error("SDK loadPlans error: No authKey!"),void t(new Error("Load plans error: No authKey!"));pi({command:fn.CMD_GET_PLANS,authKey:o,url:"http://localhost:3001/plans"}).then(t=>{console.debug("SDK loadPlans ok",t),Ua(t),e(Ka())}).catch(e=>{console.error("SDK loadPlans error:",e),t(e)})})},e.lockAndBackup=function(e,t,n){return new Promise((r,o)=>{pi({command:fn.HUB_LOCK_BACKUP,authKey:t,hubKey:n,hubId:e}).then(e=>{r(e)}).catch(t=>{console.log(`doRemoteIdQuery ${e} error `,t.message),o(t)})})},e.removeAlarm=async function(e,t){const n=t;return new Promise((t,r)=>{wi(e,fn.CMD_REMOVE_ALARM,{alarmId:n.id}).then(e=>{t(e)}).catch(e=>{r(e)})})},e.removeLocationNode=function(e){Po.dispatch(Oo.actions.removeLocationNode(e))},e.removeRoom=async function(e,t){return new Promise((n,r)=>{mi(e,fn.CMD_REMOVE_ROOM,{roomId:t.id}).then(e=>{n(e)}).catch(t=>{if(t.response&&t.response.status&&404===t.response.status){const t=Ei();n(t[e])}r(t)})})},e.savePlans=async function(){return new Promise((e,t)=>{const n=Po.getState(),r=uo.selectors.getUser(n);if(!r||!r.authKey)return console.error("SDK savePlans error: No userKey!"),void t(new Error("Save plans error: No userKey!"));const{authKey:o}=r;if(!o)return console.error("SDK savePlans error: No authKey!"),void t(new Error("Save plans error: No authKey!"));const i=Ka(),c={templates:i.templates,installations:i.installations,locations:i.locations};pi({command:fn.CMD_SAVE_PLANS,authKey:o,data:c,url:"http://localhost:3001/plans"}).then(t=>{console.debug("SDK savePlans ok",t),e(t)}).catch(e=>{console.error("SDK savePlans error:",e),t(e)})})},e.selectHubById=Fi,e.sendDeviceCmd=Ra,e.sendDeviceStateCmd=function(e,t,n,r){return new Promise((o,i)=>{const c=Po.getState(),a=uo.selectors.getUser(c);if(!a||!a.authKey)return console.error("SDK sendDeviceStateCmd error: No userKey!"),void i(new Error("Device command error: No userKey!"));const u=Pn.selectors.getHubs(c);if(!u[e]||!u[e].hubKey)return console.error("SDK sendDeviceStateCmd error: No hubKey!"),void i(new Error("Device command error: No hubKey!"));const{authKey:s}=a,{hubKey:l}=u[e];let f=n;oo(r)||(f=ja(f,r)),pi({command:fn.CMD_DEVICE_STATE,authKey:s,hubId:e,hubKey:l,data:[{id:t,state:f}]}).then(e=>{console.debug("SDK sendDeviceCmd ok",e),o(e)}).catch(e=>{console.error(e),console.error("SDK sendDeviceStateCmd error:",e),i(new Error("Device state command error!"))})})},e.setAuthenticated=function(e){return Po.dispatch(uo.actions.setAuthenticated(e)),hi()},e.setDeviceMeta=function(e,t,n,r){return Ra(e,0,fn.CMD_DEVICE_META,{id:t,name:n,room:r})},e.setDevices=Nn,e.setLocationNode=function(e){Po.dispatch(Oo.actions.setLocationNode(e))},e.setPlans=Ua,e.startDiscoveringHubs=ji,e.startPairingById=function(e,t){const n=xo;Ui[e]=!1;const r=(e,t)=>xi(e,t).then(()=>{}).catch(()=>{});try{Ri[e]=setInterval(r,n,e,t)}catch(e){console.error("Catch startPairingById: ",e)}return xi(e,t)},e.startPollingById=Bi,e.stopDiscoveringHubs=function(){clearInterval(Si)},e.stopPairingById=Mi,e.stopPairings=function(){const e=Ni();Object.values(e).forEach(e=>{Mi(e.id).then(()=>console.debug("SDK: pairingStopped: ",e.id)).catch(()=>console.log("SDK: pairingStopped error: ",e.id))})},e.stopPollingById=Wi,e.stopZwaveExclusion=async function(e){return new Promise((t,n)=>{if(rc[e])return void n(new Error("stopExclusionById already stopping"));rc[e]=!0;const{authKey:r}=Yi(),o=Xi()[e],{hubKey:i}=o;pi({command:fn.ZWAVE_STOP_EXCLUSION,hubId:e,authKey:r,hubKey:i,localUrl:o.url,data:[]}).then(n=>{console.debug("SDK: stopZwaveExclusion: Ok , status: ",n),tc[e]=!0,rc[e]=!1,t("ok")}).catch(t=>{console.error("SDK: stopZwaveExclusion error: ",t.message),rc[e]=!1,n(t)})})},e.stopZwaveInclusion=async function(e){return new Promise((t,n)=>{if(Qi[e])return void n(new Error("stopInclusionById already stopping"));Qi[e]=!0;const{authKey:r}=Yi(),o=Xi()[e],{hubKey:i}=o;pi({command:fn.ZWAVE_STOP_INCLUSION,hubId:e,authKey:r,hubKey:i,localUrl:o.url,data:[]}).then(n=>{console.debug("SDK: stopZwavePairing: Ok , status: ",n),qi[e]=!0,Qi[e]=!1,t("ok")}).catch(t=>{console.error("SDK: stopZwavePairing error: ",t.message),Qi[e]=!1,n(t)})})},e.store=Po,e.unSelectHubById=function(e){const t=Ni();Object.values(t).forEach(t=>{e===t.id&&(Po.dispatch(Pn.actions.unSelectHub({hubId:t.id})),Wi(t.id))})},e.unSelectHubs=function(){const e=Ni();Object.values(e).forEach(e=>{Po.dispatch(Pn.actions.unSelectHub({hubId:e.id})),Wi(e.id)})},e.unpairDevice=function(e,t){return Ra(e,0,fn.CMD_DEVICE_IGNORE,{id:t})},e.updateHubs=Rn,e.urlBase64Decode=rn,e.useTestcloud=function(){un=cn},e.watchChanges=Co,Object.defineProperty(e,"__esModule",{value:!0})}));
