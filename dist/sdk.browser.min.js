!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("axios")):"function"==typeof define&&define.amd?define(["exports","axios"],t):t((e=e||self).CozifySDK={},e.axios)}(this,(function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var r=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e};function n(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function o(e){return!!e&&!!e[V]}function c(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[k]||!!e.constructor[k]||l(e)||d(e))}function a(e,t){0===i(e)?x(e).forEach((function(r){return t(r,e[r],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function i(e){var t=e[V];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:l(e)?2:d(e)?3:0}function s(e,t){return 2===i(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function l(e){return K&&e instanceof Map}function d(e){return U&&e instanceof Set}function f(e){return e.o||e.t}function p(e,t){if(void 0===t&&(t=!1),Array.isArray(e))return e.slice();var r=Object.create(Object.getPrototypeOf(e));return a(e,(function(o){if(o!==V){var c=Object.getOwnPropertyDescriptor(e,o),a=c.value;c.get&&(t||n(1),a=c.get.call(e)),c.enumerable?r[o]=a:Object.defineProperty(r,o,{value:a,writable:!0,configurable:!0})}})),r}function h(e,t){o(e)||Object.isFrozen(e)||!c(e)||(i(e)>1&&(e.set=e.add=e.clear=e.delete=y),Object.freeze(e),t&&a(e,(function(e,t){return h(t,!0)})))}function y(){n(2)}function m(e){var t=G[e];return t||n(19,e),t}function b(){return R}function E(e,t){t&&(m("Patches"),e.u=[],e.s=[],e.v=t)}function v(e){g(e),e.p.forEach(S),e.p=null}function g(e){e===R&&(R=e.l)}function O(e){return R={p:[],l:R,h:e,m:!0,_:0}}function S(e){var t=e[V];0===t.i||1===t.i?t.j():t.O=!0}function I(e,t){t._=t.p.length;var r=t.p[0],o=void 0!==e&&e!==r;return t.h.g||m("ES5").S(t,e,o),o?(r[V].P&&(v(t),n(4)),c(e)&&(e=D(t,e),t.l||A(t,e)),t.u&&m("Patches").M(r[V],e,t.u,t.s)):e=D(t,r,[]),v(t),t.u&&t.v(t.u,t.s),e!==M?e:void 0}function D(e,t,r){if(Object.isFrozen(t))return t;var n=t[V];if(!n)return a(t,(function(o,c){return _(e,n,t,o,c,r)})),t;if(n.A!==e)return t;if(!n.P)return A(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=p(n.k,!0):n.o;a(o,(function(t,c){return _(e,n,o,t,c,r)})),A(e,o,!1),r&&e.u&&m("Patches").R(n,r,e.u,e.s)}return n.o}function _(e,t,r,n,a,l){if(o(a)){var d=D(e,a,l&&t&&3!==t.i&&!s(t.D,n)?l.concat(n):void 0);if(p=n,h=d,2===(y=i(f=r))?f.set(p,h):3===y?(f.delete(p),f.add(h)):f[p]=h,!o(d))return;e.m=!1}var f,p,h,y;if((!t||!u(a,function(e,t){return 2===i(e)?e.get(t):e[t]}(t.t,n)))&&c(a)){if(!e.h.N&&e._<1)return;D(e,a),t&&t.A.l||A(e,a)}}function A(e,t,r){void 0===r&&(r=!1),e.h.N&&e.m&&h(t,r)}function P(e,t){var r=e[V],n=Reflect.getOwnPropertyDescriptor(r?f(r):e,t);return n&&n.value}function N(e){if(!e.P){if(e.P=!0,0===e.i||1===e.i){var t=e.o=p(e.t);a(e.p,(function(e,r){t[e]=r})),e.p=void 0}e.l&&N(e.l)}}function w(e){e.o||(e.o=p(e.t))}function T(e,t,r){var n=l(t)?m("MapSet").T(t,r):d(t)?m("MapSet").F(t,r):e.g?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:b(),P:!1,I:!1,D:{},l:t,t:e,k:null,p:{},o:null,j:null,C:!1},o=n,c=H;r&&(o=[n],c=Z);var a=Proxy.revocable(o,c),i=a.revoke,s=a.proxy;return n.k=s,n.j=i,s}(t,r):m("ES5").J(t,r);return(r?r.A:b()).p.push(n),n}var C,R,j="undefined"!=typeof Symbol,K="undefined"!=typeof Map,U="undefined"!=typeof Set,L="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,M=j?Symbol("immer-nothing"):((C={})["immer-nothing"]=!0,C),k=j?Symbol("immer-draftable"):"__$immer_draftable",V=j?Symbol("immer-state"):"__$immer_state",x="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,G={},H={get:function(e,t){if(t===V)return e;var r=e.p;if(!e.P&&s(r,t))return r[t];var n=f(e)[t];if(e.I||!c(n))return n;if(e.P){if(n!==P(e.t,t))return n;r=e.o}return r[t]=T(e.A.h,n,e)},has:function(e,t){return t in f(e)},ownKeys:function(e){return Reflect.ownKeys(f(e))},set:function(e,t,r){if(!e.P){var n=P(e.t,t);if(r?u(n,r)||r===e.p[t]:u(n,r)&&t in e.t)return!0;w(e),N(e)}return e.D[t]=!0,e.o[t]=r,!0},deleteProperty:function(e,t){return void 0!==P(e.t,t)||t in e.t?(e.D[t]=!1,w(e),N(e)):e.D[t]&&delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=f(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&(n.writable=!0,n.configurable=1!==e.i||"length"!==t),n},defineProperty:function(){n(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){n(12)}},Z={};a(H,(function(e,t){Z[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Z.deleteProperty=function(e,t){return H.deleteProperty.call(this,e[0],t)},Z.set=function(e,t,r){return H.set.call(this,e[0],t,r,e[0])};var B=new(function(){function e(e){this.g=L,this.N=!1,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(e,t,r){if("function"==typeof e&&"function"!=typeof t){var o=t;t=e;var a=this;return function(e){var r=this;void 0===e&&(e=o);for(var n=arguments.length,c=Array(n>1?n-1:0),i=1;i<n;i++)c[i-1]=arguments[i];return a.produce(e,(function(e){var n;return(n=t).call.apply(n,[r,e].concat(c))}))}}var i;if("function"!=typeof t&&n(6),void 0!==r&&"function"!=typeof r&&n(7),c(e)){var s=O(this),u=T(this,e,void 0),l=!0;try{i=t(u),l=!1}finally{l?v(s):g(s)}return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return E(s,r),I(e,s)}),(function(e){throw v(s),e})):(E(s,r),I(i,s))}if((i=t(e))!==M)return void 0===i&&(i=e),this.N&&h(i,!0),i},t.produceWithPatches=function(e,t){var r,n,o=this;return"function"==typeof e?function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),c=1;c<r;c++)n[c-1]=arguments[c];return o.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(n))}))}:[this.produce(e,t,(function(e,t){r=e,n=t})),r,n]},t.createDraft=function(e){c(e)||n(8);var t=O(this),r=T(this,e,void 0);return r[V].C=!0,g(t),r},t.finishDraft=function(e,t){var r=(e&&e[V]).A;return E(r,t),I(void 0,r)},t.setAutoFreeze=function(e){this.N=e},t.setUseProxies=function(e){L||n(20),this.g=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}var c=m("Patches").U;return o(e)?c(e,t):this.produce(e,(function(e){return c(e,t.slice(r+1))}))},e}()),W=B.produce;B.produceWithPatches.bind(B),B.setAutoFreeze.bind(B),B.setUseProxies.bind(B),B.applyPatches.bind(B),B.createDraft.bind(B),B.finishDraft.bind(B);var $=function(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),F=function(){return Math.random().toString(36).substring(7).split("").join(".")},z={INIT:"@@redux/INIT"+F(),REPLACE:"@@redux/REPLACE"+F(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+F()}};function q(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(q)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var o=e,c=t,a=[],i=a,s=!1;function u(){i===a&&(i=a.slice())}function l(){if(s)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return c}function d(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(s)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return u(),i.push(e),function(){if(t){if(s)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,u();var r=i.indexOf(e);i.splice(r,1),a=null}}}function f(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(s)throw new Error("Reducers may not dispatch actions.");try{s=!0,c=o(c,e)}finally{s=!1}for(var t=a=i,r=0;r<t.length;r++){(0,t[r])()}return e}return f({type:z.INIT}),(n={dispatch:f,subscribe:d,getState:l,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");o=e,f({type:z.REPLACE})}})[$]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(l())}return r(),{unsubscribe:t(r)}}})[$]=function(){return this},e},n}function Y(e,t){var r=t&&t.type;return"Given "+(r&&'action "'+String(r)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function X(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];"function"==typeof e[o]&&(r[o]=e[o])}var c,a=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:z.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:z.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+z.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(e){c=e}return function(e,t){if(void 0===e&&(e={}),c)throw c;for(var n=!1,o={},i=0;i<a.length;i++){var s=a[i],u=r[s],l=e[s],d=u(l,t);if(void 0===d){var f=Y(s,t);throw new Error(f)}o[s]=d,n=n||d!==l}return(n=n||a.length!==Object.keys(e).length)?o:e}}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(r,!0).forEach((function(t){J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function re(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},c=t.map((function(e){return e(o)}));return ee({},r,{dispatch:n=te.apply(void 0,c)(r.dispatch)})}}}function ne(e,t){return e===t}function oe(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}function ce(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}var ae=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var c=0,a=n.pop(),i=ce(n),s=e.apply(void 0,[function(){return c++,a.apply(null,arguments)}].concat(r)),u=e((function(){for(var e=[],t=i.length,r=0;r<t;r++)e.push(i[r].apply(null,arguments));return s.apply(null,e)}));return u.resultFunc=a,u.dependencies=i,u.recomputations=function(){return c},u.resetRecomputations=function(){return c=0},u}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne,r=null,n=null;return function(){return oe(t,r,arguments)||(n=e.apply(null,arguments)),r=arguments,n}}));function ie(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(o){return"function"==typeof o?o(r,n,e):t(o)}}}}var se=ie();function ue(){return(ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}se.withExtraArgument=ie;var le="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?te:te.apply(null,arguments)};function de(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}var fe=!0;function pe(e,t){function r(){if(t){var r=t.apply(void 0,arguments);if(!r)throw new Error("prepareAction did not return an object");return ue({type:e,payload:r.payload},"meta"in r&&{meta:r.meta},{},"error"in r&&{error:r.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}function he(e){return["type","payload","error","meta"].indexOf(e)>-1}function ye(e){var t={},r={addCase:function(e,n){var o="string"==typeof e?e:e.type;if(o in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[o]=n,r}};return e(r),t}function me(e){var t=e.name,r=e.initialState;if(!t)throw new Error("`name` is a required option for createSlice");var n=e.reducers||{},o=void 0===e.extraReducers?{}:"function"==typeof e.extraReducers?ye(e.extraReducers):e.extraReducers,c=Object.keys(n),a={},i={},s={};c.forEach((function(e){var r,o,c=n[e],u=t+"/"+e;"reducer"in c?(r=c.reducer,o=c.prepare):r=c,a[e]=r,i[u]=r,s[e]=o?pe(u,o):pe(u)}));var u=function(e,t){var r="function"==typeof t?ye(t):t;return function(t,n){return void 0===t&&(t=e),W(t,(function(e){var t=r[n.type];return t?t(e,n):void 0}))}}(r,ue({},o,{},i));return{name:t,reducer:u,actions:s,caseReducers:a}}function be(e){return function(t,r){function n(e){return de(t=e)&&"string"==typeof t.type&&Object.keys(t).every(he);var t}var c=function(t){n(r)?e(r.payload,t):e(r,t)};return o(t)?(c(t),t):W(t,c)}}function Ee(e,t){return t(e)}function ve(e){function t(t,r){var n=Ee(t,e);n in r.entities||(r.ids.push(n),r.entities[n]=t)}function r(e,r){Array.isArray(e)||(e=Object.values(e));var n=e,o=Array.isArray(n),c=0;for(n=o?n:n[Symbol.iterator]();;){var a;if(o){if(c>=n.length)break;a=n[c++]}else{if((c=n.next()).done)break;a=c.value}t(a,r)}}function n(e,t){var r=!1;e.forEach((function(e){e in t.entities&&(delete t.entities[e],r=!0)})),r&&(t.ids=t.ids.filter((function(e){return e in t.entities})))}function o(t,r){var n={},o={};(t.forEach((function(e){e.id in r.entities&&(o[e.id]=ue({},o[e.id],{},e))})),(t=Object.values(o)).length>0)&&(t.filter((function(t){return function(t,r,n){var o=n.entities[r.id],c=Object.assign({},o,r.changes),a=Ee(c,e),i=a!==r.id;return i&&(t[r.id]=a,delete n.entities[r.id]),n.entities[a]=c,i}(n,t,r)})).length>0&&(r.ids=r.ids.map((function(e){return n[e]||e}))))}function c(t,n){Array.isArray(t)||(t=Object.values(t));var c=[],a=[],i=t,s=Array.isArray(i),u=0;for(i=s?i:i[Symbol.iterator]();;){var l;if(s){if(u>=i.length)break;l=i[u++]}else{if((u=i.next()).done)break;l=u.value}var d=l,f=Ee(d,e);f in n.entities?a.push({id:f,changes:d}):c.push(d)}o(a,n),r(c,n)}return{removeAll:function(e){return Object.assign({},e,{ids:[],entities:{}})},addOne:be(t),addMany:be(r),setAll:be((function(e,t){Array.isArray(e)||(e=Object.values(e)),t.ids=[],t.entities={},r(e,t)})),updateOne:be((function(e,t){return o([e],t)})),updateMany:be(o),upsertOne:be((function(e,t){return c([e],t)})),upsertMany:be(c),removeOne:be((function(e,t){return n([e],t)})),removeMany:be(n)}}function ge(e,t){var r=ve(e);function n(t,r){Array.isArray(t)||(t=Object.values(t));var n=t.filter((function(t){return!(Ee(t,e)in r.entities)}));0!==n.length&&a(n,r)}function o(t,r){var n=[];t.forEach((function(t){return function(t,r,n){if(!(r.id in n.entities))return!1;var o=n.entities[r.id],c=Object.assign({},o,r.changes),a=Ee(c,e);return delete n.entities[r.id],t.push(c),a!==r.id}(n,t,r)})),0!==n.length&&a(n,r)}function c(t,r){Array.isArray(t)||(t=Object.values(t));var c=[],a=[],i=t,s=Array.isArray(i),u=0;for(i=s?i:i[Symbol.iterator]();;){var l;if(s){if(u>=i.length)break;l=i[u++]}else{if((u=i.next()).done)break;l=u.value}var d=l,f=Ee(d,e);f in r.entities?a.push({id:f,changes:d}):c.push(d)}o(a,r),n(c,r)}function a(r,n){r.sort(t),r.forEach((function(t){n.entities[e(t)]=t}));var o=Object.values(n.entities);o.sort(t);var c=o.map(e);(function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(e[r]!==t[r])return!1;return!0})(n.ids,c)||(n.ids=c)}return{removeOne:r.removeOne,removeMany:r.removeMany,removeAll:r.removeAll,addOne:be((function(e,t){return n([e],t)})),updateOne:be((function(e,t){return o([e],t)})),upsertOne:be((function(e,t){return c([e],t)})),setAll:be((function(e,t){Array.isArray(e)||(e=Object.values(e)),t.entities={},t.ids=[],n(e,t)})),addMany:be(n),updateMany:be(o),upsertMany:be(c)}}function Oe(e){void 0===e&&(e={});var t=ue({sortComparer:!1,selectId:function(e){return e.id}},e),r=t.selectId,n=t.sortComparer;return ue({selectId:r,sortComparer:n},{getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}},{},{getSelectors:function(e){var t=function(e){return e.ids},r=function(e){return e.entities},n=ae(t,r,(function(e,t){return e.map((function(e){return t[e]}))})),o=function(e,t){return t},c=function(e,t){return e[t]},a=ae(t,(function(e){return e.length}));if(!e)return{selectIds:t,selectEntities:r,selectAll:n,selectTotal:a,selectById:ae(r,o,c)};var i=ae(e,r);return{selectIds:ae(e,t),selectEntities:i,selectAll:ae(e,n),selectTotal:ae(e,a),selectById:ae(i,o,c)}}},{},n?ge(r,n):ve(r))}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var Se=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},Ie=["name","message","stack","code"],De=function(e){this.value=e},_e=function(e){if("object"==typeof e&&null!==e){var t={},r=Ie,n=Array.isArray(r),o=0;for(r=n?r:r[Symbol.iterator]();;){var c;if(n){if(o>=r.length)break;c=r[o++]}else{if((o=r.next()).done)break;c=o.value}var a=c;"string"==typeof e[a]&&(t[a]=e[a])}return t}return{message:String(e)}};function Ae(e,t,r){var n=pe(e+"/fulfilled",(function(e,t,r){return{payload:e,meta:{arg:r,requestId:t}}})),o=pe(e+"/pending",(function(e,t){return{payload:void 0,meta:{arg:t,requestId:e}}})),c=pe(e+"/rejected",(function(e,t,r,n){var o=!!e&&"AbortError"===e.name,c=!!e&&"ConditionError"===e.name;return{payload:n,error:_e(e||"Rejected"),meta:{arg:r,requestId:t,aborted:o,condition:c}}})),a="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(i,s,u){var l,d=Se(),f=new a,p=new Promise((function(e,t){return f.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))}));var h=function(){try{var a,l=function(e){return h?e:(r&&!r.dispatchConditionRejection&&c.match(a)&&a.meta.condition||i(a),a)},h=!1,y=function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}((function(){if(r&&r.condition&&!1===r.condition(e,{getState:s,extra:u}))throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return i(o(d,e)),Promise.resolve(Promise.race([p,Promise.resolve(t(e,{dispatch:i,getState:s,extra:u,requestId:d,signal:f.signal,rejectWithValue:function(e){return new De(e)}})).then((function(t){return t instanceof De?c(null,d,e,t.value):n(t,d,e)}))])).then((function(e){a=e}))}),(function(t){a=c(t,d,e)}));return Promise.resolve(y&&y.then?y.then(l):l(y))}catch(e){return Promise.reject(e)}}();return Object.assign(h,{abort:function(e){l=e,f.abort()}})}}),{pending:o,rejected:c,fulfilled:n})}function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(n,!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(){function e(e,t){var r=e[V];if(r&&!r.$){r.$=!0;var n=e[t];return r.$=!1,n}return e[t]}function t(e){e.P||(e.P=!0,e.l&&t(e.l))}function r(e){e.o||(e.o=i(e.t))}function i(e){var t=e&&e[V];if(t){t.$=!0;var r=p(t.k,!0);return t.$=!1,r}return p(e)}function l(e){for(var r=e.length-1;r>=0;r--){var n=e[r][V];if(!n.P)switch(n.i){case 5:h(n)&&t(n);break;case 4:d(n)&&t(n)}}}function d(e){for(var t=e.t,r=e.k,n=Object.keys(r),o=n.length-1;o>=0;o--){var c=n[o],a=t[c];if(void 0===a&&!s(t,c))return!0;var i=r[c],l=i&&i[V];if(l?l.t!==a:!u(i,a))return!0}return n.length!==Object.keys(t).length}function h(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}function y(e){e.O&&n(3,JSON.stringify(f(e)))}var m={};!function(e,t){G[e]=t}("ES5",{J:function(n,o){var s=Array.isArray(n),l=i(n);a(l,(function(o){!function(n,o,a){var i=m[o];i?i.enumerable=a:m[o]=i={enumerable:a,get:function(){return function(t,n){y(t);var o=e(f(t),n);return t.$?o:o===e(t.t,n)&&c(o)?(r(t),t.o[n]=T(t.A.h,o,t)):o}(this[V],o)},set:function(n){!function(n,o,c){if(y(n),n.D[o]=!0,!n.P){if(u(c,e(f(n),o)))return;t(n),r(n)}n.o[o]=c}(this[V],o,n)}},Object.defineProperty(n,o,i)}(l,o,s||function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(!r||!r.enumerable)}(n,o))}));var d={i:s?5:4,A:o?o.A:b(),P:!1,$:!1,I:!1,D:{},l:o,t:n,k:l,o:null,O:!1,C:!1};return Object.defineProperty(l,V,{value:d,writable:!0}),l},K:t,S:function(e,r,n){e.p.forEach((function(e){e[V].$=!0})),n?o(r)&&r[V].A===e&&l(e.p):(e.u&&function e(r){if(r&&"object"==typeof r){var n=r[V];if(n){var o=n.t,c=n.k,i=n.D,u=n.i;if(4===u)a(c,(function(r){r!==V&&(void 0!==o[r]||s(o,r)?i[r]||e(c[r]):(i[r]=!0,t(n)))})),a(o,(function(e){void 0!==c[e]||s(c,e)||(i[e]=!1,t(n))}));else if(5===u){if(h(n)&&(t(n),i.length=!0),c.length<o.length)for(var l=c.length;l<o.length;l++)i[l]=!1;else for(var d=o.length;d<c.length;d++)i[d]=!0;for(var f=Math.min(c.length,o.length),p=0;p<f;p++)void 0===i[p]&&e(c[p])}}}}(e.p[0]),l(e.p))}})}();const we=me({name:"alarms",initialState:{},reducers:{setAlarms(e,t){const r=e,{hubId:n}=t.payload,{alarms:o}=t.payload,c={};Object.entries(o).forEach(e=>{const[t,r]=e;c[t]=Ne({},r)}),r[n]=Ne({},c)},setAlarm(e,t){const r=e,{hubId:n}=t.payload,{alarm:o}=t.payload;n&&r[n]&&(r[n][o.id]=Ne({},o))},removeAlarm(e,t){const r=e,{hubId:n}=t.payload,{alarmId:o}=t.payload;n&&o&&r[n]&&r[n][o]&&delete r[n][o]}}}),Te=Oe(),{selectById:Ce,selectIds:Re,selectEntities:je,selectAll:Ke,selectTotal:Ue}=Te.getSelectors(e=>e.alarms);we.selectors=Te.getSelectors(e=>e.alarms),we.selectors.getAlarms=ae([e=>e.alarms],e=>e);const{actions:Le,reducer:Me}=we;let ke=!1;"object"==typeof process&&"object"==typeof process.versions&&(void 0!==process.versions.node?(ke=!0,console.log("Running in node.js")):console.log("Running in browser"));const Ve=ke;let xe=e=>(console.error("Invalid atob for string ",e),"invalid atob");if(ke){xe=e=>{return Buffer.from(e,"base64").toString("binary")}}else xe=window.atob;function Ge(e){const t=e.replace(/-/g,"+").replace(/_/g,"/");let r=t;switch(r.length%4){case 0:case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("Illegal base64url string!")}let n="",o=e=>(console.error("Invalid atob for string ",e),"invalid atob");if(ke){o=e=>{return Buffer.from(e,"base64").toString("binary")}}else o=window.atob;try{n=o(t)}catch(e){try{n=o(r)}catch(e){console.error("urlBase64Decode: trying atob failed")}}return n}const He=["91 30 CF 20 17 F7 D7 EC F7 BA 43 30 8E 19 83 B4 CF DE 5A CC","26 B0 20 FA AB E8 A3 81 63 37 C6 B7 EF 94 4D 40 3D 1B 85 10"],Ze="https://testapi.cozify.fi",Be="ui/0.2/";let We="https://api.cozify.fi";function $e(){return-1===We.indexOf("/site/")?`${We}/${Be}`:`${We}`}const Fe="1.13",ze=Object.freeze({USER_LOGIN:{method:"POST",url:"user/login",params:["password","email"],config:{responseType:Ve?"blob":"stream",timeout:15e3}},HUB_KEYS:{method:"GET",url:"user/hubkeys",timeout:15e3},HUB_LOCK_BACKUP:{method:"POST",url:"hub/remote/cc/$API_VER/hub/lockconfig"},REFRESH_AUTHKEY:{method:"GET",url:"user/refreshsession"},CLOUD_IP:{method:"GET",url:"hub/lan_ip"},CLOUD_META:{method:"GET",url:"hub/remote/hub"},POLL:{method:"GET",url:"hub/remote/cc/$API_VER/hub/poll",urlParams:["ts"]},PAIR_START:{method:"GET",url:"hub/remote/cc/$API_VER/hub/scan",urlParams:["ts"]},PAIR_IGNORE:{method:"PUT",url:"hub/remote/cc/$API_VER/hub/scan",type:"SET_SCAN_RESULT",params:["id","ignored"]},PAIR_STOP:{method:"GET",url:"hub/remote/cc/$API_VER/hub/stopscan"},CMD_DEVICE_STATE:{method:"PUT",url:"hub/remote/cc/$API_VER/devices/command",type:"CMD_DEVICE",params:["id","state"]},CMD_DEVICE_IGNORE:{method:"PUT",url:"hub/remote/cc/$API_VER/devices/command",type:"CMD_IGNORE_DEVICE",params:["id"]},CMD_DEVICE_VISIBILITY:{method:"PUT",url:"hub/remote/cc/$API_VER/devices",type:"CMD_DEVICE_VISIBLE",params:["id","visible"]},CMD_DEVICE_LOCK:{method:"PUT",url:"hub/remote/cc/$API_VER/devices",type:"CMD_DEVICE_LOCK",params:["id","locked"]},CMD_DEVICE_HOT_WATER:{method:"PUT",url:"hub/remote/cc/$API_VER/devices/command",type:"CMD_DEVICE_META",params:["id","locked"]},CMD_DEVICE_IDENTIFY:{method:"PUT",url:"hub/remote/cc/$API_VER/devices/command",type:"CMD_IDENTIFY",params:["id"]},CMD_DEVICE_META:{method:"PUT",url:"hub/remote/cc/$API_VER/devices/command",type:"CMD_DEVICE_META",params:["id","name","room"]},CMD_GET_ROOMS:{method:"GET",url:"hub/remote/cc/$API_VER/rooms"},CMD_SET_ROOM:{method:"PUT",url:"hub/remote/cc/$API_VER/rooms",type:"CMD_ROOM",params:["id","name","order"]},CMD_REMOVE_ROOM:{method:"DELETE",url:"hub/remote/cc/$API_VER/rooms",urlParams:["roomId"]},CMD_GET_ALARMS:{method:"GET",url:"hub/remote/cc/$API_VER/alarms"},CMD_CLOSE_ALARM:{method:"PUT",url:"hub/remote/cc/$API_VER/alarms/close",urlParams:["alarmId"]},CMD_REMOVE_ALARM:{method:"DELETE",url:"hub/remote/cc/$API_VER/alarms",urlParams:["roomId"]},GET_MODBUS_DEVICE_PAIRINGS:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"GET_MODBUS_PAIRINGS"},SET_MODBUS_DEVICE_PAIRINGS:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"PAIR_MODBUS"},ZWAVE_START_INCLUSION:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_START_INCLUSION"},ZWAVE_STOP_INCLUSION:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_CANCEL_INCLUSION"},ZWAVE_START_EXCLUSION:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_START_EXCLUSION"},ZWAVE_STOP_EXCLUSION:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_CANCEL_EXCLUSION"},ZWAVE_INCLUSION_STATUS:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"GET_ZWAVE_INCLUSION_STATUS"},ZWAVE_EXCLUSION_STATUS:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"GET_ZWAVE_EXCLUSION_STATUS"},ZWAVE_HEAL:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_HEAL"},ZWAVE_GET_NODES:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_GET_NODES"},ZWAVE_CHECK_IS_FAILED_NODE:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_CHECK_FAILED",params:["nodeId"],timeout:3e4},ZWAVE_REMOVE_FAILED_NODE:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_REMOVE_FAILED",params:["nodeId"],timeout:3e4},ZWAVE_GET_NODE_CONFIGURATION:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_UI_GET_CONFIGURATION",params:["nodeId","parameter"],timeout:3e4},ZWAVE_SET_NODE_CONFIGURATION:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_UI_SET_CONFIGURATION",params:["nodeId","parameter","size","default","value"],timeout:3e4},CMD_LIST_PLANS:{method:"GET",url:"plans"},CMD_GET_PLAN:{method:"GET",url:"plans"},CMD_SAVE_PLAN:{method:"POST",url:"plans",params:["templates","installations","locations"]}}),qe=Object.freeze({UNCONNECTED:"no connection",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",OBSOLETE_API_VERSION:"obsolete api version",LATE_PAYMENT:"late payment",CONNECTED:"connected"}),Ye=Object.freeze({UNCONNECTED:"no connection",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",OBSOLETE_API_VERSION:"obsolete api version",REMOTE:"remote",LOCAL:"local"}),Xe=me({name:"connections",initialState:{cloudState:qe.UNCONNECTED},reducers:{setCloudConnectionState(e,t){const r=e,n=t.payload,o=e.cloudState;Object.values(qe).indexOf(n)>-1&&o!==n&&(console.log(`CLOUD connection state ${o} -> ${n}`),r.cloudState=n)}}}),Je=Oe(),{selectById:Qe,selectIds:et,selectEntities:tt,selectAll:rt,selectTotal:nt}=Je.getSelectors(e=>e.hubs);Xe.selectors=Je.getSelectors(e=>e.connections),Xe.selectors.getConnections=ae([e=>e.connections],e=>e);const{actions:ot,reducer:ct}=Xe;function at(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(n,!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const st=me({name:"pairings",initialState:{},reducers:{setPairingDevices(e,t){const r=e,{hubId:n}=t.payload,{devices:o}=t.payload,c={};Object.entries(o).forEach(e=>{const[t,r]=e;c[t]=it({},r)}),r[n]=it({},c)},setPairingDevice(e,t){const r=e,{hubId:n}=t.payload,{device:o}=t.payload;r[n]&&(r[n][o.id]=it({},o))},deletePairingDevice(e,t){const r=e,{hubId:n}=t.payload,{deviceId:o}=t.payload;n&&o&&r[n]&&r[n][o]&&delete r[n][o]}}}),ut=Oe(),{selectById:lt,selectIds:dt,selectEntities:ft,selectAll:pt,selectTotal:ht}=ut.getSelectors(e=>e.hubs);st.selectors=ut.getSelectors(e=>e.pairings),st.selectors.getPairings=ae([e=>e.pairings],e=>e);const{actions:yt,reducer:mt}=st;function bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(n,!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const vt=me({name:"devices",initialState:{},reducers:{setDevices(e,t){const r=e,{hubId:n}=t.payload,{devices:o}=t.payload,c={};Object.entries(o).forEach(e=>{const[t,r]=e;c[t]=Et({},r)}),r[n]=Et({},c)},setDevice(e,t){const r=e,{hubId:n}=t.payload,{device:o}=t.payload;r[n]&&(r[n][o.id]=Et({},o))},deleteDevice(e,t){const r=e,{hubId:n}=t.payload,{deviceId:o}=t.payload;n&&o&&r[n]&&r[n][o]&&delete r[n][o]}}}),gt=Oe(),{selectById:Ot,selectIds:St,selectEntities:It,selectAll:Dt,selectTotal:_t}=gt.getSelectors(e=>e.devices);vt.selectors=gt.getSelectors(e=>e.devices),vt.selectors.getDevices=ae([e=>e.devices],e=>e);const{actions:At,reducer:Pt}=vt,{setDevices:Nt,deleteDevice:wt}=At;function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const Ct=me({name:"hubs",initialState:{},reducers:{updateHubs(e,t){const n=e,o=t.payload;console.log("updateHubs",o),Object.entries(o).forEach(t=>{const[o,c]=t;n[o]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(n,!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e[o],{},c)})},selectHub(e,t){const r=e,{hubId:n}=t.payload;console.log("selectHub",n),e[n]&&(r[n].selected=!0,console.log("selectHub",e[n]))},unSelectHub(e,t){const r=e,{hubId:n}=t.payload;e[n]&&(r[n].selected=!1)},setHubConnectionState(e,t){const{hubId:r}=t.payload,n=e,o=t.payload.state,c=e[r]?e[r].connectionState:void 0;Object.values(Ye).indexOf(o)>-1&&c&&c!==o&&(n[r].connectionState=o)}}}),Rt=Oe(),{selectById:jt,selectIds:Kt,selectEntities:Ut,selectAll:Lt,selectTotal:Mt}=Rt.getSelectors(e=>e.hubs);Ct.selectors=Rt.getSelectors(e=>e.hubs),Ct.selectors.getHubs=ae([e=>e.hubs],e=>e);const{actions:kt,reducer:Vt}=Ct,{updateHubs:xt,selectHub:Gt,unSelectHub:Ht,setHubConnectionState:Zt}=kt;var Bt=Object.prototype;var Wt=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Bt)};var $t=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),Ft=Object.prototype.hasOwnProperty;var zt=function(e){if(!Wt(e))return $t(e);var t=[];for(var r in Object(e))Ft.call(e,r)&&"constructor"!=r&&t.push(r);return t},qt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Yt(e,t){return e(t={exports:{}},t.exports),t.exports}var Xt="object"==typeof qt&&qt&&qt.Object===Object&&qt,Jt="object"==typeof self&&self&&self.Object===Object&&self,Qt=Xt||Jt||Function("return this")(),er=Qt.Symbol,tr=Object.prototype,rr=tr.hasOwnProperty,nr=tr.toString,or=er?er.toStringTag:void 0;var cr=function(e){var t=rr.call(e,or),r=e[or];try{e[or]=void 0;var n=!0}catch(e){}var o=nr.call(e);return n&&(t?e[or]=r:delete e[or]),o},ar=Object.prototype.toString;var ir=function(e){return ar.call(e)},sr="[object Null]",ur="[object Undefined]",lr=er?er.toStringTag:void 0;var dr=function(e){return null==e?void 0===e?ur:sr:lr&&lr in Object(e)?cr(e):ir(e)};var fr=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},pr="[object AsyncFunction]",hr="[object Function]",yr="[object GeneratorFunction]",mr="[object Proxy]";var br,Er=function(e){if(!fr(e))return!1;var t=dr(e);return t==hr||t==yr||t==pr||t==mr},vr=Qt["__core-js_shared__"],gr=(br=/[^.]+$/.exec(vr&&vr.keys&&vr.keys.IE_PROTO||""))?"Symbol(src)_1."+br:"";var Or=function(e){return!!gr&&gr in e},Sr=Function.prototype.toString;var Ir=function(e){if(null!=e){try{return Sr.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Dr=/^\[object .+?Constructor\]$/,_r=Function.prototype,Ar=Object.prototype,Pr=_r.toString,Nr=Ar.hasOwnProperty,wr=RegExp("^"+Pr.call(Nr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Tr=function(e){return!(!fr(e)||Or(e))&&(Er(e)?wr:Dr).test(Ir(e))};var Cr=function(e,t){return null==e?void 0:e[t]};var Rr=function(e,t){var r=Cr(e,t);return Tr(r)?r:void 0},jr=Rr(Qt,"DataView"),Kr=Rr(Qt,"Map"),Ur=Rr(Qt,"Promise"),Lr=Rr(Qt,"Set"),Mr=Rr(Qt,"WeakMap"),kr=Ir(jr),Vr=Ir(Kr),xr=Ir(Ur),Gr=Ir(Lr),Hr=Ir(Mr),Zr=dr;(jr&&"[object DataView]"!=Zr(new jr(new ArrayBuffer(1)))||Kr&&"[object Map]"!=Zr(new Kr)||Ur&&"[object Promise]"!=Zr(Ur.resolve())||Lr&&"[object Set]"!=Zr(new Lr)||Mr&&"[object WeakMap]"!=Zr(new Mr))&&(Zr=function(e){var t=dr(e),r="[object Object]"==t?e.constructor:void 0,n=r?Ir(r):"";if(n)switch(n){case kr:return"[object DataView]";case Vr:return"[object Map]";case xr:return"[object Promise]";case Gr:return"[object Set]";case Hr:return"[object WeakMap]"}return t});var Br=Zr;var Wr=function(e){return null!=e&&"object"==typeof e},$r="[object Arguments]";var Fr=function(e){return Wr(e)&&dr(e)==$r},zr=Object.prototype,qr=zr.hasOwnProperty,Yr=zr.propertyIsEnumerable,Xr=Fr(function(){return arguments}())?Fr:function(e){return Wr(e)&&qr.call(e,"callee")&&!Yr.call(e,"callee")},Jr=Array.isArray,Qr=9007199254740991;var en=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Qr};var tn=function(e){return null!=e&&en(e.length)&&!Er(e)};var rn=function(){return!1},nn=Yt((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?Qt.Buffer:void 0,c=(o?o.isBuffer:void 0)||rn;e.exports=c})),on={};on["[object Float32Array]"]=on["[object Float64Array]"]=on["[object Int8Array]"]=on["[object Int16Array]"]=on["[object Int32Array]"]=on["[object Uint8Array]"]=on["[object Uint8ClampedArray]"]=on["[object Uint16Array]"]=on["[object Uint32Array]"]=!0,on["[object Arguments]"]=on["[object Array]"]=on["[object ArrayBuffer]"]=on["[object Boolean]"]=on["[object DataView]"]=on["[object Date]"]=on["[object Error]"]=on["[object Function]"]=on["[object Map]"]=on["[object Number]"]=on["[object Object]"]=on["[object RegExp]"]=on["[object Set]"]=on["[object String]"]=on["[object WeakMap]"]=!1;var cn=function(e){return Wr(e)&&en(e.length)&&!!on[dr(e)]};var an=function(e){return function(t){return e(t)}},sn=Yt((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&Xt.process,c=function(){try{var e=n&&n.require&&n.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=c})),un=sn&&sn.isTypedArray,ln=un?an(un):cn,dn="[object Map]",fn="[object Set]",pn=Object.prototype.hasOwnProperty;var hn=function(e){if(null==e)return!0;if(tn(e)&&(Jr(e)||"string"==typeof e||"function"==typeof e.splice||nn(e)||ln(e)||Xr(e)))return!e.length;var t=Br(e);if(t==dn||t==fn)return!e.size;if(Wt(e))return!zt(e).length;for(var r in e)if(pn.call(e,r))return!1;return!0};const yn=Object.freeze({NONE:"none",EN_EN:"en",EN_UK:"en-UK",FI_FI:"fi-FI",FI:"fi",EN:"en"}),mn=Object.freeze({WAITING_LANGUAGE:"wait language",LANGUAGE_SET:"language set",WAITING_LOGIN:"wait login",LOGIN_DONE:"login done",WAITING_EULA:"wait eula",EULA_ACCEPTED:"eula accepted",AUTHENTICATED:"logged in",KEYED:"key entered",LOGGED_OUT:"logged out"}),bn=Object.freeze({ADMIN:32,USER:8,GUEST:2,ANONYMOUS:1}),En=me({name:"user",initialState:{firstName:"",lastName:"",email:"",language:yn.NONE,authKey:"",role:bn.ANONYMOUS,eulaAccepted:!1,state:mn.WAITING_LANGUAGE},reducers:{changeState(e,t){const r=e,n=t.payload,o=e.state;switch(console.log(`User state ${o} -> ${n}`),o){case mn.WAITING_LANGUAGE:n===mn.LANGUAGE_SET&&(hn(e.language)||(r.state=mn.WAITING_LOGIN));break;case mn.WAITING_LOGIN:n===mn.LOGIN_DONE&&(hn(e.authKey)||(hn(e.eulaAcceted)?r.state=mn.WAITING_EULA:r.state=mn.AUTHENTICATED));break;case mn.WAITING_EULA:n===mn.EULA_ACCEPTED&&(r.state=mn.AUTHENTICATED);break;case mn.AUTHENTICATED:n===mn.LOGGED_OUT&&(r.state=mn.WAITING_LOGIN)}},setEula(e,t){e.eulaAccepted=t.payload},setLanguage(e,t){e.language=t.payload},setAuthKey(e,t){e.authKey=t.payload},setAuthenticated(e,t){const r=e;r.authKey=t.payload,r.state=mn.KEYED}}}),vn=Oe();En.selectors=vn.getSelectors(e=>e.user),En.selectors.getUser=ae([e=>e.user],e=>e);const{actions:gn,reducer:On}=En;function Sn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function In(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(n,!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Dn=me({name:"rooms",initialState:{},reducers:{setRooms(e,t){const r=e,{hubId:n}=t.payload,{rooms:o}=t.payload,c={};Object.entries(o).forEach(e=>{const[t,r]=e;c[t]=In({},r)}),r[n]=In({},c)},setRoom(e,t){const r=e,{hubId:n}=t.payload,{room:o}=t.payload;n&&r[n]&&(r[n][o.id]=In({},o))},removeRoom(e,t){const r=e,{hubId:n}=t.payload,{roomId:o}=t.payload;n&&o&&r[n]&&r[n][o]&&delete r[n][o]}}}),_n=Oe(),{selectById:An,selectIds:Pn,selectEntities:Nn,selectAll:wn,selectTotal:Tn}=_n.getSelectors(e=>e.rooms);Dn.selectors=_n.getSelectors(e=>e.rooms),Dn.selectors.getRooms=ae([e=>e.rooms],e=>e);const{actions:Cn,reducer:Rn}=Dn,jn=Oe({selectId:e=>(console.log("SDK plansAdapter: ",e),e.uid),sortComparer:(e,t)=>t.changed_at.localeCompare(e.changed_at)});const Kn=Ae("plans/fetchPlans",async(e,t)=>(console.debug("reactFetchPlans state",t.getState()),async function(){return new Promise((e,t)=>{t(new Error("fetchPlans TBD"))})}()),{condition:(e,{getState:t,extra:r})=>{const n=t();console.debug("reactFetchPlans condition state: ",n),console.debug("reactFetchPlans condition extra: ",r)}}),Un=Ae("plans/subscribePlans",async(e,t)=>new Promise((r,n)=>{console.debug("reactSubscribePlans state: ",t.getState()),console.debug("reactSubscribePlans params: ",e),n(new Error("subscribePlans TBD"))}));const Ln=Ae("plans/insertPlan",async(e,t)=>{console.debug("reactInsertPlan state: ",t.getState());const{name:r}=e;return async function(e){return new Promise((t,r)=>{console.debug("SDK insertPlan name",e),r(new Error("insertPlans TBD"))})}(r)});const Mn=Ae("plans/updatePlan",async(e,t)=>{console.debug("reactUpdatePlan state: ",t.getState());const{uid:r,changes:n}=e;return async function(e,t){return new Promise((r,n)=>{n(new Error(`updatePlan uid: ${e} TBD, changes: ${t}`))})}(r,n)});const kn=Ae("plans/removePlan",async(e,t)=>{console.debug("reactRemovePlan state: ",t.getState());const{uid:r}=e;return async function(e){return new Promise((t,r)=>{r(new Error(`removePlan  uid: ${e} TBD`))})}(r)}),Vn=me({name:"plans",initialState:jn.getInitialState(),reducers:{setPlansState(e,t){const r=t.payload;jn.setAll(e,r)}},extraReducers:{[Kn.fulfilled]:(e,t)=>{jn.upsertMany(e,t.payload)},[Kn.rejected]:(e,t)=>{console.error("SDK reactFetchPlans rejected state: ",e),console.error("SDK reactFetchPlans rejected action: ",t)},[Ln.fulfilled]:(e,t)=>{jn.updateOne(e,t.payload)},[Ln.rejected]:(e,t)=>{console.error("SDK reactInsertPlan rejected state: ",e),console.error("SDK reactInsertPlan rejected action: ",t)},[Mn.fulfilled]:(e,t)=>{jn.updateOne(e,t.payload)},[Mn.rejected]:(e,t)=>{console.error("SDK reactFetchPlans rejected state: ",e),console.error("SDK reactFetchPlans rejected action: ",t)},[kn.fulfilled]:(e,t)=>{jn.updateOne(e,t.payload)},[kn.rejected]:(e,t)=>{console.error("SDK reactRemovePlan rejected state: ",e),console.error("SDK reactRemovePlan rejected action: ",t)}}});Vn.selectors=jn.getSelectors(e=>e.plans),Vn.selectors.getPlans=Vn.selectors.selectEntities;const{reducer:xn}=Vn,{selectById:Gn,selectIds:Hn,selectEntities:Zn,selectAll:Bn,selectTotal:Wn}=jn.getSelectors(e=>e.plans),$n=Oe({selectId:e=>e.uid,sortComparer:(e,t)=>e.plan_id.localeCompare(t.plan_id)});const Fn=Ae("plans/fetchPlanDocuments",async(e,t)=>(console.debug("fetchPlanDocuments state: ",t.getState()),async function(e){return new Promise((t,r)=>{r(new Error(`fetchPlanDocuments planId: ${e} TBD`))})}(e))),zn=Ae("plans/subscribePlanDocuments",async(e,t)=>new Promise((r,n)=>{console.debug("reactSubscribePlanDocuments state: ",t.getState()),n(new Error(`reactSubscribePlanDocuments params: ${e} TBD`))}));const qn=Ae("plans/insertPlanDocument",async(e,t)=>{console.debug("reactInsertPlanDocument state: ",t.getState());const{planId:r,changes:n}=e;return async function(e,t){return new Promise((r,n)=>{n(new Error(`insertPlanDocument planId: ${e} TBD, changes: ${t}`))})}(r,n)});const Yn=Ae("plans/updatePlanDocument",async(e,t)=>{console.debug("reactUpdatePlanDocument state: ",t.getState());const{uid:r,changes:n}=e;return async function(e,t){return new Promise((r,n)=>{n(new Error(`updatePlanDocument uid: ${e} TBD, changes: ${t}`))})}(r,n)});const Xn=Ae("plans/removePlanDocument",async(e,t)=>{console.debug("removePlanDocument state: ",t.getState());const{uid:r}=e;return async function(e){return new Promise((t,r)=>{r(new Error(`removePlanDocument uid: ${e} TBD`))})}(r)}),Jn=me({name:"documents",initialState:$n.getInitialState(),reducers:{setPlanDocumentsState(e,t){const r=e,n=t.payload;$n.setAll(r,n)}},extraReducers:{[Fn.fulfilled]:(e,t)=>{$n.upsertMany(e,t.payload)},[Fn.rejected]:(e,t)=>{console.error("SDK reactFetchPlanDocuments rejected state: ",e),console.error("SDK reactFetchPlanDocuments rejected action: ",t)},[qn.fulfilled]:(e,t)=>{$n.updateOne(e,t.payload)},[qn.rejected]:(e,t)=>{console.error("SDK reactInsertPlanDocument rejected state: ",e),console.error("SDK reactInsertPlanDocument rejected action: ",t)},[Yn.fulfilled]:(e,t)=>{$n.updateOne(e,t.payload)},[Yn.rejected]:(e,t)=>{console.error("SDK reactUpdatePlanDocument rejected state: ",e),console.error("SDK reactUpdatePlanDocument rejected action: ",t)},[Xn.fulfilled]:(e,t)=>{$n.updateOne(e,t.payload)},[Xn.rejected]:(e,t)=>{console.error("SDK reactRemovePlanDocument rejected state: ",e),console.error("SDK reactRemovePlanDocument rejected action: ",t)}}});Jn.selectors=$n.getSelectors(e=>e.documents),Jn.selectors.selectPlanDocuments=ae([e=>e.documents,(e,t)=>t],(e,t)=>{const r=e.ids.filter(r=>e.entities[r].plan_id===t),n=[];return r.forEach(t=>{n.push(e.entities[t])}),n});const{selectById:Qn,selectIds:eo,selectEntities:to,selectAll:ro,selectTotal:no}=$n.getSelectors(e=>e.documents),oo=Jn.selectors.selectPlanDocuments,{reducer:co}=Jn,ao=Oe({selectId:e=>e.uid,sortComparer:(e,t)=>e.document_id.localeCompare(t.document_id)});const io=Ae("plans/fetchPlanDocumentNodes",async(e,t)=>(console.debug("fetchPlanDocuments state: ",t.getState()),async function(e){return new Promise((t,r)=>{r(new Error(`fetchPlanDocuments documentId: ${e} TBD`))})}(e))),so=Ae("plans/subscribePlanDocumentNodes",async(e,t)=>new Promise((e,r)=>{console.debug("reactSubscribePlanDocumentNodes state: ",t.getState()),r(new Error("reactSubscribePlanDocumentNodes TBD"))}));const uo=Ae("plans/insertPlanDocumentNode",async(e,t)=>{console.debug("reactInsertPlanDocumentNode state:",t.getState());const{documentId:r,parentId:n,changes:o}=e;return async function(e,t,r){const n=r;return r&&r.type&&(n.__typename=r.type),new Promise((r,o)=>{o(new Error(`insertPlanDocumentNode docId: ${e}, parentId: ${t} TBD, changes: ${n}`))})}(r,n,o)});const lo=Ae("plans/updatePlanDocumentNode",async(e,t)=>{console.debug("reactUpdatePlanDocumentNode state: ",t.getState());const{uid:r,changes:n}=e;return async function(e,t){return new Promise((r,n)=>{n(new Error(`updatePlanDocumentNode uid: ${e} TBD, changes: ${t}`))})}(r,n)});const fo=Ae("plans/removePlanDocumentNode",async(e,t)=>{console.debug("reactRemovePlanDocumentNode state: ",t.getState());const{uid:r}=e;return async function(e){return new Promise((t,r)=>{r(new Error(`removePlanDocumentNode uid: ${e} TBD`))})}(r)}),po=me({name:"nodes",initialState:ao.getInitialState(),reducers:{setPlanDocumentNodesState(e,t){const r=e,n=t.payload;ao.setAll(r,n)}},extraReducers:{[io.fulfilled]:(e,t)=>{ao.upsertMany(e,t.payload)},[io.rejected]:(e,t)=>{console.error("SDK reactFetchPlanDocumentNodes rejected state: ",e),console.error("SDK reactFetchPlanDocumentNodes rejected action: ",t)},[uo.fulfilled]:(e,t)=>{ao.updateOne(e,t.payload)},[uo.rejected]:(e,t)=>{console.error("SDK reactInsertPlanDocumentNode rejected state: ",e),console.error("SDK reactInsertPlanDocumentNode rejected action: ",t)},[lo.fulfilled]:(e,t)=>{ao.updateOne(e,t.payload)},[lo.rejected]:(e,t)=>{console.error("SDK reactUpdatePlanDocumentNode rejected state: ",e),console.error("SDK reactUpdatePlanDocumentNode rejected action: ",t)},[fo.fulfilled]:(e,t)=>{ao.updateOne(e,t.payload)},[fo.rejected]:(e,t)=>{console.error("SDK reactRemovePlanDocumentNode rejected state: ",e),console.error("SDK reactRemovePlanDocumentNode rejected action: ",t)}}});po.selectors=ao.getSelectors(e=>e.nodes),po.selectors.selectPlanDocumentNodes=ae([e=>e.nodes,(e,t)=>t],(e,t)=>{const r=e.ids.filter(r=>e.entities[r].document_id===t),n=[];return r.forEach(t=>{n.push(e.entities[t])}),n});const{selectById:ho,selectIds:yo,selectEntities:mo,selectAll:bo,selectTotal:Eo}=ao.getSelectors(e=>e.nodes),vo=po.selectors.selectPlanDocumentNodes,{reducer:go}=po,Oo={alarms:Me,connections:ct,pairings:mt,devices:Pt,hubs:Vt,user:On,rooms:Rn,plans:xn,documents:co,nodes:go};
/*!
   * isobject <https://github.com/jonschlinkert/isobject>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */
var So=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)},Io=function(e,t,r){if(So(r)||(r={default:r}),!Ao(e))return void 0!==r.default?r.default:e;"number"==typeof t&&(t=String(t));const n=Array.isArray(t),o="string"==typeof t,c=r.separator||".",a=r.joinChar||("string"==typeof c?c:".");if(!o&&!n)return e;if(o&&t in e)return _o(t,e,r)?e[t]:r.default;let i=n?t:function(e,t,r){if("function"==typeof r.split)return r.split(e);return e.split(t)}(t,c,r),s=i.length,u=0;do{let t=i[u];for("number"==typeof t&&(t=String(t));t&&"\\"===t.slice(-1);)t=Do([t.slice(0,-1),i[++u]||""],a,r);if(t in e){if(!_o(t,e,r))return r.default;e=e[t]}else{let n=!1,o=u+1;for(;o<s;)if(n=(t=Do([t,i[o++]],a,r))in e){if(!_o(t,e,r))return r.default;e=e[t],u=o-1;break}if(!n)return r.default}}while(++u<s&&Ao(e));return u===s?e:r.default};
/*!
   * get-value <https://github.com/jonschlinkert/get-value>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   */function Do(e,t,r){return"function"==typeof r.join?r.join(e):e[0]+t+e[1]}function _o(e,t,r){return"function"!=typeof r.isValid||r.isValid(e,t)}function Ao(e){return So(e)||Array.isArray(e)||"function"==typeof e}console.log("Store rootReducer: ",Oo);const Po=function(e){var t,r=e||{},n=r.reducer,o=void 0===n?void 0:n,c=r.middleware,a=void 0===c?function(e){void 0===e&&(e={});var t=e,r=t.thunk,n=void 0===r||r,o=(t.immutableCheck,t.serializableCheck,[]);return n&&(!function(e){return"boolean"==typeof e}(n)?o.push(se.withExtraArgument(n.extraArgument)):o.push(se)),o}():c,i=r.devTools,s=void 0===i||i,u=r.preloadedState,l=void 0===u?void 0:u,d=r.enhancers,f=void 0===d?void 0:d;if("function"==typeof o)t=o;else{if(!de(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=X(o)}var p=re.apply(void 0,a),h=te;s&&(h=le(ue({trace:!fe},"object"==typeof s&&s)));var y=[p];return Array.isArray(f)?y=[p].concat(f):"function"==typeof f&&(y=f(y)),q(t,l,h.apply(void 0,y))}({reducer:Oo});function No(e,t,r){const n=r||Po,o=function(e,t){let r=Io(e(),t);return function(n){return()=>{const o=Io(e(),t);if(r!==o){const e=r;r=o,n(o,e)}}}}(n.getState,e);n.subscribe(o(t))}console.log("Store Initial State: ",Po.getState());const wo=Object.freeze({UNCLAIMED:"unclaimed",CLAIMED:"claimed",TOO_NEW_VERSION:"new version",NO_ACCESS:"no access",CONNECTED:"connected"}),To=Object.freeze({NOT_PAIRING:"NOT_PAIRING",IDLE:"IDLE",RUNNING:"RUNNING",TIMEOUT:"TIMEOUT",SUCCESS:"SUCCESS",CANCEL:"CANCEL",NO_ZWAVE:"NO_ZWAVE",ERROR:"ERROR"}),Co=Object.freeze({IDLE:"IDLE",RUNNING:"RUNNING",TIMEOUT:"TIMEOUT",SUCCESS:"SUCCESS",CANCEL:"CANCEL",NO_ZWAVE:"NO_ZWAVE",ERROR:"ERROR"}),Ro=45e3,jo=1e3,Ko=3e3,Uo=3e3,Lo=3e3,Mo="http://",ko="8893";function Vo(e){Po.dispatch(Xe.actions.setCloudConnectionState(e))}function xo(e){const t=Po.getState(),r=Ct.selectors.getHubs(t),n=e;n.state===Ye.UNCONNECTED&&r[n.hubId]&&r[n.hubId].connectionState===Ye.REMOTE&&(n.state=Ye.LOCAL),Po.dispatch(Ct.actions.setHubConnectionState(n))}var Go="[object String]";var Ho=function(e){return"string"==typeof e||!Jr(e)&&Wr(e)&&dr(e)==Go},Zo=["ETIMEDOUT","ECONNRESET","EADDRINUSE","ESOCKETTIMEDOUT","ECONNREFUSED","EPIPE","EHOSTUNREACH","EAI_AGAIN"],Bo=["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED"],Wo=function(e){return!e||!e.code||(-1!==Zo.indexOf(e.code)||-1===Bo.indexOf(e.code))},$o=Yt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isNetworkError=c,t.isRetryableError=s,t.isSafeRequestError=u,t.isIdempotentRequestError=l,t.isNetworkOrIdempotentRequestError=d,t.exponentialDelay=p,t.default=y;var r,n=(r=Wo)&&r.__esModule?r:{default:r};var o="axios-retry";function c(e){return!e.response&&Boolean(e.code)&&"ECONNABORTED"!==e.code&&(0,n.default)(e)}var a=["get","head","options"],i=a.concat(["put","delete"]);function s(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&e.response.status<=599)}function u(e){return!!e.config&&(s(e)&&-1!==a.indexOf(e.config.method))}function l(e){return!!e.config&&(s(e)&&-1!==i.indexOf(e.config.method))}function d(e){return c(e)||l(e)}function f(){return 0}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=100*Math.pow(2,e);return t+.2*t*Math.random()}function h(e){var t=e[o]||{};return t.retryCount=t.retryCount||0,e[o]=t,t}function y(e,t){e.interceptors.request.use((function(e){return h(e).lastRequestTime=Date.now(),e})),e.interceptors.response.use(null,(function(r){var n=r.config;if(!n)return Promise.reject(r);var c=function(e,t){return Object.assign({},t,e[o])}(n,t),a=c.retries,i=void 0===a?3:a,s=c.retryCondition,u=void 0===s?d:s,l=c.retryDelay,p=void 0===l?f:l,y=c.shouldResetTimeout,m=void 0!==y&&y,b=h(n);if(u(r)&&b.retryCount<i){b.retryCount+=1;var E=p(b.retryCount,r);if(function(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}(e,n),!m&&n.timeout&&b.lastRequestTime){var v=Date.now()-b.lastRequestTime;n.timeout=Math.max(n.timeout-v-E,1)}return n.transformRequest=[function(e){return e}],new Promise((function(t){return setTimeout((function(){return t(e(n))}),E)}))}return Promise.reject(r)}))}y.isNetworkError=c,y.isSafeRequestError=u,y.isIdempotentRequestError=l,y.isNetworkOrIdempotentRequestError=d,y.exponentialDelay=p,y.isRetryableError=s}));!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}($o);$o.isNetworkError,$o.isRetryableError,$o.isSafeRequestError,$o.isIdempotentRequestError,$o.isNetworkOrIdempotentRequestError,$o.exponentialDelay;var Fo=$o.default;const zo=36e5;function qo(e,t){let r="0.0";const n=e.indexOf(".");let o=-1;return-1!==n&&(o=e.indexOf(".",n+1)),-1!==o&&(r=e.substring(0,o)),function(e,t){const r=e.split("."),n=t.split("."),o=Math.min(r.length,n.length);if(o>0)for(let e=0;e<o-1;e+=1){const t=Number(r[e])-Number(n[e]);if(0!==t)return t}return r.length-n.length}(r,t)>0&&(r=t),r}function Yo(e){let t=qe.UNCONNECTED;return e&&e.response&&401===e.response.status?(t=qe.UNAUTHENTICATED,console.error("send: authentication error ",e)):e&&e.response&&403===e.response.status?(t=qe.LATE_PAYMENT,console.error("send: unauhorized error ",e)):e&&e.response&&403===e.response.status?(t=qe.UNAUTHORIZED,console.error("send: unauhorized error ",e)):e&&e.response&&410===e.response.status&&(t=qe.OBSOLETE_API_VERSION,console.error("send: version error ",e)),t}function Xo(e){let t=Ye.UNCONNECTED;return e&&e.response&&400===e.response.status?console.log("send: no-connection error ",e):e&&e.response&&401===e.response.status?(t=Ye.UNAUTHENTICATED,console.error("send: authentication error ",e)):e&&e.response&&403===e.response.status?(t=Ye.UNAUTHORIZED,console.error("send: unauhorized error ",e)):e&&e.response&&410===e.response.status&&(t=Ye.OBSOLETE_API_VERSION,console.error("send: version error ",e)),t}let Jo=!1,Qo=null;function ec(e){return new Promise(t=>{if(!e)return void t(!0);const r=(new Date).getTime();Jo||Qo&&!(r-Qo>zo)?t(!0):(Jo=!0,Qo=r,!Ve&&window&&window.plugins&&window.plugins.sslCertificateChecker?window.plugins.sslCertificateChecker.check(()=>{Jo=!1,t(!0)},e=>{"CONNECTION_NOT_SECURE"===e?(Jo=!1,t(!1)):(Jo=!1,Qo=void 0,t(!0))},We,He):(setTimeout(()=>{Jo=!1},zo),t(!0)))})}const tc=["get","head","options"].concat(["put","delete"]),rc=tc.concat(["post"]);function nc(e){return!!e.config&&(function(e){return!e.response||e.response.status>=500&&e.response.status<=599}(e)&&-1!==rc.indexOf(e.config.method))}const oc={},cc=2;let ac=!1;function ic(e){let t=null,r={},n={},o=null;if(e){const t=e.split(".");t[0]&&(t[0]=t[0].replace("Bearer ",""),r=JSON.parse(Ge(t[0]))),t[1]&&(n=JSON.parse(Ge(t[1])))}var c;(r&&r.exp||null!=n&&n.exp)&&(t=r.exp?r.exp:n.exp),t&&(o=t-Math.round((new Date).getTime()/1e3)),!o||o<0?Vo(qe.UNAUTHENTICATED):o&&o<432e3&&(c=e,ac||(ac=!0,lc({command:ze.REFRESH_AUTHKEY,authKey:c}).then(e=>{setTimeout(()=>{ac=!1},6e5),e.length>10&&Po.dispatch(En.actions.setAuthKey(e))}).catch(()=>{ac=!1})))}function sc(e){return new Promise(t=>{Promise.all(e).then(()=>{t()}).catch(()=>{t()})})}Fo(t,{retryCondition:function(e){if(!(e&&e.config&&e.config.url))return console.error("retryCondition unknown",e),!1;if(oc[e.config.url]){if(oc[e.config.url]>=cc)return oc[e.config.url]=0,console.error("retryCondition count >",cc),!1;oc[e.config.url]+=oc[e.config.url],console.info("retryCondition count set ",oc[e.config.url])}else oc[e.config.url]=1,console.info("retryCondition count set to 1");nc(e)&&-1!==tc.indexOf(e.config.method)?console.info("retryCondition condition true",e.config):(console.info("retryCondition condition false",e.config),oc[e.config.url]=0);const t=nc(e)&&-1!==tc.indexOf(e.config.method);return console.info("retryCondition return ",t),t},shouldResetTimeout:!0,retryDelay:(e,t)=>(console.error("axiosRetry ",t),5e3)});let uc=!1;function lc({command:e,localUrl:r,url:n,timeout:o,method:c,authKey:a,hubKey:i,type:s,config:u,data:l,hubId:d}){let f=c,p=n,h=o,y=a,m=i,b=u,E=s;null==f&&(f="GET"),null==E&&(E="application/json;charset=UTF-8");const v=l;let g=!1;const O=!hn(d),S=Po.getState(),I=En.selectors.getUser(S);if(void 0!==e&&e){if(e.method&&(f=e.method),hn(p)&&e.url){if(-1!==e.url.indexOf("$API_VER")){const t=Ct.selectors.getHubs(S);if(!t[d]||!t[d].hubKey&&-1===$e().indexOf("https://one.cozify.fi"))return new Promise((e,t)=>{t(new Error("SDK Error: Send - Hub or hubKey not found error"))});const r=t[d];if(!r.version||r.connectionState===Ye.UNCONNECTED&&-1===e.url.indexOf("hub/remote/hub"))return new Promise((e,t)=>{t(new Error("SDK Error: Send - No Hub connection error"))});const n=qo(r.version,Fe);p=$e().concat(e.url.replace("$API_VER",n))}else p=$e().concat(e.url);if(d&&-1!==p.indexOf("https://one.cozify.fi")&&-1!==p.indexOf("hub/remote")){const e=p.indexOf("hub/remote"),t=p.substring(e+10),r=p.substring(0,e);p=r.concat("hub/").concat(d).concat("/remote").concat(t)}}if(p){const e=p.split("hub/remote");e&&e[1]&&r&&(p=r+e[1],m&&(y=m,m=null))}if(p&&p.indexOf($e())>-1&&(g=!0),e.type&&v&&(Jr(v)?v[0]?v[0].type=e.type:v.push({type:e.type}):v&&(v.type=e.type)),e.params&&(e.params.includes("type")||e.params.push("type"),e.params.forEach(e=>{Jr(l)?v&&v[0]&&l&&l[0]&&(v[0][e]=l[0][e]):v&&l&&(v[e]=l[e])})),e.urlParams){const t=[];e.urlParams.forEach(e=>{l&&void 0!==l[e]&&t.push(`${encodeURIComponent(e)}=${encodeURIComponent(l[e])}`)}),p&&t.length>0&&(p=`${p}?${t.join("&")}`)}e.timeout&&(h=e.timeout),e.config&&(b=e.config)}const D=JSON.stringify(v),_={timeout:h||15e3,method:f,headers:{Accept:"application/json, application/binary, text/plain, */*","Content-Type":E,Authorization:y||null,"Accept-Language":null,"X-Hub-Key":m||null},crossDomain:!0,responseType:"application/json",url:p,data:hn(D)?null:D};return I.language&&I.language!==yn.NONE?_.headers["Accept-Language"]=I.language:delete _.headers["Accept-Language"],Object.assign(_,b),new Promise((r,n)=>{e||p?(t.interceptors.response.use(e=>e.headers["content-type"].includes("application/json")||e.headers["content-type"].includes("application/binary")?(function(e){oc[e]&&(console.warn("resetRetry to 0"),oc[e]=0,delete oc[e])}(p),e):(console.error("send: unknown response type"),e),e=>Promise.reject(e)),ec(!(!g||!p||-1!==p.indexOf("https://one.cozify.fi"))).then(o=>{!o||uc?(uc=!0,n(new Error("SDK Error: SSL failure."))):(y&&ic(y),t(_).then(e=>{g?Vo(qe.CONNECTED):d&&xo({hubId:d,state:Ye.LOCAL}),r(e.data)}).catch(t=>{let r="SDK Send error:";t&&t.response?(t.response.data&&t.response.data.message&&(r=r.concat(t.response.data.message)),t.response.status&&(r=r.concat(`Status: ${t.response.status}`)),g?(e!==ze.CLOUD_META&&Vo(Yo(t)),O&&d&&xo({hubId:d,state:Xo(t)})):(t&&t.response&&401===t.response.status&&Vo(Yo(t)),O&&d&&xo({hubId:d,state:Xo(t)}))):t.request?g?(Vo(qe.UNCONNECTED),O&&d&&xo({hubId:d,state:Ye.UNCONNECTED}),r=r.concat(`Cloud unconnected in remote. Status ${t.request.status}`)):O&&d&&(xo({hubId:d,state:Ye.UNCONNECTED}),r=r.concat(`Hub unconnected. Status ${t.request.status}`)):g?(Vo(qe.UNCONNECTED),r=r.concat("Cloud unconnected in remote"),O&&d&&(xo({hubId:d,state:Ye.UNCONNECTED}),r=r.concat("Hub unconnected in remote"))):O&&d&&(xo({hubId:d,state:Ye.UNCONNECTED}),r=r.concat("Hub unconnected")),console.error(r),n(t)}))})):n(new Error("SDK Error: Command or Command API URL not found."))})}function dc(){return En.selectors.getUser(Po.getState())}function fc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fc(n,!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fc(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hc(){const e=Po.getState();return vt.selectors.getDevices(e)}function yc(){const e=Po.getState();return st.selectors.getPairings(e)}function mc(e,t,r){let n={};const o=yc();o&&o[e]&&(n=o[e]);const c={hubId:e,devices:{}};r.map(e=>{const t=pc({},e.status),r=e;delete r.status;const n=pc({},r,{},t);return c.devices[e.id]=n,!0}),t?Po.dispatch(st.actions.setPairingDevices(c)):Object.entries(c.devices).forEach(([t,r])=>{const o={hubId:e,device:r};t&&r?Po.dispatch(st.actions.setPairingDevice(o)):t&&n[t]&&Po.dispatch(st.actions.deletePairingDevice(t))})}function bc(){const e=Po.getState();return Dn.selectors.getRooms(e)}function Ec(e,t,r){return new Promise((n,o)=>{const c=Po.getState(),a=En.selectors.getUser(c);if(!a||!a.authKey)return console.error("SDK sendRoomCmd error: No userKey!"),void o(new Error("Room command error: No userKey!"));const i=Ct.selectors.getHubs(c),s=i[e],{hubKey:u}=i[e];if(!s||!u&&-1===$e().indexOf("https://one.cozify.fi"))return console.error("SDK sendRoomCmd error: No hubKey!"),void o(new Error("Room command error: No hubKey!"));if(s.connectionState!==Ye.LOCAL&&s.connectionState!==Ye.REMOTE)return console.error("SDK sendRoomCmd error: No Hub connection"),void o(new Error("Room command error: No hub connection"));const{authKey:l}=a;if(!l)return console.error("SDK sendRoomCmd error: No authKey!"),void o(new Error("Room command error: No authKey!"));t&&lc({command:t,authKey:l,hubId:e,localUrl:s.url,hubKey:u,data:r}).then(t=>{console.debug("SDK sendRoomCmd ok",t),lc({command:ze.CMD_GET_ROOMS,authKey:l,hubId:e,localUrl:s.url,hubKey:u}).then(t=>{console.debug("SDK sendRoomCmd refresh rooms ok",t),Po.dispatch(Dn.actions.setRooms({hubId:e,rooms:t})),n(t)}).catch(e=>{console.error("SDK Room command error:",e),o(e)})}).catch(e=>{console.error("SDK Room command error:",e),o(e)})})}const vc=e=>{const t=e;return e.message&&(t.messageHTML=function(e){try{return decodeURIComponent(Array.prototype.map.call(xe(e),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).name(-2)})).join(""))}catch(e){return console.error("b64DecodeUnicode: trying atob failed"),"b64DecodeUnicode error"}}(e.message),t.messageTxt=function(e){let t=e;return(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<\/div>/gi,"")).replace(/<\/li>/gi,"")).replace(/<li>/gi,"")).replace(/<\/ul>/gi,"")).replace(/<\/p>/gi,"")).replace(/<br\s*[\/]?>/gi,"")).replace(/<[^>]+>/gi,"")).replace(/\s\s+/g," ")).trim()}(t.message)),t};function gc(){const e=Po.getState();return we.selectors.getAlarms(e)}function Oc(e,t,r){return new Promise((n,o)=>{const c=Po.getState(),a=En.selectors.getUser(c);if(!a||!a.authKey)return console.error("SDK closeAlarm error: No userKey!"),void o(new Error("Alarm command error: No userKey!"));const i=Ct.selectors.getHubs(c),s=i[e],{hubKey:u}=i[e];if(!s||!u&&-1===$e().indexOf("https://one.cozify.fi"))return console.error("SDK closeAlarm error: No hubKey!"),void o(new Error("Alarm command error: No hubKey!"));if(s.connectionState!==Ye.LOCAL&&s.connectionState!==Ye.REMOTE)return console.error("SDK closeAlarm error: No Hub connection"),void o(new Error("Alarm command error: No hub connection"));const{authKey:l}=a;if(!l)return console.error("SDK closeAlarm error: No authKey!"),void o(new Error("Alarm command error: No authKey!"));lc({command:t,authKey:l,hubId:e,localUrl:s.url,hubKey:u,data:r}).then(t=>{console.debug("SDK sendAlarmCmd ok",t),lc({command:ze.CMD_GET_ALARMS,authKey:l,hubId:e,localUrl:s.url,hubKey:u}).then(t=>{console.debug("SDK sendAlarmCmd refresh alarms ok",t),Po.dispatch(we.actions.setRooms({hubId:e,alarms:t})),n(t)}).catch(e=>{console.error("SDK Alarm command error:",e),o(e)})}).catch(e=>{o(e)})})}let Sc,Ic={};function Dc(e,t){const r=t;r.hubId&&(r.id=r.hubId,delete r.hubId),r.id&&(Ic[r.id]||(Ic[r.id]={id:r.id,name:r.name||""}),Ic[r.id].name=r.name,Ic[r.id].connected=r.connected,Ic[r.id].features=r.features,Ic[r.id].state=r.state,Ic[r.id].version=r.version,Ic[r.id].connectionState=r.connected?Ye.REMOTE:Ye.UNCONNECTED,e?(Ic[r.id].connectionState=Ye.LOCAL,Ic[r.id].url=e):Ic[r.id].url=void 0)}function _c(e,t,r){return new Promise((n,o)=>{lc({command:ze.CLOUD_META,authKey:t,hubKey:r,hubId:e}).then(e=>{Dc(void 0,e),n(e)}).catch(t=>{console.log(`doRemoteIdQuery ${e} error `,t.message),o(e)})})}function Ac(){return Ct.selectors.getHubs(Po.getState())}function Pc(){return new Promise(e=>{lc({command:ze.CLOUD_IP}).then(t=>{const r=[];t&&!hn(t)&&t.forEach(e=>{r.push(function(e){return new Promise(t=>{if(e){const r=`${Mo+e}:${ko}`;lc({url:`${r}/hub`,timeout:500}).then(n=>{Dc(r,n),t(e)}).catch(r=>{console.log(`doLocalIdQuery ${e} error `,r.message),t(e)})}else t()})}(e))}),sc(r).finally(()=>{!function(e){const t=Ac();Object.values(t).forEach(t=>{if(t.selected){const r=e[t.id];r&&(r.selected=!0)}})}(Ic),Po.dispatch(Ct.actions.updateHubs(Ic)),e("ok")})}).catch(t=>{console.error("doCloudDiscovery error: ",t.message),Po.dispatch(Ct.actions.updateHubs(Ic)),e("error")})})}function Nc(){return En.selectors.getUser(Po.getState())}function wc(e,t=!0,r=!1){const{authKey:n}=Nc();return new Promise(o=>{Ic=function(e){const t={};return e&&Object.keys(e).forEach(r=>{if(e[r]){const n=Ge(e[r].split(".")[1]),o=JSON.parse(n),c={};c.id=o.hubId||o.hub_id,c.name=o.hubName||o.hub_name,c.hubKey=e[r],c.connectionState=Ye.UNCONNECTED,o.role&&(c.role=o.role,c.roleString="",Object.keys(bn).forEach(e=>{bn[e]===c.role&&(c.roleString=e)})),t[c.id]=c}else t[r]={id:r,connectionState:Ye.UNCONNECTED}}),t}(e),Po.dispatch(Ct.actions.updateHubs(Ic)),function(e,t){return new Promise(r=>{const n=[];Object.values(e).forEach(e=>{n.push(_c(e.id,t,e.hubKey))}),sc(n).then(e=>{console.debug("fetchCloudMetaData values",e)}).catch(e=>{console.error("fetchCloudMetaData error",e)}).finally(()=>{r()})})}(Ic,n).finally(()=>{Po.dispatch(Ct.actions.updateHubs(Ic)),r?t?Pc().then(()=>{o(Ac())}).catch(()=>{o(Ac())}):o(Ac()):(t&&Pc(),o(Ac()))})})}function Tc(){const{authKey:e}=Nc();return new Promise((t,r)=>{e?lc({command:ze.HUB_KEYS,authKey:e}).then(e=>{e?wc(e).then(e=>t(e)):t(Ac())}).catch(e=>{console.error("fetchHubTokens error: ",e.message),r(e)}):r(new Error("No userKey!"))})}function Cc(){Sc||(Tc(),Sc=setInterval(Tc,Ro))}const Rc={},jc={},Kc={},Uc={};function Lc(e,t=!1){return new Promise((r,n)=>{let o=t;if(jc[e])return console.debug("doPairing: pairing stopped"),void n(new Error("pairing stopped"));Kc[e]||(Kc[e]=0);const c=Ac()[e],{authKey:a}=Nc(),{hubKey:i}=c;if(console.debug("doPairing connection state: ",c.connectionState),c.connectionState!==Ye.LOCAL&&c.connectionState!==Ye.REMOTE)return console.warn("SDK doPairing: no Hub connection"),void n(new Error("no hub connection"));Uc[e]?n(new Error("pairing already in action")):(Uc[e]=!0,o&&(Kc[e]=0),o=0===Kc[e],lc({command:ze.PAIR_START,hubId:e,authKey:a,hubKey:i,localUrl:c.url,data:{ts:Kc[e]}}).then(t=>{if(t)switch(Kc[e]=t.timestamp,t.type){case"SCAN_DELTA":mc(e,o,t.devices)}Uc[e]=!1,r("ok")}).catch(t=>{console.error("SDK: doPairing error: ",t.message),Uc[e]=!1,n(t)}))})}const Mc={};function kc(e){return new Promise((t,r)=>{if(Mc[e])return void r(new Error("already stopping"));Mc[e]=!0;const{authKey:n}=Nc(),o=Ac()[e],{hubKey:c}=o;clearInterval(Rc[e]),lc({command:ze.PAIR_STOP,hubId:e,authKey:n,hubKey:c,localUrl:o.url}).then(r=>{console.debug("SDK: pairingStopped: Ok , data: ",r),jc[e]=!0,Mc[e]=!1,mc(e,!0,[]),t("ok")}).catch(t=>{console.error("SDK: pairingStopped error: ",t.message),Mc[e]=!1,r(t)})})}const Vc={},xc={},Gc={},Hc={},Zc={};function Bc(e,t=!1){return new Promise((r,n)=>{let o=t;if(o&&(Gc[e]=0),o=0===Gc[e],xc[e])return console.debug("doPolling: polling stopped"),void r("stopped");Gc[e]||(Gc[e]=0);const c=Ac()[e];if(!c||c.connectionState!==Ye.LOCAL&&c.connectionState!==Ye.REMOTE)return console.warn("SDK doPoll: No Hub connection"),void n(new Error("doPoll error: No Hub connection"));if(console.debug("doPoll connection state: ",c.connectionState),c.connectionState===Ye.REMOTE&&!o){if(Zc[e])return Zc[e]=!1,void r("skipped");Zc[e]=!0}const{authKey:a}=Nc(),{hubKey:i}=c;Hc[e]?n(new Error("doPoll error: Already polling")):(Hc[e]=!0,lc({command:ze.POLL,hubId:e,authKey:a,hubKey:i,localUrl:c.url,data:{ts:Gc[e]}}).then(t=>{t&&((0===Gc[e]||t.full)&&(o=!0),Gc[e]=t.timestamp,t.polls.forEach(t=>{switch(t.type){case"DEVICE_DELTA":!function(e,t,r){let n={};const o=hc();if(o&&o[e]&&(n=o[e]),t){const t={hubId:e,devices:r};Po.dispatch(vt.actions.setDevices(t))}else Object.entries(r).forEach(([t,r])=>{const o={hubId:e,device:r};t&&r?Po.dispatch(vt.actions.setDevice(o)):t&&n[t]&&Po.dispatch(vt.actions.deleteDevice(t))})}(e,o,t.devices);break;case"GROUP_DELTA":case"SCENE_DELTA":case"RULE_DELTA":case"USERS_DELTA":break;case"ROOM_DELTA":!function(e,t,r){let n={};const o=bc();if(o&&o[e]&&(n=o[e]),t){const t={hubId:e,rooms:r};Po.dispatch(Dn.actions.setRooms(t))}else hn(r)||Object.entries(r).forEach(([t,r])=>{const o={hubId:e,room:r};t&&r?Po.dispatch(Dn.actions.setRoom(o)):t&&n[t]&&Po.dispatch(Dn.actions.removeRoom({hubId:e,roomId:t}))})}(e,o,t.rooms);break;case"ZONE_DELTA":case"USER_ALERTS":break;case"ALARM_DELTA":!function(e,t,r){let n={};const o=gc();if(o&&o[e]&&(n=o[e]),t){const t={};hn(r)||Object.entries(r).forEach(([e,r])=>{t[e]=vc(r)});const n={hubId:e,alarms:t};Po.dispatch(we.actions.setAlarms(n))}else hn(r)||Object.entries(r).forEach(([t,r])=>{if(t&&r){const t={hubId:e,alarm:vc(r)};Po.dispatch(we.actions.setAlarm(t))}else t&&n[t]&&Po.dispatch(we.actions.removeAlarm({hubId:e,alarmId:t}))})}(e,o,t.alarms)}})),Hc[e]=!1,r(t)}).catch(t=>{console.error("SDK doPoll error: ",t.message),Hc[e]=!1,n(t)}))})}function Wc(e){xc[e]=!1;const t=jo,r=e=>Bc(e).then(()=>{}).catch(()=>{});try{Vc[e]=setInterval(r,t,e)}catch(e){console.error("Catch startPollingById: ",e)}return Bc(e)}function $c(e){xc[e]=!0,clearInterval(Vc[e])}function Fc(e,t=!1){return new Promise((r,n)=>{const o=Ac();if(!hn(o)){let c=null;return Object.values(o).every(r=>e!==r.id||(Po.dispatch(Ct.actions.selectHub({hubId:r.id})),t?(c=Wc(r.id),!1):(console.debug("SDK selectHubById: Ready to start polling"),!1))),c?c.then(e=>r(e)).catch(()=>r("polling started")):(!c&&t?n(new Error("hub not found")):r("ready to poll"),!0)}return n(new Error("no hubs")),!0})}function zc(){return En.selectors.getUser(Po.getState())}function qc(){return Ct.selectors.getHubs(Po.getState())}No("user.state",e=>{e===mn.AUTHENTICATED&&Cc()});const Yc={},Xc={},Jc={};function Qc(e,t,r){(function(e){return new Promise((t,r)=>{if(Yc[e])return console.debug("askZwaveInclusionStatus: inclusion stopped"),void r(new Error("inclusion stopped"));const n=qc()[e],{authKey:o}=zc(),{hubKey:c}=n;if(console.debug("askZwaveInclusionStatus connection state: ",n.connectionState),n.connectionState!==Ye.LOCAL&&n.connectionState!==Ye.REMOTE)return console.warn("SDK askZwaveInclusionStatus: no Hub connection"),void r(new Error("no hub connection"));Xc[e]?r(new Error("inclusion already in action")):(Xc[e]=!0,lc({command:ze.ZWAVE_INCLUSION_STATUS,hubId:e,authKey:o,hubKey:c,localUrl:n.url,data:[]}).then(r=>{Xc[e]=!1,t(r)}).catch(t=>{console.error("SDK: askZwaveInclusionStatus error: ",t.message),Xc[e]=!1,r(t)}))})})(e).then(n=>{if(n&&n.status)switch(n.status){case To.RUNNING:setTimeout(()=>{Qc(e,t,r)},Uo);break;case To.SUCCESS:t(!0);break;case To.TIMEOUT:case To.CANCEL:t(!1);break;default:r(new Error("Invalid inclusion state"))}else r(new Error("Invalid inclusion state"))}).catch(e=>{console.error("Error in askZwaveInclusionStatusPromise: ",e),r(e)})}const ea={},ta={},ra={};function na(e){return new Promise((t,r)=>{if(ea[e])return console.debug("askZwaveExclusionStatus: exclusion stopped"),void r(new Error("exclusion stopped"));const n=qc()[e],{authKey:o}=zc(),{hubKey:c}=n;if(console.debug("askZwaveExclusionStatus connection state: ",n.connectionState),n.connectionState!==Ye.LOCAL&&n.connectionState!==Ye.REMOTE)return console.warn("SDK askZwaveExclusionStatus: no Hub connection"),void r(new Error("no hub connection"));ta[e]?r(new Error("exclusion already in action")):(ta[e]=!0,lc({command:ze.ZWAVE_EXCLUSION_STATUS,hubId:e,authKey:o,hubKey:c,localUrl:n.url,data:[]}).then(r=>{ta[e]=!1,t(r)}).catch(t=>{console.error("SDK: askZwaveExclusionStatus error: ",t.message),ta[e]=!1,r(t)}))})}const oa={};const ca={};function aa(){return En.selectors.getUser(Po.getState())}function ia(){return Ct.selectors.getHubs(Po.getState())}var sa="[object Symbol]";var ua=function(e){return"symbol"==typeof e||Wr(e)&&dr(e)==sa},la=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,da=/^\w*$/;var fa=function(e,t){if(Jr(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!ua(e))||(da.test(e)||!la.test(e)||null!=t&&e in Object(t))},pa=Rr(Object,"create");var ha=function(){this.__data__=pa?pa(null):{},this.size=0};var ya=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ma="__lodash_hash_undefined__",ba=Object.prototype.hasOwnProperty;var Ea=function(e){var t=this.__data__;if(pa){var r=t[e];return r===ma?void 0:r}return ba.call(t,e)?t[e]:void 0},va=Object.prototype.hasOwnProperty;var ga=function(e){var t=this.__data__;return pa?void 0!==t[e]:va.call(t,e)},Oa="__lodash_hash_undefined__";var Sa=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=pa&&void 0===t?Oa:t,this};function Ia(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ia.prototype.clear=ha,Ia.prototype.delete=ya,Ia.prototype.get=Ea,Ia.prototype.has=ga,Ia.prototype.set=Sa;var Da=Ia;var _a=function(){this.__data__=[],this.size=0};var Aa=function(e,t){return e===t||e!=e&&t!=t};var Pa=function(e,t){for(var r=e.length;r--;)if(Aa(e[r][0],t))return r;return-1},Na=Array.prototype.splice;var wa=function(e){var t=this.__data__,r=Pa(t,e);return!(r<0)&&(r==t.length-1?t.pop():Na.call(t,r,1),--this.size,!0)};var Ta=function(e){var t=this.__data__,r=Pa(t,e);return r<0?void 0:t[r][1]};var Ca=function(e){return Pa(this.__data__,e)>-1};var Ra=function(e,t){var r=this.__data__,n=Pa(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function ja(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ja.prototype.clear=_a,ja.prototype.delete=wa,ja.prototype.get=Ta,ja.prototype.has=Ca,ja.prototype.set=Ra;var Ka=ja;var Ua=function(){this.size=0,this.__data__={hash:new Da,map:new(Kr||Ka),string:new Da}};var La=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Ma=function(e,t){var r=e.__data__;return La(t)?r["string"==typeof t?"string":"hash"]:r.map};var ka=function(e){var t=Ma(this,e).delete(e);return this.size-=t?1:0,t};var Va=function(e){return Ma(this,e).get(e)};var xa=function(e){return Ma(this,e).has(e)};var Ga=function(e,t){var r=Ma(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Ha(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ha.prototype.clear=Ua,Ha.prototype.delete=ka,Ha.prototype.get=Va,Ha.prototype.has=xa,Ha.prototype.set=Ga;var Za=Ha,Ba="Expected a function";function Wa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Ba);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],c=r.cache;if(c.has(o))return c.get(o);var a=e.apply(this,n);return r.cache=c.set(o,a)||c,a};return r.cache=new(Wa.Cache||Za),r}Wa.Cache=Za;var $a=Wa,Fa=500;var za=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qa=/\\(\\)?/g,Ya=function(e){var t=$a(e,(function(e){return r.size===Fa&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(za,(function(e,r,n,o){t.push(n?o.replace(qa,"$1"):r||e)})),t}));var Xa=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o},Ja=1/0,Qa=er?er.prototype:void 0,ei=Qa?Qa.toString:void 0;var ti=function e(t){if("string"==typeof t)return t;if(Jr(t))return Xa(t,e)+"";if(ua(t))return ei?ei.call(t):"";var r=t+"";return"0"==r&&1/t==-Ja?"-0":r};var ri=function(e){return null==e?"":ti(e)};var ni=function(e,t){return Jr(e)?e:fa(e,t)?[e]:Ya(ri(e))},oi=1/0;var ci=function(e){if("string"==typeof e||ua(e))return e;var t=e+"";return"0"==t&&1/e==-oi?"-0":t};var ai=function(e,t){for(var r=0,n=(t=ni(t,e)).length;null!=e&&r<n;)e=e[ci(t[r++])];return r&&r==n?e:void 0},ii=function(){try{var e=Rr(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var si=function(e,t,r){"__proto__"==t&&ii?ii(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},ui=Object.prototype.hasOwnProperty;var li=function(e,t,r){var n=e[t];ui.call(e,t)&&Aa(n,r)&&(void 0!==r||t in e)||si(e,t,r)},di=9007199254740991,fi=/^(?:0|[1-9]\d*)$/;var pi=function(e,t){var r=typeof e;return!!(t=null==t?di:t)&&("number"==r||"symbol"!=r&&fi.test(e))&&e>-1&&e%1==0&&e<t};var hi=function(e,t,r,n){if(!fr(e))return e;for(var o=-1,c=(t=ni(t,e)).length,a=c-1,i=e;null!=i&&++o<c;){var s=ci(t[o]),u=r;if(o!=a){var l=i[s];void 0===(u=n?n(l,s,i):void 0)&&(u=fr(l)?l:pi(t[o+1])?[]:{})}li(i,s,u),i=i[s]}return e};var yi=function(e,t,r){for(var n=-1,o=t.length,c={};++n<o;){var a=t[n],i=ai(e,a);r(i,a)&&hi(c,ni(a,e),i)}return c};var mi=function(e,t){return null!=e&&t in Object(e)};var bi=function(e,t,r){for(var n=-1,o=(t=ni(t,e)).length,c=!1;++n<o;){var a=ci(t[n]);if(!(c=null!=e&&r(e,a)))break;e=e[a]}return c||++n!=o?c:!!(o=null==e?0:e.length)&&en(o)&&pi(a,o)&&(Jr(e)||Xr(e))};var Ei=function(e,t){return null!=e&&bi(e,t,mi)};var vi=function(e,t){return yi(e,t,(function(t,r){return Ei(e,r)}))};var gi=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},Oi=er?er.isConcatSpreadable:void 0;var Si=function(e){return Jr(e)||Xr(e)||!!(Oi&&e&&e[Oi])};var Ii=function e(t,r,n,o,c){var a=-1,i=t.length;for(n||(n=Si),c||(c=[]);++a<i;){var s=t[a];r>0&&n(s)?r>1?e(s,r-1,n,o,c):gi(c,s):o||(c[c.length]=s)}return c};var Di=function(e){return(null==e?0:e.length)?Ii(e,1):[]};var _i=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},Ai=Math.max;var Pi=function(e,t,r){return t=Ai(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,c=Ai(n.length-t,0),a=Array(c);++o<c;)a[o]=n[t+o];o=-1;for(var i=Array(t+1);++o<t;)i[o]=n[o];return i[t]=r(a),_i(e,this,i)}};var Ni=function(e){return function(){return e}};var wi=ii?function(e,t){return ii(e,"toString",{configurable:!0,enumerable:!1,value:Ni(t),writable:!0})}:function(e){return e},Ti=800,Ci=16,Ri=Date.now;var ji=function(e){var t=0,r=0;return function(){var n=Ri(),o=Ci-(n-r);if(r=n,o>0){if(++t>=Ti)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(wi);var Ki=function(e){return ji(Pi(e,void 0,Di),e+"")}((function(e,t){return null==e?{}:vi(e,t)}));function Ui(e,t,r,n,o){return new Promise((t,c)=>{const a=Po.getState(),i=En.selectors.getUser(a);if(!i||!i.authKey)return console.error("SDK sendDeviceCmd error: No userKey!"),void c(new Error("Device command error: No userKey!"));const s=Ct.selectors.getHubs(a)[e];let u;if(s&&s.hubKey&&(u=s.hubKey),!s||!u&&-1===$e().indexOf("https://one.cozify.fi"))return console.error("SDK sendDeviceCmd error: No hubKey!"),void c(new Error("Device command error: No hubKey!"));if(s.connectionState!==Ye.LOCAL&&s.connectionState!==Ye.REMOTE)return console.error("SDK sendDeviceCmd error: No Hub connection"),void c(new Error("Device command error: No hub connection"));const{authKey:l}=i;if(!l)return console.error("SDK sendDeviceCmd error: No authKey!"),void c(new Error("Device command error: No authKey!"));let d=n;hn(o)||(d=Ki(d,o)),r&&lc({command:r,method:void 0,authKey:l,hubId:e,localUrl:s.url,hubKey:u,data:[d]}).then(e=>{console.debug("SDK sendDeviceCmd ok",e),t(e)}).catch(e=>{console.error("SDK sendDeviceCmd error:",e),c(new Error("Device command error!"))})})}const Li=Object.freeze({LOCATION:"LOCATION",TEMPLATE:"TEMPLATE",HUB:"HUB"});Object.freeze({DUMMY:"DUMMY"});e.CLOUD_CONNECTION_STATES=qe,e.HUB_CONNECTION_STATES=Ye,e.HUB_STATES=wo,e.LANGUAGES=yn,e.PLAN_NODES=Li,e.ROLES=bn,e.USER_STATES=mn,e.ZWAVE_EXCLUSION_STATUS=Co,e.ZWAVE_INCLUSION_STATUS=To,e.acceptEula=function(){return Po.dispatch(En.actions.setEula(!0)),dc().state===mn.WAITING_EULA&&Po.dispatch(En.actions.changeState(mn.EULA_ACCEPTED)),!0},e.addRoom=async function(e,t){return new Promise((r,n)=>{Ec(e,ze.CMD_SET_ROOM,[t]).then(e=>{r(e)}).catch(e=>{n(e)})})},e.changeLanguage=function(e){let t=!1;return Object.values(yn).indexOf(e)>-1&&(Po.dispatch(En.actions.setLanguage(e)),t=!0,dc().state===mn.WAITING_LANGUAGE&&Po.dispatch(En.actions.changeState(mn.LANGUAGE_SET))),t},e.checkIsFailedZWaveNode=async function(e,t){return new Promise((r,n)=>{const{authKey:o}=zc(),c=qc()[e],{hubKey:a}=c;lc({command:ze.ZWAVE_CHECK_IS_FAILED_NODE,hubId:e,authKey:o,hubKey:a,localUrl:c.url,data:[{nodeId:t}]}).then(t=>{console.debug("SDK: checkIsFailedZWaveNode: Ok , data: ",t),t&&0===t.status?(ca[e]=!1,t.isFailed?r(!0):r(!1)):(console.error("SDK: checkIsFailedZWaveNode error: ",t?t.status:"unknown"),ca[e]=!1,n(t.status))}).catch(t=>{console.error("SDK: checkIsFailedZWaveNode error: ",t.message),ca[e]=!1,n(t)})})},e.closeAlarm=async function(e,t){const r=t;return new Promise((t,n)=>{Oc(e,ze.CMD_CLOSE_ALARM,{alarmId:r.id}).then(e=>{t(e)}).catch(e=>{n(e)})})},e.connectHubBySite=function(e,t,r=!1,n=!0){return new Promise((t,o)=>{const{authKey:c}=Nc();e||o(new Error("No Hub Id")),c||o(new Error("No AuthKey"));const a={};a[e]=null,wc(a,r,n).then(()=>{Fc(e,!1).then(()=>{t(Ac())}).catch(e=>o(e))}).catch(e=>o(e))})},e.connectHubByTokens=function(e,t,r=!1,n=!0){return new Promise((o,c)=>{const{authKey:a}=Nc();e||c(new Error("No Hub Id")),t||c(new Error("No hubKey")),a||c(new Error("No AuthKey"));wc({},r,n).then(()=>{Fc(e,!1).then(()=>{o(Ac())}).catch(e=>c(e))}).catch(e=>c(e))})},e.cozifyReducer=Oo,e.deleteDevice=wt,e.devicesState=vt,e.doPoll=Bc,e.doPwLogin=function(e,t){return new Promise((r,n)=>{lc({command:ze.USER_LOGIN,data:{email:e,password:t}}).then(e=>{e&&Ho(e)&&(Po.dispatch(En.actions.setAuthKey(e)),dc().state===mn.WAITING_LOGIN&&Po.dispatch(En.actions.changeState(mn.LOGIN_DONE))),r(e)}).catch(e=>{console.debug("doPwLogin error",e),n(new Error("Login failure"))})})},e.doRemoteIdQuery=_c,e.doZwaveExclusion=async function(e){return new Promise((t,r)=>{ea[e]=!1,function(e){return new Promise((t,r)=>{if(ea[e])return console.debug("startZwaveExclusion: exclusion stopped"),void r(new Error("exclusion stopped"));const n=qc()[e],{authKey:o}=zc(),{hubKey:c}=n;if(console.debug("startZwaveExclusion connection state: ",n.connectionState),n.connectionState!==Ye.LOCAL&&n.connectionState!==Ye.REMOTE)return console.warn("SDK startZwaveExclusion: no Hub connection"),void r(new Error("no hub connection"));ta[e]?r(new Error("exclusion already in action")):(ta[e]=!0,lc({command:ze.ZWAVE_START_EXCLUSION,hubId:e,authKey:o,hubKey:c,localUrl:n.url,data:[]}).then(n=>{ta[e]=!1,n.status===Co.RUNNING?t(n):(console.error("SDK: doExclusionById - wrong state: ",n),r(n))}).catch(t=>{console.error("SDK: doExclusionById error: ",t.message),ta[e]=!1,r(t)}))})}(e).then(n=>{n&&n.status===Co.RUNNING?new Promise((t,r)=>{!function e(t,r,n){na(t).then(o=>{if(o&&o.status)switch(o.status){case Co.RUNNING:setTimeout(()=>{e(t,r,n)},Lo);break;case Co.SUCCESS:r(!0);break;case Co.TIMEOUT:case Co.CANCEL:r(!1);break;default:n(new Error("Wrong exclusion status"))}else n(new Error("Wrong exclusion status"))}).catch(e=>{console.error("Error in askZwaveExclusionStatusPromise: ",e),n(e)})}(e,t,r)}).then(e=>{t(e)}).catch(e=>{r(e)}):r(new Error("Wrong exclusion status"))}).catch(e=>{console.error("Error in doZwaveExclusion: ",e),r(e)})})},e.doZwaveInclusion=async function(e){return new Promise((t,r)=>{Yc[e]=!1,function(e){return new Promise((t,r)=>{if(Yc[e])return console.debug("startZwaveInclusion: inclusion stopped"),void r(new Error("inclusion stopped"));const n=qc()[e],{authKey:o}=zc(),{hubKey:c}=n;if(console.debug("startZwaveInclusion connection state: ",n.connectionState),n.connectionState!==Ye.LOCAL&&n.connectionState!==Ye.REMOTE)return console.warn("SDK startZwaveInclusion: no Hub connection"),void r(new Error("no hub connection"));Xc[e]?r(new Error("inclusion already in action")):(Xc[e]=!0,lc({command:ze.ZWAVE_START_INCLUSION,hubId:e,authKey:o,hubKey:c,localUrl:n.url,data:[]}).then(n=>{Xc[e]=!1,n?n.status===To.RUNNING?t(n):r(n):r(new Error("No inclusion state received"))}).catch(t=>{console.error("SDK: startZwaveInclusion error: ",t.message),Xc[e]=!1,r(t)}))})}(e).then(n=>{n&&n.status===To.RUNNING?new Promise((t,r)=>{Qc(e,t,r)}).then(e=>{t(e)}).catch(e=>{r(e)}):r(new Error("Wrong inclusion status"))}).catch(e=>{console.error("Error in doZwavePairing: ",e),r(e)})})},e.editRoom=async function(e,t){return new Promise((r,n)=>{Ec(e,ze.CMD_SET_ROOM,[t]).then(e=>{r(e)}).catch(e=>{n(e)})})},e.fetchHubs=Tc,e.getAlarms=gc,e.getCloudConnectionState=function(){const e=Po.getState();return Xe.selectors.getConnections(e).cloudState},e.getDevices=hc,e.getHubAlarms=function(e){let t;const r=gc();return r&&r[e]&&(t=r[e]),t},e.getHubConnectionState=function(e){const t=Po.getState();return Ct.selectors.getHubs(t)[e]?Ct.selectors.getHubs(t)[e].connectionState:Ye.UNCONNECTED},e.getHubDevices=function(e){let t;const r=hc();return r&&r[e]&&(t=r[e]),t},e.getHubPairingDevices=function(e){let t;const r=yc();return r&&r[e]&&(t=r[e]),t},e.getHubRooms=function(e){let t;const r=bc();return r&&r[e]&&(t=r[e]),t},e.getHubs=Ac,e.getModbusDevicePairings=async function(e){return new Promise((t,r)=>{const n=ia()[e],{authKey:o}=aa(),{hubKey:c}=n;if(console.debug("getModbusDevices connection state: ",n.connectionState),n.connectionState!==Ye.LOCAL&&n.connectionState!==Ye.REMOTE)return console.warn("SDK getModbusDevices: no Hub connection"),void r(new Error("no hub connection"));lc({command:ze.GET_MODBUS_DEVICE_PAIRINGS,hubId:e,authKey:o,hubKey:c,localUrl:n.url,data:[]}).then(e=>(console.info("SDK: getModbusDevicePairings success: ",e),t(e))).catch(e=>{console.error("SDK: getModbusDevicePairings error: ",e.message),r(e)})})},e.getPairingDevices=yc,e.getRooms=bc,e.getUserState=function(){return dc().state},e.getZWaveNodeParameter=async function(e,t,r){return new Promise((n,o)=>{const{authKey:c}=zc(),a=qc()[e],{hubKey:i}=a;lc({command:ze.ZWAVE_GET_NODE_CONFIGURATION,hubId:e,authKey:c,hubKey:i,localUrl:a.url,data:[{nodeId:t,parameter:r}]}).then(e=>{e&&0===e.status?(console.debug("SDK: getZWaveNodeParameter: Ok , data: ",e),n(e)):(console.error("SDK: getZWaveNodeParameter error: ",e?e.status:"unknown"),o(new Error("Getting ZWave node parem failed")))}).catch(e=>{console.error("SDK: getZWaveNodeParameter error: ",e.message),o(e)})})},e.getZwaveNodes=async function(e){return new Promise((t,r)=>{if(ca[e])return void r(new Error("nodesInAction already in action"));ca[e]=!0;const{authKey:n}=zc(),o=qc()[e],{hubKey:c}=o;lc({command:ze.ZWAVE_GET_NODES,hubId:e,authKey:n,hubKey:c,localUrl:o.url,data:[]}).then(r=>{console.debug("SDK: getZwaveNodes: Ok , data: ",r),ca[e]=!1,t(r)}).catch(t=>{console.error("SDK: getZwaveNodes error: ",t.message),ca[e]=!1,r(t)})})},e.healZwave=async function(e){return new Promise((t,r)=>{if(oa[e])return void r(new Error("healingInAction already in action"));oa[e]=!0;const{authKey:n}=zc(),o=qc()[e],{hubKey:c}=o;lc({command:ze.ZWAVE_HEAL,hubId:e,authKey:n,hubKey:c,localUrl:o.url,data:[]}).then(r=>{console.debug("SDK: healZwave: Ok , status: ",r),oa[e]=!1,t("ok")}).catch(t=>{console.error("SDK: healZwave error: ",t.message),oa[e]=!1,r(t)})})},e.hubsState=Ct,e.identifyDevice=function(e,t){return Ui(e,0,ze.CMD_DEVICE_IDENTIFY,{id:t})},e.ignorePairingByIds=function(e,t,r){const{authKey:n}=Nc(),o=Ac()[e],{hubKey:c}=o;return lc({command:ze.PAIR_IGNORE,hubId:e,authKey:n,hubKey:c,localUrl:o.url,data:{id:t,ignored:r}})},e.isZwaveEnabled=async function(e){return new Promise((t,r)=>{na(e).then(e=>{e&&e.status!==Co.NO_ZWAVE?t(!0):t(!1)}).catch(e=>{console.error("Error in isZwaveEnabled: ",e),r(e)})})},e.lockAndBackup=function(e,t,r){return new Promise((n,o)=>{lc({command:ze.HUB_LOCK_BACKUP,authKey:t,hubKey:r,hubId:e}).then(e=>{n(e)}).catch(t=>{console.log(`lockAndBackup ${e} error `,t.message),o(t)})})},e.reactFetchPlanDocumentNodes=io,e.reactFetchPlanDocuments=Fn,e.reactFetchPlans=Kn,e.reactInsertPlan=Ln,e.reactInsertPlanDocument=qn,e.reactInsertPlanDocumentNode=uo,e.reactRemovePlan=kn,e.reactRemovePlanDocument=Xn,e.reactRemovePlanDocumentNode=fo,e.reactSelectAllDocumentNodes=bo,e.reactSelectAllDocuments=ro,e.reactSelectAllPlans=Bn,e.reactSelectPlanDocumentNodes=vo,e.reactSelectPlanDocuments=oo,e.reactSubscribePlanDocumentNodes=so,e.reactSubscribePlanDocuments=zn,e.reactSubscribePlans=Un,e.reactUpdatePlan=Mn,e.reactUpdatePlanDocument=Yn,e.reactUpdatePlanDocumentNode=lo,e.removeAlarm=async function(e,t){const r=t;return new Promise((t,n)=>{Oc(e,ze.CMD_REMOVE_ALARM,{alarmId:r.id}).then(e=>{t(e)}).catch(e=>{n(e)})})},e.removeFailedZWaveNode=async function(e,t){return new Promise((r,n)=>{const{authKey:o}=zc(),c=qc()[e],{hubKey:a}=c;lc({command:ze.ZWAVE_REMOVE_FAILED_NODE,hubId:e,authKey:o,hubKey:a,localUrl:c.url,data:[{nodeId:t}]}).then(t=>{console.debug("SDK: removeFailedZWaveNode: Ok , data: ",t),t&&1===t.status?(ca[e]=!1,r(!0)):(console.error("SDK: removeFailedZWaveNode error: ",t?t.status:"unknown"),ca[e]=!1,n(t.status))}).catch(t=>{console.error("SDK: removeFailedZWaveNode error: ",t.message),ca[e]=!1,n(t)})})},e.removeRoom=async function(e,t){return new Promise((r,n)=>{Ec(e,ze.CMD_REMOVE_ROOM,{roomId:t.id}).then(e=>{r(e)}).catch(t=>{if(t.response&&t.response.status&&404===t.response.status){const t=bc();r(t[e])}n(t)})})},e.selectCloud=function(e){We=e},e.selectHubById=Fc,e.sendDeviceCmd=Ui,e.sendDeviceStateCmd=function(e,t,r,n){return new Promise((o,c)=>{const a=Po.getState(),i=En.selectors.getUser(a);if(!i||!i.authKey)return console.error("SDK sendDeviceStateCmd error: No userKey!"),void c(new Error("Device command error: No userKey!"));const s=Ct.selectors.getHubs(a);if(!s[e]||!s[e].hubKey&&-1===$e().indexOf("https://one.cozify.fi"))return console.error("SDK sendDeviceStateCmd error: No hubKey!"),void c(new Error("Device command error: No hubKey!"));const{authKey:u}=i,{hubKey:l}=s[e];let d=r;hn(n)||(d=Ki(d,n)),lc({command:ze.CMD_DEVICE_STATE,authKey:u,hubId:e,hubKey:l,data:[{id:t,state:d}]}).then(e=>{console.debug("SDK sendDeviceCmd ok",e),o(e)}).catch(e=>{console.error(e),console.error("SDK sendDeviceStateCmd error:",e),c(new Error("Device state command error!"))})})},e.setAuthenticated=function(e){return Po.dispatch(En.actions.setAuthenticated(e)),dc()},e.setDeviceHotWater=function(e,t,r){return Ui(e,0,ze.CMD_DEVICE_HOT_WATER,{id:t,hotWater:r})},e.setDeviceLocked=function(e,t,r){return Ui(e,0,ze.CMD_DEVICE_LOCK,{id:t,locked:r})},e.setDeviceMeta=function(e,t,r,n){return Ui(e,0,ze.CMD_DEVICE_META,{id:t,name:r,room:n})},e.setDeviceVisibility=function(e,t,r){return Ui(e,0,ze.CMD_DEVICE_VISIBILITY,{id:t,visible:r})},e.setDevices=Nt,e.setModbusDevicePairings=async function(e,t){return new Promise((r,n)=>{const o=ia()[e],{authKey:c}=aa(),{hubKey:a}=o;if(console.debug("setModbusDevices connection state: ",o.connectionState),o.connectionState!==Ye.LOCAL&&o.connectionState!==Ye.REMOTE)return console.warn("SDK setModbusDevices: no Hub connection"),void n(new Error("no hub connection"));let i=!1;const s=[];t.map(e=>{e.address||(i=!0,n(new Error("Invalid address"))),e.deviceType||(i=!0,n(new Error("Invalid device type")));const t={address:Number(e.address),deviceType:e.deviceType,name:e.name||"",readDeviceIdSupported:e.readDeviceIdSupported,registerRequired:e.registerRequired,register:void 0,registerType:void 0,normallyOff:!1,type:"PAIR_MODBUS"};return"RELAY"!==e.deviceType&&"SIGNAL"!==e.deviceType||(t.normallyOff=!!e.normallyOff),null!=e.name&&e.name.length>0&&null!=e.address&&e.address<=247&&e.address>0?e.registerRequired?null!=e.register&&e.register>=0&&e.register<=65535&&e.registerType?(t.registerRequired=!0,t.register=Number(e.register),t.registerType=Number(e.registerType)):(i=!0,n(new Error("Invalid register data"))):t.registerRequired=!1:(i=!0,n(new Error("Invalid name or address data"))),s.push(t),!0}),!i&&s.length>0?lc({command:ze.SET_MODBUS_DEVICE_PAIRINGS,hubId:e,authKey:c,hubKey:a,localUrl:o.url,data:s}).then(e=>(console.info("SDK: setModbusDevicePairings success: ",e),e&&!0===e?r(e):n(new Error(e?e.message:"unknown error")))).catch(e=>{console.error("SDK: setModbusDevicePairings error: ",e.message),n(e)}):n(new Error("Invalid data"))})},e.setZWaveNodeParameter=async function(e,t,r,n,o,c){return new Promise((a,i)=>{const{authKey:s}=zc(),u=qc()[e],{hubKey:l}=u;let d=c;o&&(d=null),lc({command:ze.ZWAVE_SET_NODE_CONFIGURATION,hubId:e,authKey:s,hubKey:l,localUrl:u.url,data:[{nodeId:t,parameter:r,size:n,default:o,value:d}]}).then(e=>{e&&0===e.status?(console.debug("SDK: setZWaveNodeParameter: Ok , data: ",e),a(e)):(console.error("SDK: setZWaveNodeParameter error: ",e?e.status:"unknown"),i(new Error("Setting ZWave node parem failed"))),a(e)}).catch(e=>{console.error("SDK: setZWaveNodeParameter error: ",e.message),i(e)})})},e.startDiscoveringHubs=Cc,e.startPairingById=function(e,t){const r=Ko;jc[e]=!1;const n=(e,t)=>Lc(e,t).then(()=>{}).catch(()=>{});try{Rc[e]=setInterval(n,r,e,t)}catch(e){console.error("Catch startPairingById: ",e)}return Lc(e,t)},e.startPollingById=Wc,e.stopDiscoveringHubs=function(){clearInterval(Sc)},e.stopPairingById=kc,e.stopPairings=function(){const e=Ac();Object.values(e).forEach(e=>{kc(e.id).then(()=>console.debug("SDK: pairingStopped: ",e.id)).catch(()=>console.log("SDK: pairingStopped error: ",e.id))})},e.stopPollingById=$c,e.stopZwaveExclusion=async function(e){return new Promise((t,r)=>{if(ra[e])return void r(new Error("stopExclusionById already stopping"));ra[e]=!0;const{authKey:n}=zc(),o=qc()[e],{hubKey:c}=o;lc({command:ze.ZWAVE_STOP_EXCLUSION,hubId:e,authKey:n,hubKey:c,localUrl:o.url,data:[]}).then(r=>{console.debug("SDK: stopZwaveExclusion: Ok , status: ",r),ea[e]=!0,ra[e]=!1,t("ok")}).catch(t=>{console.error("SDK: stopZwaveExclusion error: ",t.message),ra[e]=!1,r(t)})})},e.stopZwaveInclusion=async function(e){return new Promise((t,r)=>{if(Jc[e])return void r(new Error("stopInclusionById already stopping"));Jc[e]=!0;const{authKey:n}=zc(),o=qc()[e],{hubKey:c}=o;lc({command:ze.ZWAVE_STOP_INCLUSION,hubId:e,authKey:n,hubKey:c,localUrl:o.url,data:[]}).then(r=>{console.debug("SDK: stopZwavePairing: Ok , status: ",r),Yc[e]=!0,Jc[e]=!1,t("ok")}).catch(t=>{console.error("SDK: stopZwavePairing error: ",t.message),Jc[e]=!1,r(t)})})},e.store=Po,e.unSelectHubById=function(e){const t=Ac();Object.values(t).forEach(t=>{e===t.id&&(Po.dispatch(Ct.actions.unSelectHub({hubId:t.id})),$c(t.id))})},e.unSelectHubs=function(){const e=Ac();Object.values(e).forEach(e=>{Po.dispatch(Ct.actions.unSelectHub({hubId:e.id})),$c(e.id)})},e.unpairDevice=function(e,t){return Ui(e,0,ze.CMD_DEVICE_IGNORE,{id:t})},e.updateHubs=xt,e.urlBase64Decode=Ge,e.useTestcloud=function(){We=Ze},e.watchChanges=No,Object.defineProperty(e,"__esModule",{value:!0})}));
