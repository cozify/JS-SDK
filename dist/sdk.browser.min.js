!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("axios")):"function"==typeof define&&define.amd?define(["exports","axios"],t):t((e=e||self).CozifySDK={},e.axios)}(this,(function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var r=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e};function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var i="function"==typeof Symbol&&Symbol.observable||"@@observable",s=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+s(),REPLACE:"@@redux/REPLACE"+s(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+s()}};function l(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(a(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(a(1));return r(l)(e,t)}if("function"!=typeof e)throw new Error(a(2));var o=e,c=t,s=[],d=s,f=!1;function p(){d===s&&(d=s.slice())}function h(){if(f)throw new Error(a(3));return c}function y(e){if("function"!=typeof e)throw new Error(a(4));if(f)throw new Error(a(5));var t=!0;return p(),d.push(e),function(){if(t){if(f)throw new Error(a(6));t=!1,p();var r=d.indexOf(e);d.splice(r,1),s=null}}}function b(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(a(7));if(void 0===e.type)throw new Error(a(8));if(f)throw new Error(a(9));try{f=!0,c=o(c,e)}finally{f=!1}for(var t=s=d,r=0;r<t.length;r++){(0,t[r])()}return e}return b({type:u.INIT}),(n={dispatch:b,subscribe:y,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw new Error(a(10));o=e,b({type:u.REPLACE})}})[i]=function(){var e,t=y;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(a(11));function r(){e.next&&e.next(h())}return r(),{unsubscribe:t(r)}}})[i]=function(){return this},e},n}function d(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];"function"==typeof e[o]&&(r[o]=e[o])}var c,i=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:u.INIT}))throw new Error(a(12));if(void 0===r(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw new Error(a(13))}))}(r)}catch(e){c=e}return function(e,t){if(void 0===e&&(e={}),c)throw c;for(var n=!1,o={},s=0;s<i.length;s++){var u=i[s],l=r[u],d=e[u],f=l(d,t);if(void 0===f){t&&t.type;throw new Error(a(14))}o[u]=f,n=n||f!==d}return(n=n||i.length!==Object.keys(e).length)?o:e}}function f(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function p(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(a(15))},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return n=f.apply(void 0,i)(r.dispatch),c(c({},r),{},{dispatch:n})}}}function h(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function y(e){return!!e&&!!e[re]}function b(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===ne}(e)||Array.isArray(e)||!!e[te]||!!e.constructor[te]||S(e)||I(e))}function m(e,t,r){void 0===r&&(r=!1),0===E(e)?(r?Object.keys:oe)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function E(e){var t=e[re];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:S(e)?2:I(e)?3:0}function v(e,t){return 2===E(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function g(e,t,r){var n=E(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function O(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function S(e){return X&&e instanceof Map}function I(e){return J&&e instanceof Set}function _(e){return e.o||e.t}function D(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ce(e);delete t[re];for(var r=oe(t),n=0;n<r.length;n++){var o=r[n],c=t[o];!1===c.writable&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(t[o]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function P(e,t){return void 0===t&&(t=!1),N(e)||y(e)||!b(e)?e:(E(e)>1&&(e.set=e.add=e.clear=e.delete=A),Object.freeze(e),t&&m(e,(function(e,t){return P(t,!0)}),!0),e)}function A(){h(2)}function N(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function w(e){var t=ae[e];return t||h(18,e),t}function T(){return q}function C(e,t){t&&(w("Patches"),e.u=[],e.s=[],e.v=t)}function R(e){j(e),e.p.forEach(U),e.p=null}function j(e){e===q&&(q=e.l)}function K(e){return q={p:[],l:q,h:e,m:!0,_:0}}function U(e){var t=e[re];0===t.i||1===t.i?t.j():t.O=!0}function L(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.g||w("ES5").S(t,e,n),n?(r[re].P&&(R(t),h(4)),b(e)&&(e=M(t,e),t.l||k(t,e)),t.u&&w("Patches").M(r[re],e,t.u,t.s)):e=M(t,r,[]),R(t),t.u&&t.v(t.u,t.s),e!==ee?e:void 0}function M(e,t,r){if(N(t))return t;var n=t[re];if(!n)return m(t,(function(o,c){return V(e,n,t,o,c,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return k(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=D(n.k):n.o;m(3===n.i?new Set(o):o,(function(t,c){return V(e,n,o,t,c,r)})),k(e,o,!1),r&&e.u&&w("Patches").R(n,r,e.u,e.s)}return n.o}function V(e,t,r,n,o,c){if(y(o)){var a=M(e,o,c&&t&&3!==t.i&&!v(t.D,n)?c.concat(n):void 0);if(g(r,n,a),!y(a))return;e.m=!1}if(b(o)&&!N(o)){if(!e.h.F&&e._<1)return;M(e,o),t&&t.A.l||k(e,o)}}function k(e,t,r){void 0===r&&(r=!1),e.h.F&&e.m&&P(t,r)}function x(e,t){var r=e[re];return(r?_(r):e)[t]}function G(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function H(e){e.P||(e.P=!0,e.l&&H(e.l))}function Z(e){e.o||(e.o=D(e.t))}function B(e,t,r){var n=S(t)?w("MapSet").N(t,r):I(t)?w("MapSet").T(t,r):e.g?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:T(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=n,c=ie;r&&(o=[n],c=se);var a=Proxy.revocable(o,c),i=a.revoke,s=a.proxy;return n.k=s,n.j=i,s}(t,r):w("ES5").J(t,r);return(r?r.A:T()).p.push(n),n}function W(e){return y(e)||h(22,e),function e(t){if(!b(t))return t;var r,n=t[re],o=E(t);if(n){if(!n.P&&(n.i<4||!w("ES5").K(n)))return n.t;n.I=!0,r=F(t,o),n.I=!1}else r=F(t,o);return m(r,(function(t,o){n&&function(e,t){return 2===E(e)?e.get(t):e[t]}(n.t,t)===o||g(r,t,e(o))})),3===o?new Set(r):r}(e)}function F(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return D(e)}function $(){function e(e,t){var r=o[e];return r?r.enumerable=t:o[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[re];return ie.get(t,e)},set:function(t){var r=this[re];ie.set(r,e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var o=e[t][re];if(!o.P)switch(o.i){case 5:n(o)&&H(o);break;case 4:r(o)&&H(o)}}}function r(e){for(var t=e.t,r=e.k,n=oe(r),o=n.length-1;o>=0;o--){var c=n[o];if(c!==re){var a=t[c];if(void 0===a&&!v(t,c))return!0;var i=r[c],s=i&&i[re];if(s?s.t!==a:!O(i,a))return!0}}var u=!!t[re];return n.length!==oe(t).length+(u?0:1)}function n(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}var o={};!function(e,t){ae[e]||(ae[e]=t)}("ES5",{J:function(t,r){var n=Array.isArray(t),o=function(t,r){if(t){for(var n=Array(r.length),o=0;o<r.length;o++)Object.defineProperty(n,""+o,e(o,!0));return n}var c=ce(r);delete c[re];for(var a=oe(c),i=0;i<a.length;i++){var s=a[i];c[s]=e(s,t||!!c[s].enumerable)}return Object.create(Object.getPrototypeOf(r),c)}(n,t),c={i:n?5:4,A:r?r.A:T(),P:!1,I:!1,D:{},l:r,t:t,k:o,o:null,O:!1,C:!1};return Object.defineProperty(o,re,{value:c,writable:!0}),o},S:function(e,r,o){o?y(r)&&r[re].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[re];if(r){var o=r.t,c=r.k,a=r.D,i=r.i;if(4===i)m(c,(function(t){t!==re&&(void 0!==o[t]||v(o,t)?a[t]||e(c[t]):(a[t]=!0,H(r)))})),m(o,(function(e){void 0!==c[e]||v(c,e)||(a[e]=!1,H(r))}));else if(5===i){if(n(r)&&(H(r),a.length=!0),c.length<o.length)for(var s=c.length;s<o.length;s++)a[s]=!1;else for(var u=o.length;u<c.length;u++)a[u]=!0;for(var l=Math.min(c.length,o.length),d=0;d<l;d++)void 0===a[d]&&e(c[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?r(e):n(e)}})}var z,q,Y="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),X="undefined"!=typeof Map,J="undefined"!=typeof Set,Q="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,ee=Y?Symbol.for("immer-nothing"):((z={})["immer-nothing"]=!0,z),te=Y?Symbol.for("immer-draftable"):"__$immer_draftable",re=Y?Symbol.for("immer-state"):"__$immer_state",ne=""+Object.prototype.constructor,oe="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ce=Object.getOwnPropertyDescriptors||function(e){var t={};return oe(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},ae={},ie={get:function(e,t){if(t===re)return e;var r=_(e);if(!v(r,t))return function(e,t,r){var n,o=G(t,r);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!b(n)?n:n===x(e.t,t)?(Z(e),e.o[t]=B(e.A.h,n,e)):n},has:function(e,t){return t in _(e)},ownKeys:function(e){return Reflect.ownKeys(_(e))},set:function(e,t,r){var n=G(_(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var o=x(_(e),t),c=null==o?void 0:o[re];if(c&&c.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(O(r,o)&&(void 0!==r||v(e.t,t)))return!0;Z(e),H(e)}return e.o[t]===r&&"number"!=typeof r||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==x(e.t,t)||t in e.t?(e.D[t]=!1,Z(e),H(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=_(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){h(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){h(12)}},se={};m(ie,(function(e,t){se[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),se.deleteProperty=function(e,t){return ie.deleteProperty.call(this,e[0],t)},se.set=function(e,t,r){return ie.set.call(this,e[0],t,r,e[0])};var ue=new(function(){function e(e){var t=this;this.g=Q,this.F=!0,this.produce=function(e,r,n){if("function"==typeof e&&"function"!=typeof r){var o=r;r=e;var c=t;return function(e){var t=this;void 0===e&&(e=o);for(var n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return c.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(a))}))}}var a;if("function"!=typeof r&&h(6),void 0!==n&&"function"!=typeof n&&h(7),b(e)){var i=K(t),s=B(t,e,void 0),u=!0;try{a=r(s),u=!1}finally{u?R(i):j(i)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return C(i,n),L(e,i)}),(function(e){throw R(i),e})):(C(i,n),L(a,i))}if(!e||"object"!=typeof e){if((a=r(e))===ee)return;return void 0===a&&(a=e),t.F&&P(a,!0),a}h(21,e)},this.produceWithPatches=function(e,r){return"function"==typeof e?function(r){for(var n=arguments.length,o=Array(n>1?n-1:0),c=1;c<n;c++)o[c-1]=arguments[c];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(o))}))}:[t.produce(e,r,(function(e,t){n=e,o=t})),n,o];var n,o},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){b(e)||h(8),y(e)&&(e=W(e));var t=K(this),r=B(this,e,void 0);return r[re].C=!0,j(t),r},t.finishDraft=function(e,t){var r=(e&&e[re]).A;return C(r,t),L(void 0,r)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!Q&&h(20),this.g=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}var o=w("Patches").$;return y(e)?o(e,t):this.produce(e,(function(e){return o(e,t.slice(r+1))}))},e}()),le=ue.produce;ue.produceWithPatches.bind(ue),ue.setAutoFreeze.bind(ue),ue.setUseProxies.bind(ue),ue.applyPatches.bind(ue),ue.createDraft.bind(ue),ue.finishDraft.bind(ue);function de(e,t){return e===t}function fe(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}function pe(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}var he=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var c=0,a=n.pop(),i=pe(n),s=e.apply(void 0,[function(){return c++,a.apply(null,arguments)}].concat(r)),u=e((function(){for(var e=[],t=i.length,r=0;r<t;r++)e.push(i[r].apply(null,arguments));return s.apply(null,e)}));return u.resultFunc=a,u.dependencies=i,u.recomputations=function(){return c},u.resetRecomputations=function(){return c=0},u}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:de,r=null,n=null;return function(){return fe(t,r,arguments)||(n=e.apply(null,arguments)),r=arguments,n}}));function ye(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(o){return"function"==typeof o?o(r,n,e):t(o)}}}}var be=ye();be.withExtraArgument=ye;var me,Ee=(me=function(e,t){return(me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}me(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ve=function(e,t){var r,n,o,c,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(c){return function(i){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}},ge=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},Oe=Object.defineProperty,Se=Object.prototype.hasOwnProperty,Ie=Object.getOwnPropertySymbols,_e=Object.prototype.propertyIsEnumerable,De=function(e,t,r){return t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},Pe=function(e,t){for(var r in t||(t={}))Se.call(t,r)&&De(e,r,t[r]);if(Ie)for(var n=0,o=Ie(t);n<o.length;n++){r=o[n];_e.call(t,r)&&De(e,r,t[r])}return e},Ae=function(e,t,r){return new Promise((function(n,o){var c=function(e){try{i(r.next(e))}catch(e){o(e)}},a=function(e){try{i(r.throw(e))}catch(e){o(e)}},i=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(c,a)};i((r=r.apply(e,t)).next())}))},Ne=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=he.apply(void 0,e),n=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.apply(void 0,ge([y(e)?W(e):e],t))};return n},we="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?f:f.apply(null,arguments)};function Te(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}var Ce=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=e.apply(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return Ee(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,ge([void 0],e[0].concat(this)))):new(t.bind.apply(t,ge([void 0],e.concat(this))))},t}(Array);function Re(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,r=void 0===t||t,n=(e.immutableCheck,e.serializableCheck,new Ce);r&&(!function(e){return"boolean"==typeof e}(r)?n.push(be.withExtraArgument(r.extraArgument)):n.push(be));return n}(e)}}var je=!0;function Ke(e,t){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(t){var o=t.apply(void 0,r);if(!o)throw new Error("prepareAction did not return an object");return Pe(Pe({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:r[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}function Ue(e){return["type","payload","error","meta"].indexOf(e)>-1}function Le(e){var t,r={},n=[],o={addCase:function(e,t){var n="string"==typeof e?e:e.type;if(n in r)throw new Error("addCase cannot be called with two reducers for the same action type");return r[n]=t,o},addMatcher:function(e,t){return n.push({matcher:e,reducer:t}),o},addDefaultCase:function(e){return t=e,o}};return e(o),[r,n,t]}function Me(e){var t=e.name,r=e.initialState;if(!t)throw new Error("`name` is a required option for createSlice");var n=e.reducers||{},o="function"==typeof e.extraReducers?Le(e.extraReducers):[e.extraReducers],c=o[0],a=void 0===c?{}:c,i=o[1],s=void 0===i?[]:i,u=o[2],l=void 0===u?void 0:u,d=Object.keys(n),f={},p={},h={};d.forEach((function(e){var r,o,c=n[e],a=t+"/"+e;"reducer"in c?(r=c.reducer,o=c.prepare):r=c,f[e]=r,p[a]=r,h[e]=o?Ke(a,o):Ke(a)}));var m=function(e,t,r,n){void 0===r&&(r=[]),$();var o="function"==typeof t?Le(t):[t,r,n],c=o[0],a=o[1],i=o[2],s=le(e,(function(){}));return function(e,t){void 0===e&&(e=s);var r=ge([c[t.type]],a.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===r.filter((function(e){return!!e})).length&&(r=[i]),r.reduce((function(e,r){if(r){var n;if(y(e))return void 0===(n=r(e,t))?e:n;if(b(e))return le(e,(function(e){return r(e,t)}));if(void 0===(n=r(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}return e}),e)}}(r,Pe(Pe({},a),p),s,l);return{name:t,reducer:m,actions:h,caseReducers:f}}function Ve(e){return function(t,r){function n(e){return Te(t=e)&&"string"==typeof t.type&&Object.keys(t).every(Ue);var t}var o=function(t){n(r)?e(r.payload,t):e(r,t)};return y(t)?(o(t),t):le(t,o)}}function ke(e,t){return t(e)}function xe(e){return Array.isArray(e)||(e=Object.values(e)),e}function Ge(e,t,r){for(var n=[],o=[],c=0,a=e=xe(e);c<a.length;c++){var i=a[c],s=ke(i,t);s in r.entities?o.push({id:s,changes:i}):n.push(i)}return[n,o]}function He(e){function t(t,r){var n=ke(t,e);n in r.entities||(r.ids.push(n),r.entities[n]=t)}function r(e,r){for(var n=0,o=e=xe(e);n<o.length;n++){t(o[n],r)}}function n(t,r){var n=ke(t,e);n in r.entities||r.ids.push(n),r.entities[n]=t}function o(e,t){var r=!1;e.forEach((function(e){e in t.entities&&(delete t.entities[e],r=!0)})),r&&(t.ids=t.ids.filter((function(e){return e in t.entities})))}function c(t,r){var n={},o={};(t.forEach((function(e){e.id in r.entities&&(o[e.id]={id:e.id,changes:Pe(Pe({},o[e.id]?o[e.id].changes:null),e.changes)})})),(t=Object.values(o)).length>0)&&(t.filter((function(t){return function(t,r,n){var o=n.entities[r.id],c=Object.assign({},o,r.changes),a=ke(c,e),i=a!==r.id;return i&&(t[r.id]=a,delete n.entities[r.id]),n.entities[a]=c,i}(n,t,r)})).length>0&&(r.ids=r.ids.map((function(e){return n[e]||e}))))}function a(t,n){var o=Ge(t,e,n),a=o[0];c(o[1],n),r(a,n)}return{removeAll:(i=function(e){Object.assign(e,{ids:[],entities:{}})},s=Ve((function(e,t){return i(t)})),function(e){return s(e,void 0)}),addOne:Ve(t),addMany:Ve(r),setOne:Ve(n),setMany:Ve((function(e,t){for(var r=0,o=e=xe(e);r<o.length;r++){n(o[r],t)}})),setAll:Ve((function(e,t){e=xe(e),t.ids=[],t.entities={},r(e,t)})),updateOne:Ve((function(e,t){return c([e],t)})),updateMany:Ve(c),upsertOne:Ve((function(e,t){return a([e],t)})),upsertMany:Ve(a),removeOne:Ve((function(e,t){return o([e],t)})),removeMany:Ve(o)};var i,s}function Ze(e,t){var r=He(e);function n(t,r){var n=(t=xe(t)).filter((function(t){return!(ke(t,e)in r.entities)}));0!==n.length&&i(n,r)}function o(e,t){0!==(e=xe(e)).length&&i(e,t)}function c(t,r){var n=[];t.forEach((function(t){return function(t,r,n){if(!(r.id in n.entities))return!1;var o=n.entities[r.id],c=Object.assign({},o,r.changes),a=ke(c,e);return delete n.entities[r.id],t.push(c),a!==r.id}(n,t,r)})),0!==n.length&&i(n,r)}function a(t,r){var o=Ge(t,e,r),a=o[0];c(o[1],r),n(a,r)}function i(r,n){r.forEach((function(t){n.entities[e(t)]=t}));var o=Object.values(n.entities);o.sort(t);var c=o.map(e);(function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(e[r]!==t[r])return!1;return!0})(n.ids,c)||(n.ids=c)}return{removeOne:r.removeOne,removeMany:r.removeMany,removeAll:r.removeAll,addOne:Ve((function(e,t){return n([e],t)})),updateOne:Ve((function(e,t){return c([e],t)})),upsertOne:Ve((function(e,t){return a([e],t)})),setOne:Ve((function(e,t){return o([e],t)})),setMany:Ve(o),setAll:Ve((function(e,t){e=xe(e),t.entities={},t.ids=[],n(e,t)})),addMany:Ve(n),updateMany:Ve(c),upsertMany:Ve(a)}}function Be(e){void 0===e&&(e={});var t=Pe({sortComparer:!1,selectId:function(e){return e.id}},e),r=t.selectId,n=t.sortComparer,o={getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}},c={getSelectors:function(e){var t=function(e){return e.ids},r=function(e){return e.entities},n=Ne(t,r,(function(e,t){return e.map((function(e){return t[e]}))})),o=function(e,t){return t},c=function(e,t){return e[t]},a=Ne(t,(function(e){return e.length}));if(!e)return{selectIds:t,selectEntities:r,selectAll:n,selectTotal:a,selectById:Ne(r,o,c)};var i=Ne(e,r);return{selectIds:Ne(e,t),selectEntities:i,selectAll:Ne(e,n),selectTotal:Ne(e,a),selectById:Ne(i,o,c)}}},a=n?Ze(r,n):He(r);return Pe(Pe(Pe({selectId:r,sortComparer:n},o),c),a)}var We=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},Fe=["name","message","stack","code"],$e=function(e,t){this.payload=e,this.meta=t},ze=function(e,t){this.payload=e,this.meta=t},qe=function(e){if("object"==typeof e&&null!==e){for(var t={},r=0,n=Fe;r<n.length;r++){var o=n[r];"string"==typeof e[o]&&(t[o]=e[o])}return t}return{message:String(e)}};function Ye(e,t,r){var n=Ke(e+"/fulfilled",(function(e,t,r,n){return{payload:e,meta:Pe(Pe({},n||{}),{arg:r,requestId:t,requestStatus:"fulfilled"})}})),o=Ke(e+"/pending",(function(e,t,r){return{payload:void 0,meta:Pe(Pe({},r||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),c=Ke(e+"/rejected",(function(e,t,n,o,c){return{payload:o,error:(r&&r.serializeError||qe)(e||"Rejected"),meta:Pe(Pe({},c||{}),{arg:n,requestId:t,rejectedWithValue:!!o,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),a="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(i,s,u){var l,d,f=(null!=(l=null==r?void 0:r.idGenerator)?l:We)(),p=new a,h=new Promise((function(e,t){return p.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:d||"Aborted"})}))})),y=!1;var b=function(){return Ae(this,null,(function(){var a,l,d;return ve(this,(function(b){switch(b.label){case 0:if(b.trys.push([0,2,,3]),r&&r.condition&&!1===r.condition(e,{getState:s,extra:u}))throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return y=!0,i(o(f,e,null==(a=null==r?void 0:r.getPendingMeta)?void 0:a.call(r,{requestId:f,arg:e},{getState:s,extra:u}))),[4,Promise.race([h,Promise.resolve(t(e,{dispatch:i,getState:s,extra:u,requestId:f,signal:p.signal,rejectWithValue:function(e,t){return new $e(e,t)},fulfillWithValue:function(e,t){return new ze(e,t)}})).then((function(t){if(t instanceof $e)throw t;return t instanceof ze?n(t.payload,f,e,t.meta):n(t,f,e)}))])];case 1:return l=b.sent(),[3,3];case 2:return d=b.sent(),l=d instanceof $e?c(null,f,e,d.payload,d.meta):c(d,f,e),[3,3];case 3:return r&&!r.dispatchConditionRejection&&c.match(l)&&l.meta.condition||i(l),[2,l]}}))}))}();return Object.assign(b,{abort:function(e){y&&(d=e,p.abort())},requestId:f,arg:e,unwrap:function(){return b.then(Xe)}})}}),{pending:o,rejected:c,fulfilled:n,typePrefix:e})}function Xe(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(n,!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const et=Me({name:"alarms",initialState:{},reducers:{setAlarms(e,t){const r=e,{hubId:n}=t.payload,{alarms:o}=t.payload,c={};Object.entries(o).forEach(e=>{const[t,r]=e;c[t]=Qe({},r)}),r[n]=Qe({},c)},setAlarm(e,t){const r=e,{hubId:n}=t.payload,{alarm:o}=t.payload;n&&r[n]&&(r[n][o.id]=Qe({},o))},removeAlarm(e,t){const r=e,{hubId:n}=t.payload,{alarmId:o}=t.payload;n&&o&&r[n]&&r[n][o]&&delete r[n][o]}}}),tt=Be(),{selectById:rt,selectIds:nt,selectEntities:ot,selectAll:ct,selectTotal:at}=tt.getSelectors(e=>e.alarms);et.selectors=tt.getSelectors(e=>e.alarms),et.selectors.getAlarms=he([e=>e.alarms],e=>e);const{actions:it,reducer:st}=et;let ut=!1;"object"==typeof process&&"object"==typeof process.versions&&(void 0!==process.versions.node?(ut=!0,console.log("Running in node.js")):console.log("Running in browser"));const lt=ut;let dt=e=>(console.error("Invalid atob for string ",e),"invalid atob");if(ut){dt=e=>{return Buffer.from(e,"base64").toString("binary")}}else dt=window.atob;function ft(e){const t=e.replace(/-/g,"+").replace(/_/g,"/");let r=t;switch(r.length%4){case 0:case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("Illegal base64url string!")}let n="",o=e=>(console.error("Invalid atob for string ",e),"invalid atob");if(ut){o=e=>{return Buffer.from(e,"base64").toString("binary")}}else o=window.atob;try{n=o(t)}catch(e){try{n=o(r)}catch(e){console.error("urlBase64Decode: trying atob failed")}}return n}const pt=["91 30 CF 20 17 F7 D7 EC F7 BA 43 30 8E 19 83 B4 CF DE 5A CC","26 B0 20 FA AB E8 A3 81 63 37 C6 B7 EF 94 4D 40 3D 1B 85 10"],ht="https://testapi.cozify.fi",yt="https://one.cozify.fi",bt="https://one.dev.cozify.fi",mt="ui/0.2/";let Et="https://api.cozify.fi";function vt(){return-1!==Et.indexOf(yt)||-1!==Et.indexOf(bt)}function gt(){return-1===Et.indexOf("/site/")?`${Et}/${mt}`:`${Et}`}const Ot="1.13",St=Object.freeze({USER_LOGIN:{method:"POST",url:"user/login",params:["password","email"],config:{responseType:lt?"blob":"stream",timeout:15e3}},HUB_KEYS:{method:"GET",url:"user/hubkeys",timeout:15e3},HUB_LOCK_BACKUP:{method:"POST",url:"hub/remote/cc/$API_VER/hub/lockconfig"},REFRESH_AUTHKEY:{method:"GET",url:"user/refreshsession"},CLOUD_IP:{method:"GET",url:"hub/lan_ip"},CLOUD_META:{method:"GET",url:"hub/remote/hub"},POLL:{method:"GET",url:"hub/remote/cc/$API_VER/hub/poll",urlParams:["ts"]},PAIR_START:{method:"GET",url:"hub/remote/cc/$API_VER/hub/scan",urlParams:["ts"]},PAIR_IGNORE:{method:"PUT",url:"hub/remote/cc/$API_VER/hub/scan",type:"SET_SCAN_RESULT",params:["id","ignored"]},PAIR_STOP:{method:"GET",url:"hub/remote/cc/$API_VER/hub/stopscan"},CMD_DEVICE_STATE:{method:"PUT",url:"hub/remote/cc/$API_VER/devices/command",type:"CMD_DEVICE",params:["id","state"]},CMD_DEVICE_IGNORE:{method:"PUT",url:"hub/remote/cc/$API_VER/devices/command",type:"CMD_IGNORE_DEVICE",params:["id"]},CMD_DEVICE_VISIBILITY:{method:"PUT",url:"hub/remote/cc/$API_VER/devices",type:"CMD_DEVICE_VISIBLE",params:["id","visible"]},CMD_DEVICE_LOCK:{method:"PUT",url:"hub/remote/cc/$API_VER/devices",type:"CMD_DEVICE_LOCK",params:["id","locked"]},CMD_DEVICE_HOT_WATER:{method:"PUT",url:"hub/remote/cc/$API_VER/devices/command",type:"CMD_DEVICE_META",params:["id","locked"]},CMD_DEVICE_IDENTIFY:{method:"PUT",url:"hub/remote/cc/$API_VER/devices/command",type:"CMD_IDENTIFY",params:["id"]},CMD_DEVICE_META:{method:"PUT",url:"hub/remote/cc/$API_VER/devices/command",type:"CMD_DEVICE_META",params:["id","name","room"]},CMD_GET_ROOMS:{method:"GET",url:"hub/remote/cc/$API_VER/rooms"},CMD_SET_ROOM:{method:"PUT",url:"hub/remote/cc/$API_VER/rooms",type:"CMD_ROOM",params:["id","name","order"]},CMD_REMOVE_ROOM:{method:"DELETE",url:"hub/remote/cc/$API_VER/rooms",urlParams:["roomId"]},CMD_GET_ALARMS:{method:"GET",url:"hub/remote/cc/$API_VER/alarms"},CMD_CLOSE_ALARM:{method:"PUT",url:"hub/remote/cc/$API_VER/alarms/close",urlParams:["alarmId"]},CMD_REMOVE_ALARM:{method:"DELETE",url:"hub/remote/cc/$API_VER/alarms",urlParams:["roomId"]},GET_MODBUS_DEVICE_PAIRINGS:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"GET_MODBUS_PAIRINGS"},SET_MODBUS_DEVICE_PAIRINGS:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"PAIR_MODBUS"},ZWAVE_START_INCLUSION:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_START_INCLUSION"},ZWAVE_STOP_INCLUSION:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_CANCEL_INCLUSION"},ZWAVE_START_EXCLUSION:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_START_EXCLUSION"},ZWAVE_STOP_EXCLUSION:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_CANCEL_EXCLUSION"},ZWAVE_INCLUSION_STATUS:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"GET_ZWAVE_INCLUSION_STATUS"},ZWAVE_EXCLUSION_STATUS:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"GET_ZWAVE_EXCLUSION_STATUS"},ZWAVE_HEAL:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_HEAL"},ZWAVE_GET_NODES:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_GET_NODES"},ZWAVE_CHECK_IS_FAILED_NODE:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_CHECK_FAILED",params:["nodeId"],timeout:3e4},ZWAVE_REMOVE_FAILED_NODE:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_REMOVE_FAILED",params:["nodeId"],timeout:3e4},ZWAVE_GET_NODE_CONFIGURATION:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_UI_GET_CONFIGURATION",params:["nodeId","parameter"],timeout:3e4},ZWAVE_SET_NODE_CONFIGURATION:{method:"POST",url:"hub/remote/cc/$API_VER/hub/protocolconfig",type:"ZWAVE_UI_SET_CONFIGURATION",params:["nodeId","parameter","size","default","value"],timeout:3e4},CMD_LIST_PLANS:{method:"GET",url:"plans"},CMD_GET_PLAN:{method:"GET",url:"plans"},CMD_SAVE_PLAN:{method:"POST",url:"plans",params:["templates","installations","locations"]}}),It=Object.freeze({UNCONNECTED:"no connection",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",OBSOLETE_API_VERSION:"obsolete api version",LATE_PAYMENT:"late payment",CONNECTED:"connected"}),_t=Object.freeze({UNCONNECTED:"no connection",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",OBSOLETE_API_VERSION:"obsolete api version",REMOTE:"remote",LOCAL:"local"}),Dt=Me({name:"connections",initialState:{cloudState:It.UNCONNECTED},reducers:{setCloudConnectionState(e,t){const r=e,n=t.payload,o=e.cloudState;Object.values(It).indexOf(n)>-1&&o!==n&&(console.log(`CLOUD connection state ${o} -> ${n}`),r.cloudState=n)}}}),Pt=Be(),{selectById:At,selectIds:Nt,selectEntities:wt,selectAll:Tt,selectTotal:Ct}=Pt.getSelectors(e=>e.hubs);Dt.selectors=Pt.getSelectors(e=>e.connections),Dt.selectors.getConnections=he([e=>e.connections],e=>e);const{actions:Rt,reducer:jt}=Dt;function Kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(n,!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Lt=Me({name:"pairings",initialState:{},reducers:{setPairingDevices(e,t){const r=e,{hubId:n}=t.payload,{devices:o}=t.payload,c={};Object.entries(o).forEach(e=>{const[t,r]=e;c[t]=Ut({},r)}),r[n]=Ut({},c)},setPairingDevice(e,t){const r=e,{hubId:n}=t.payload,{device:o}=t.payload;r[n]&&(r[n][o.id]=Ut({},o))},deletePairingDevice(e,t){const r=e,{hubId:n}=t.payload,{deviceId:o}=t.payload;n&&o&&r[n]&&r[n][o]&&delete r[n][o]}}}),Mt=Be(),{selectById:Vt,selectIds:kt,selectEntities:xt,selectAll:Gt,selectTotal:Ht}=Mt.getSelectors(e=>e.hubs);Lt.selectors=Mt.getSelectors(e=>e.pairings),Lt.selectors.getPairings=he([e=>e.pairings],e=>e);const{actions:Zt,reducer:Bt}=Lt;function Wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(n,!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const $t=Me({name:"devices",initialState:{},reducers:{setDevices(e,t){const r=e,{hubId:n}=t.payload,{devices:o}=t.payload,c={};Object.entries(o).forEach(e=>{const[t,r]=e;c[t]=Ft({},r)}),r[n]=Ft({},c)},setDevice(e,t){const r=e,{hubId:n}=t.payload,{device:o}=t.payload;r[n]&&(r[n][o.id]=Ft({},o))},deleteDevice(e,t){const r=e,{hubId:n}=t.payload,{deviceId:o}=t.payload;n&&o&&r[n]&&r[n][o]&&delete r[n][o]}}}),zt=Be(),{selectById:qt,selectIds:Yt,selectEntities:Xt,selectAll:Jt,selectTotal:Qt}=zt.getSelectors(e=>e.devices);$t.selectors=zt.getSelectors(e=>e.devices),$t.selectors.getDevices=he([e=>e.devices],e=>e);const{actions:er,reducer:tr}=$t,{setDevices:rr,deleteDevice:nr}=er;function or(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const cr=Me({name:"hubs",initialState:{},reducers:{updateHubs(e,t){const n=e,o=t.payload;console.log("updateHubs",o),Object.entries(o).forEach(t=>{const[o,c]=t;n[o]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(n,!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e[o],{},c)})},selectHub(e,t){const r=e,{hubId:n}=t.payload;console.log("selectHub",n),e[n]&&(r[n].selected=!0,console.log("selectHub",e[n]))},unSelectHub(e,t){const r=e,{hubId:n}=t.payload;e[n]&&(r[n].selected=!1)},setHubConnectionState(e,t){const{hubId:r}=t.payload,n=e,o=t.payload.state,c=e[r]?e[r].connectionState:void 0;Object.values(_t).indexOf(o)>-1&&c&&c!==o&&(n[r].connectionState=o)}}}),ar=Be(),{selectById:ir,selectIds:sr,selectEntities:ur,selectAll:lr,selectTotal:dr}=ar.getSelectors(e=>e.hubs);cr.selectors=ar.getSelectors(e=>e.hubs),cr.selectors.getHubs=he([e=>e.hubs],e=>e);const{actions:fr,reducer:pr}=cr,{updateHubs:hr,selectHub:yr,unSelectHub:br,setHubConnectionState:mr}=fr;var Er=Object.prototype;var vr=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Er)};var gr=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),Or=Object.prototype.hasOwnProperty;var Sr=function(e){if(!vr(e))return gr(e);var t=[];for(var r in Object(e))Or.call(e,r)&&"constructor"!=r&&t.push(r);return t},Ir="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function _r(e,t){return e(t={exports:{}},t.exports),t.exports}var Dr="object"==typeof Ir&&Ir&&Ir.Object===Object&&Ir,Pr="object"==typeof self&&self&&self.Object===Object&&self,Ar=Dr||Pr||Function("return this")(),Nr=Ar.Symbol,wr=Object.prototype,Tr=wr.hasOwnProperty,Cr=wr.toString,Rr=Nr?Nr.toStringTag:void 0;var jr=function(e){var t=Tr.call(e,Rr),r=e[Rr];try{e[Rr]=void 0;var n=!0}catch(e){}var o=Cr.call(e);return n&&(t?e[Rr]=r:delete e[Rr]),o},Kr=Object.prototype.toString;var Ur=function(e){return Kr.call(e)},Lr="[object Null]",Mr="[object Undefined]",Vr=Nr?Nr.toStringTag:void 0;var kr=function(e){return null==e?void 0===e?Mr:Lr:Vr&&Vr in Object(e)?jr(e):Ur(e)};var xr=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Gr="[object AsyncFunction]",Hr="[object Function]",Zr="[object GeneratorFunction]",Br="[object Proxy]";var Wr,Fr=function(e){if(!xr(e))return!1;var t=kr(e);return t==Hr||t==Zr||t==Gr||t==Br},$r=Ar["__core-js_shared__"],zr=(Wr=/[^.]+$/.exec($r&&$r.keys&&$r.keys.IE_PROTO||""))?"Symbol(src)_1."+Wr:"";var qr=function(e){return!!zr&&zr in e},Yr=Function.prototype.toString;var Xr=function(e){if(null!=e){try{return Yr.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Jr=/^\[object .+?Constructor\]$/,Qr=Function.prototype,en=Object.prototype,tn=Qr.toString,rn=en.hasOwnProperty,nn=RegExp("^"+tn.call(rn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var on=function(e){return!(!xr(e)||qr(e))&&(Fr(e)?nn:Jr).test(Xr(e))};var cn=function(e,t){return null==e?void 0:e[t]};var an=function(e,t){var r=cn(e,t);return on(r)?r:void 0},sn=an(Ar,"DataView"),un=an(Ar,"Map"),ln=an(Ar,"Promise"),dn=an(Ar,"Set"),fn=an(Ar,"WeakMap"),pn=Xr(sn),hn=Xr(un),yn=Xr(ln),bn=Xr(dn),mn=Xr(fn),En=kr;(sn&&"[object DataView]"!=En(new sn(new ArrayBuffer(1)))||un&&"[object Map]"!=En(new un)||ln&&"[object Promise]"!=En(ln.resolve())||dn&&"[object Set]"!=En(new dn)||fn&&"[object WeakMap]"!=En(new fn))&&(En=function(e){var t=kr(e),r="[object Object]"==t?e.constructor:void 0,n=r?Xr(r):"";if(n)switch(n){case pn:return"[object DataView]";case hn:return"[object Map]";case yn:return"[object Promise]";case bn:return"[object Set]";case mn:return"[object WeakMap]"}return t});var vn=En;var gn=function(e){return null!=e&&"object"==typeof e},On="[object Arguments]";var Sn=function(e){return gn(e)&&kr(e)==On},In=Object.prototype,_n=In.hasOwnProperty,Dn=In.propertyIsEnumerable,Pn=Sn(function(){return arguments}())?Sn:function(e){return gn(e)&&_n.call(e,"callee")&&!Dn.call(e,"callee")},An=Array.isArray,Nn=9007199254740991;var wn=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Nn};var Tn=function(e){return null!=e&&wn(e.length)&&!Fr(e)};var Cn=function(){return!1},Rn=_r((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?Ar.Buffer:void 0,c=(o?o.isBuffer:void 0)||Cn;e.exports=c})),jn={};jn["[object Float32Array]"]=jn["[object Float64Array]"]=jn["[object Int8Array]"]=jn["[object Int16Array]"]=jn["[object Int32Array]"]=jn["[object Uint8Array]"]=jn["[object Uint8ClampedArray]"]=jn["[object Uint16Array]"]=jn["[object Uint32Array]"]=!0,jn["[object Arguments]"]=jn["[object Array]"]=jn["[object ArrayBuffer]"]=jn["[object Boolean]"]=jn["[object DataView]"]=jn["[object Date]"]=jn["[object Error]"]=jn["[object Function]"]=jn["[object Map]"]=jn["[object Number]"]=jn["[object Object]"]=jn["[object RegExp]"]=jn["[object Set]"]=jn["[object String]"]=jn["[object WeakMap]"]=!1;var Kn=function(e){return gn(e)&&wn(e.length)&&!!jn[kr(e)]};var Un=function(e){return function(t){return e(t)}},Ln=_r((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&Dr.process,c=function(){try{var e=n&&n.require&&n.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=c})),Mn=Ln&&Ln.isTypedArray,Vn=Mn?Un(Mn):Kn,kn="[object Map]",xn="[object Set]",Gn=Object.prototype.hasOwnProperty;var Hn=function(e){if(null==e)return!0;if(Tn(e)&&(An(e)||"string"==typeof e||"function"==typeof e.splice||Rn(e)||Vn(e)||Pn(e)))return!e.length;var t=vn(e);if(t==kn||t==xn)return!e.size;if(vr(e))return!Sr(e).length;for(var r in e)if(Gn.call(e,r))return!1;return!0};const Zn=Object.freeze({NONE:"none",EN_EN:"en",EN_UK:"en-UK",FI_FI:"fi-FI",FI:"fi",EN:"en"}),Bn=Object.freeze({WAITING_LANGUAGE:"wait language",LANGUAGE_SET:"language set",WAITING_LOGIN:"wait login",LOGIN_DONE:"login done",WAITING_EULA:"wait eula",EULA_ACCEPTED:"eula accepted",AUTHENTICATED:"logged in",KEYED:"key entered",LOGGED_OUT:"logged out"}),Wn=Object.freeze({ADMIN:32,USER:8,GUEST:2,ANONYMOUS:1}),Fn=Me({name:"user",initialState:{firstName:"",lastName:"",email:"",language:Zn.NONE,authKey:"",role:Wn.ANONYMOUS,eulaAccepted:!1,state:Bn.WAITING_LANGUAGE},reducers:{changeState(e,t){const r=e,n=t.payload,o=e.state;switch(console.log(`User state ${o} -> ${n}`),o){case Bn.WAITING_LANGUAGE:n===Bn.LANGUAGE_SET&&(Hn(e.language)||(r.state=Bn.WAITING_LOGIN));break;case Bn.WAITING_LOGIN:n===Bn.LOGIN_DONE&&(Hn(e.authKey)||(Hn(e.eulaAcceted)?r.state=Bn.WAITING_EULA:r.state=Bn.AUTHENTICATED));break;case Bn.WAITING_EULA:n===Bn.EULA_ACCEPTED&&(r.state=Bn.AUTHENTICATED);break;case Bn.AUTHENTICATED:n===Bn.LOGGED_OUT&&(r.state=Bn.WAITING_LOGIN)}},setEula(e,t){e.eulaAccepted=t.payload},setLanguage(e,t){e.language=t.payload},setAuthKey(e,t){e.authKey=t.payload},setAuthenticated(e,t){const r=e;r.authKey=t.payload,r.state=Bn.KEYED}}}),$n=Be();Fn.selectors=$n.getSelectors(e=>e.user),Fn.selectors.getUser=he([e=>e.user],e=>e);const{actions:zn,reducer:qn}=Fn;function Yn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(n,!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Jn=Me({name:"rooms",initialState:{},reducers:{setRooms(e,t){const r=e,{hubId:n}=t.payload,{rooms:o}=t.payload,c={};Object.entries(o).forEach(e=>{const[t,r]=e;c[t]=Xn({},r)}),r[n]=Xn({},c)},setRoom(e,t){const r=e,{hubId:n}=t.payload,{room:o}=t.payload;n&&r[n]&&(r[n][o.id]=Xn({},o))},removeRoom(e,t){const r=e,{hubId:n}=t.payload,{roomId:o}=t.payload;n&&o&&r[n]&&r[n][o]&&delete r[n][o]}}}),Qn=Be(),{selectById:eo,selectIds:to,selectEntities:ro,selectAll:no,selectTotal:oo}=Qn.getSelectors(e=>e.rooms);Jn.selectors=Qn.getSelectors(e=>e.rooms),Jn.selectors.getRooms=he([e=>e.rooms],e=>e);const{actions:co,reducer:ao}=Jn,io=Be({selectId:e=>(console.log("SDK plansAdapter: ",e),e.uid),sortComparer:(e,t)=>t.changed_at.localeCompare(e.changed_at)});const so=Ye("plans/fetchPlans",async(e,t)=>(console.debug("reactFetchPlans state",t.getState()),async function(){return new Promise((e,t)=>{t(new Error("fetchPlans TBD"))})}()),{condition:(e,{getState:t,extra:r})=>{const n=t();console.debug("reactFetchPlans condition state: ",n),console.debug("reactFetchPlans condition extra: ",r)}}),uo=Ye("plans/subscribePlans",async(e,t)=>new Promise((r,n)=>{console.debug("reactSubscribePlans state: ",t.getState()),console.debug("reactSubscribePlans params: ",e),n(new Error("subscribePlans TBD"))}));const lo=Ye("plans/insertPlan",async(e,t)=>{console.debug("reactInsertPlan state: ",t.getState());const{name:r}=e;return async function(e){return new Promise((t,r)=>{console.debug("SDK insertPlan name",e),r(new Error("insertPlans TBD"))})}(r)});const fo=Ye("plans/updatePlan",async(e,t)=>{console.debug("reactUpdatePlan state: ",t.getState());const{uid:r,changes:n}=e;return async function(e,t){return new Promise((r,n)=>{n(new Error(`updatePlan uid: ${e} TBD, changes: ${t}`))})}(r,n)});const po=Ye("plans/removePlan",async(e,t)=>{console.debug("reactRemovePlan state: ",t.getState());const{uid:r}=e;return async function(e){return new Promise((t,r)=>{r(new Error(`removePlan  uid: ${e} TBD`))})}(r)}),ho=Me({name:"plans",initialState:io.getInitialState(),reducers:{setPlansState(e,t){const r=t.payload;io.setAll(e,r)}},extraReducers:{[so.fulfilled]:(e,t)=>{io.upsertMany(e,t.payload)},[so.rejected]:(e,t)=>{console.error("SDK reactFetchPlans rejected state: ",e),console.error("SDK reactFetchPlans rejected action: ",t)},[lo.fulfilled]:(e,t)=>{io.updateOne(e,t.payload)},[lo.rejected]:(e,t)=>{console.error("SDK reactInsertPlan rejected state: ",e),console.error("SDK reactInsertPlan rejected action: ",t)},[fo.fulfilled]:(e,t)=>{io.updateOne(e,t.payload)},[fo.rejected]:(e,t)=>{console.error("SDK reactFetchPlans rejected state: ",e),console.error("SDK reactFetchPlans rejected action: ",t)},[po.fulfilled]:(e,t)=>{io.updateOne(e,t.payload)},[po.rejected]:(e,t)=>{console.error("SDK reactRemovePlan rejected state: ",e),console.error("SDK reactRemovePlan rejected action: ",t)}}});ho.selectors=io.getSelectors(e=>e.plans),ho.selectors.getPlans=ho.selectors.selectEntities;const{reducer:yo}=ho,{selectById:bo,selectIds:mo,selectEntities:Eo,selectAll:vo,selectTotal:go}=io.getSelectors(e=>e.plans),Oo=Be({selectId:e=>e.uid,sortComparer:(e,t)=>e.plan_id.localeCompare(t.plan_id)});const So=Ye("plans/fetchPlanDocuments",async(e,t)=>(console.debug("fetchPlanDocuments state: ",t.getState()),async function(e){return new Promise((t,r)=>{r(new Error(`fetchPlanDocuments planId: ${e} TBD`))})}(e))),Io=Ye("plans/subscribePlanDocuments",async(e,t)=>new Promise((r,n)=>{console.debug("reactSubscribePlanDocuments state: ",t.getState()),n(new Error(`reactSubscribePlanDocuments params: ${e} TBD`))}));const _o=Ye("plans/insertPlanDocument",async(e,t)=>{console.debug("reactInsertPlanDocument state: ",t.getState());const{planId:r,changes:n}=e;return async function(e,t){return new Promise((r,n)=>{n(new Error(`insertPlanDocument planId: ${e} TBD, changes: ${t}`))})}(r,n)});const Do=Ye("plans/updatePlanDocument",async(e,t)=>{console.debug("reactUpdatePlanDocument state: ",t.getState());const{uid:r,changes:n}=e;return async function(e,t){return new Promise((r,n)=>{n(new Error(`updatePlanDocument uid: ${e} TBD, changes: ${t}`))})}(r,n)});const Po=Ye("plans/removePlanDocument",async(e,t)=>{console.debug("removePlanDocument state: ",t.getState());const{uid:r}=e;return async function(e){return new Promise((t,r)=>{r(new Error(`removePlanDocument uid: ${e} TBD`))})}(r)}),Ao=Me({name:"documents",initialState:Oo.getInitialState(),reducers:{setPlanDocumentsState(e,t){const r=e,n=t.payload;Oo.setAll(r,n)}},extraReducers:{[So.fulfilled]:(e,t)=>{Oo.upsertMany(e,t.payload)},[So.rejected]:(e,t)=>{console.error("SDK reactFetchPlanDocuments rejected state: ",e),console.error("SDK reactFetchPlanDocuments rejected action: ",t)},[_o.fulfilled]:(e,t)=>{Oo.updateOne(e,t.payload)},[_o.rejected]:(e,t)=>{console.error("SDK reactInsertPlanDocument rejected state: ",e),console.error("SDK reactInsertPlanDocument rejected action: ",t)},[Do.fulfilled]:(e,t)=>{Oo.updateOne(e,t.payload)},[Do.rejected]:(e,t)=>{console.error("SDK reactUpdatePlanDocument rejected state: ",e),console.error("SDK reactUpdatePlanDocument rejected action: ",t)},[Po.fulfilled]:(e,t)=>{Oo.updateOne(e,t.payload)},[Po.rejected]:(e,t)=>{console.error("SDK reactRemovePlanDocument rejected state: ",e),console.error("SDK reactRemovePlanDocument rejected action: ",t)}}});Ao.selectors=Oo.getSelectors(e=>e.documents),Ao.selectors.selectPlanDocuments=he([e=>e.documents,(e,t)=>t],(e,t)=>{const r=e.ids.filter(r=>e.entities[r].plan_id===t),n=[];return r.forEach(t=>{n.push(e.entities[t])}),n});const{selectById:No,selectIds:wo,selectEntities:To,selectAll:Co,selectTotal:Ro}=Oo.getSelectors(e=>e.documents),jo=Ao.selectors.selectPlanDocuments,{reducer:Ko}=Ao,Uo=Be({selectId:e=>e.uid,sortComparer:(e,t)=>e.document_id.localeCompare(t.document_id)});const Lo=Ye("plans/fetchPlanDocumentNodes",async(e,t)=>(console.debug("fetchPlanDocuments state: ",t.getState()),async function(e){return new Promise((t,r)=>{r(new Error(`fetchPlanDocuments documentId: ${e} TBD`))})}(e))),Mo=Ye("plans/subscribePlanDocumentNodes",async(e,t)=>new Promise((e,r)=>{console.debug("reactSubscribePlanDocumentNodes state: ",t.getState()),r(new Error("reactSubscribePlanDocumentNodes TBD"))}));const Vo=Ye("plans/insertPlanDocumentNode",async(e,t)=>{console.debug("reactInsertPlanDocumentNode state:",t.getState());const{documentId:r,parentId:n,changes:o}=e;return async function(e,t,r){const n=r;return r&&r.type&&(n.__typename=r.type),new Promise((r,o)=>{o(new Error(`insertPlanDocumentNode docId: ${e}, parentId: ${t} TBD, changes: ${n}`))})}(r,n,o)});const ko=Ye("plans/updatePlanDocumentNode",async(e,t)=>{console.debug("reactUpdatePlanDocumentNode state: ",t.getState());const{uid:r,changes:n}=e;return async function(e,t){return new Promise((r,n)=>{n(new Error(`updatePlanDocumentNode uid: ${e} TBD, changes: ${t}`))})}(r,n)});const xo=Ye("plans/removePlanDocumentNode",async(e,t)=>{console.debug("reactRemovePlanDocumentNode state: ",t.getState());const{uid:r}=e;return async function(e){return new Promise((t,r)=>{r(new Error(`removePlanDocumentNode uid: ${e} TBD`))})}(r)}),Go=Me({name:"nodes",initialState:Uo.getInitialState(),reducers:{setPlanDocumentNodesState(e,t){const r=e,n=t.payload;Uo.setAll(r,n)}},extraReducers:{[Lo.fulfilled]:(e,t)=>{Uo.upsertMany(e,t.payload)},[Lo.rejected]:(e,t)=>{console.error("SDK reactFetchPlanDocumentNodes rejected state: ",e),console.error("SDK reactFetchPlanDocumentNodes rejected action: ",t)},[Vo.fulfilled]:(e,t)=>{Uo.updateOne(e,t.payload)},[Vo.rejected]:(e,t)=>{console.error("SDK reactInsertPlanDocumentNode rejected state: ",e),console.error("SDK reactInsertPlanDocumentNode rejected action: ",t)},[ko.fulfilled]:(e,t)=>{Uo.updateOne(e,t.payload)},[ko.rejected]:(e,t)=>{console.error("SDK reactUpdatePlanDocumentNode rejected state: ",e),console.error("SDK reactUpdatePlanDocumentNode rejected action: ",t)},[xo.fulfilled]:(e,t)=>{Uo.updateOne(e,t.payload)},[xo.rejected]:(e,t)=>{console.error("SDK reactRemovePlanDocumentNode rejected state: ",e),console.error("SDK reactRemovePlanDocumentNode rejected action: ",t)}}});Go.selectors=Uo.getSelectors(e=>e.nodes),Go.selectors.selectPlanDocumentNodes=he([e=>e.nodes,(e,t)=>t],(e,t)=>{const r=e.ids.filter(r=>e.entities[r].document_id===t),n=[];return r.forEach(t=>{n.push(e.entities[t])}),n});const{selectById:Ho,selectIds:Zo,selectEntities:Bo,selectAll:Wo,selectTotal:Fo}=Uo.getSelectors(e=>e.nodes),$o=Go.selectors.selectPlanDocumentNodes,{reducer:zo}=Go,qo={alarms:st,connections:jt,pairings:Bt,devices:tr,hubs:pr,user:qn,rooms:ao,plans:yo,documents:Ko,nodes:zo};
/*!
   * isobject <https://github.com/jonschlinkert/isobject>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */
var Yo=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)},Xo=function(e,t,r){if(Yo(r)||(r={default:r}),!ec(e))return void 0!==r.default?r.default:e;"number"==typeof t&&(t=String(t));const n=Array.isArray(t),o="string"==typeof t,c=r.separator||".",a=r.joinChar||("string"==typeof c?c:".");if(!o&&!n)return e;if(o&&t in e)return Qo(t,e,r)?e[t]:r.default;let i=n?t:function(e,t,r){if("function"==typeof r.split)return r.split(e);return e.split(t)}(t,c,r),s=i.length,u=0;do{let t=i[u];for("number"==typeof t&&(t=String(t));t&&"\\"===t.slice(-1);)t=Jo([t.slice(0,-1),i[++u]||""],a,r);if(t in e){if(!Qo(t,e,r))return r.default;e=e[t]}else{let n=!1,o=u+1;for(;o<s;)if(n=(t=Jo([t,i[o++]],a,r))in e){if(!Qo(t,e,r))return r.default;e=e[t],u=o-1;break}if(!n)return r.default}}while(++u<s&&ec(e));return u===s?e:r.default};
/*!
   * get-value <https://github.com/jonschlinkert/get-value>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   */function Jo(e,t,r){return"function"==typeof r.join?r.join(e):e[0]+t+e[1]}function Qo(e,t,r){return"function"!=typeof r.isValid||r.isValid(e,t)}function ec(e){return Yo(e)||Array.isArray(e)||"function"==typeof e}console.log("Store rootReducer: ",qo);const tc=function(e){var t,r=Re(),n=e||{},o=n.reducer,c=void 0===o?void 0:o,a=n.middleware,i=void 0===a?r():a,s=n.devTools,u=void 0===s||s,h=n.preloadedState,y=void 0===h?void 0:h,b=n.enhancers,m=void 0===b?void 0:b;if("function"==typeof c)t=c;else{if(!Te(c))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=d(c)}var E=i;"function"==typeof E&&(E=E(r));var v=p.apply(void 0,E),g=f;u&&(g=we(Pe({trace:!je},"object"==typeof u&&u)));var O=[v];return Array.isArray(m)?O=ge([v],m):"function"==typeof m&&(O=m(O)),l(t,y,g.apply(void 0,O))}({reducer:qo});function rc(e,t,r){const n=r||tc,o=function(e,t){let r=Xo(e(),t);return function(n){return()=>{const o=Xo(e(),t);if(r!==o){const e=r;r=o,n(o,e)}}}}(n.getState,e);n.subscribe(o(t))}console.log("Store Initial State: ",tc.getState());const nc=Object.freeze({UNCLAIMED:"unclaimed",CLAIMED:"claimed",TOO_NEW_VERSION:"new version",NO_ACCESS:"no access",CONNECTED:"connected"}),oc=Object.freeze({NOT_PAIRING:"NOT_PAIRING",IDLE:"IDLE",RUNNING:"RUNNING",TIMEOUT:"TIMEOUT",SUCCESS:"SUCCESS",CANCEL:"CANCEL",NO_ZWAVE:"NO_ZWAVE",ERROR:"ERROR"}),cc=Object.freeze({IDLE:"IDLE",RUNNING:"RUNNING",TIMEOUT:"TIMEOUT",SUCCESS:"SUCCESS",CANCEL:"CANCEL",NO_ZWAVE:"NO_ZWAVE",ERROR:"ERROR"}),ac=45e3,ic=1e3,sc=3e3,uc=3e3,lc=3e3,dc="http://",fc="8893";function pc(e){tc.dispatch(Dt.actions.setCloudConnectionState(e))}function hc(e){const t=tc.getState(),r=cr.selectors.getHubs(t),n=e;n.state===_t.UNCONNECTED&&r[n.hubId]&&r[n.hubId].connectionState===_t.REMOTE&&(n.state=_t.LOCAL),tc.dispatch(cr.actions.setHubConnectionState(n))}var yc="[object String]";var bc=function(e){return"string"==typeof e||!An(e)&&gn(e)&&kr(e)==yc},mc=["ETIMEDOUT","ECONNRESET","EADDRINUSE","ESOCKETTIMEDOUT","ECONNREFUSED","EPIPE","EHOSTUNREACH","EAI_AGAIN"],Ec=["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED"],vc=function(e){return!e||!e.code||(-1!==mc.indexOf(e.code)||-1===Ec.indexOf(e.code))},gc=_r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isNetworkError=c,t.isRetryableError=s,t.isSafeRequestError=u,t.isIdempotentRequestError=l,t.isNetworkOrIdempotentRequestError=d,t.exponentialDelay=p,t.default=y;var r,n=(r=vc)&&r.__esModule?r:{default:r};var o="axios-retry";function c(e){return!e.response&&Boolean(e.code)&&"ECONNABORTED"!==e.code&&(0,n.default)(e)}var a=["get","head","options"],i=a.concat(["put","delete"]);function s(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&e.response.status<=599)}function u(e){return!!e.config&&(s(e)&&-1!==a.indexOf(e.config.method))}function l(e){return!!e.config&&(s(e)&&-1!==i.indexOf(e.config.method))}function d(e){return c(e)||l(e)}function f(){return 0}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=100*Math.pow(2,e);return t+.2*t*Math.random()}function h(e){var t=e[o]||{};return t.retryCount=t.retryCount||0,e[o]=t,t}function y(e,t){e.interceptors.request.use((function(e){return h(e).lastRequestTime=Date.now(),e})),e.interceptors.response.use(null,(function(r){var n=r.config;if(!n)return Promise.reject(r);var c=function(e,t){return Object.assign({},t,e[o])}(n,t),a=c.retries,i=void 0===a?3:a,s=c.retryCondition,u=void 0===s?d:s,l=c.retryDelay,p=void 0===l?f:l,y=c.shouldResetTimeout,b=void 0!==y&&y,m=h(n);if(u(r)&&m.retryCount<i){m.retryCount+=1;var E=p(m.retryCount,r);if(function(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}(e,n),!b&&n.timeout&&m.lastRequestTime){var v=Date.now()-m.lastRequestTime;n.timeout=Math.max(n.timeout-v-E,1)}return n.transformRequest=[function(e){return e}],new Promise((function(t){return setTimeout((function(){return t(e(n))}),E)}))}return Promise.reject(r)}))}y.isNetworkError=c,y.isSafeRequestError=u,y.isIdempotentRequestError=l,y.isNetworkOrIdempotentRequestError=d,y.exponentialDelay=p,y.isRetryableError=s}));!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}(gc);gc.isNetworkError,gc.isRetryableError,gc.isSafeRequestError,gc.isIdempotentRequestError,gc.isNetworkOrIdempotentRequestError,gc.exponentialDelay;var Oc=gc.default;const Sc=36e5;function Ic(e,t){let r="0.0";const n=e.indexOf(".");let o=-1;return-1!==n&&(o=e.indexOf(".",n+1)),-1!==o&&(r=e.substring(0,o)),function(e,t){const r=e.split("."),n=t.split("."),o=Math.min(r.length,n.length);if(o>0)for(let e=0;e<o-1;e+=1){const t=Number(r[e])-Number(n[e]);if(0!==t)return t}return r.length-n.length}(r,t)>0&&(r=t),r}function _c(e){let t=It.UNCONNECTED;return e&&e.response&&401===e.response.status?(t=It.UNAUTHENTICATED,console.error("send: authentication error ",e)):e&&e.response&&403===e.response.status?(t=It.LATE_PAYMENT,console.error("send: unauhorized error ",e)):e&&e.response&&403===e.response.status?(t=It.UNAUTHORIZED,console.error("send: unauhorized error ",e)):e&&e.response&&410===e.response.status&&(t=It.OBSOLETE_API_VERSION,console.error("send: version error ",e)),t}function Dc(e){let t=_t.UNCONNECTED;return e&&e.response&&400===e.response.status?console.log("send: no-connection error ",e):e&&e.response&&401===e.response.status?(t=_t.UNAUTHENTICATED,console.error("send: authentication error ",e)):e&&e.response&&403===e.response.status?(t=_t.UNAUTHORIZED,console.error("send: unauhorized error ",e)):e&&e.response&&410===e.response.status&&(t=_t.OBSOLETE_API_VERSION,console.error("send: version error ",e)),t}let Pc=!1,Ac=null;function Nc(e){return new Promise(t=>{if(!e)return void t(!0);const r=(new Date).getTime();Pc||Ac&&!(r-Ac>Sc)?t(!0):(Pc=!0,Ac=r,!lt&&window&&window.plugins&&window.plugins.sslCertificateChecker?window.plugins.sslCertificateChecker.check(()=>{Pc=!1,t(!0)},e=>{"CONNECTION_NOT_SECURE"===e?(Pc=!1,t(!1)):(Pc=!1,Ac=void 0,t(!0))},Et,pt):(setTimeout(()=>{Pc=!1},Sc),t(!0)))})}const wc=["get","head","options"].concat(["put","delete"]),Tc=wc.concat(["post"]);function Cc(e){return!!e.config&&(function(e){return!e.response||e.response.status>=500&&e.response.status<=599}(e)&&-1!==Tc.indexOf(e.config.method))}const Rc={},jc=2;function Kc(e){Rc[e]&&(console.warn("resetRetry to 0"),Rc[e]=0,delete Rc[e])}let Uc=!1;function Lc(e){let t=null,r={},n={},o=null;if(e){const t=e.split(".");t[0]&&(t[0]=t[0].replace("Bearer ",""),r=JSON.parse(ft(t[0]))),t[1]&&(n=JSON.parse(ft(t[1])))}var c;(r&&r.exp||null!=n&&n.exp)&&(t=r.exp?r.exp:n.exp),t&&(o=t-Math.round((new Date).getTime()/1e3)),!o||o<0?pc(It.UNAUTHENTICATED):!vt()&&o&&o<432e3&&(c=e,Uc||(Uc=!0,kc({command:St.REFRESH_AUTHKEY,authKey:c}).then(e=>{setTimeout(()=>{Uc=!1},6e5),e.length>10&&tc.dispatch(Fn.actions.setAuthKey(e))}).catch(()=>{Uc=!1})))}function Mc(e){return new Promise(t=>{Promise.all(e).then(()=>{t()}).catch(()=>{t()})})}Oc(t,{retryCondition:function(e){if(!(e&&e.config&&e.config.url))return console.error("retryCondition unknown",e),!1;if(Rc[e.config.url]){if(Rc[e.config.url]>=jc)return Rc[e.config.url]=0,console.error("retryCondition count >",jc),!1;Rc[e.config.url]+=Rc[e.config.url],console.info("retryCondition count set ",Rc[e.config.url])}else Rc[e.config.url]=1,console.info("retryCondition count set to 1");Cc(e)&&-1!==wc.indexOf(e.config.method)?console.info("retryCondition condition true",e.config):(console.info("retryCondition condition false",e.config),Rc[e.config.url]=0);const t=Cc(e)&&-1!==wc.indexOf(e.config.method);return console.info("retryCondition return ",t),t},shouldResetTimeout:!0,retryDelay:(e,t)=>(console.error("axiosRetry ",t),5e3)});let Vc=!1;function kc({command:e,localUrl:r,url:n,timeout:o,method:c,authKey:a,hubKey:i,type:s,config:u,data:l,hubId:d}){let f=c,p=n,h=o,y=a,b=i,m=u,E=s;null==f&&(f="GET"),null==E&&(E="application/json;charset=UTF-8");const v=l;let g=!1;const O=!Hn(d),S=tc.getState(),I=Fn.selectors.getUser(S);if(void 0!==e&&e){if(e.method&&(f=e.method),Hn(p)&&e.url){if(-1!==e.url.indexOf("$API_VER")){const t=cr.selectors.getHubs(S);if(!t[d]||!t[d].hubKey&&!vt())return new Promise((e,t)=>{t(new Error("SDK Error: Send - Hub or hubKey not found error"))});const r=t[d];if(!r.version||r.connectionState===_t.UNCONNECTED&&-1===e.url.indexOf("hub/remote/hub"))return new Promise((e,t)=>{t(new Error("SDK Error: Send - No Hub connection error"))});const n=Ic(r.version,Ot);p=gt().concat(e.url.replace("$API_VER",n))}else p=gt().concat(e.url);if(d&&vt()&&-1!==p.indexOf("hub/remote")){const e=p.indexOf("hub/remote"),t=p.substring(e+10),r=p.substring(0,e);p=r.concat("hub/").concat(d).concat("/remote").concat(t)}}if(p){const e=p.split("hub/remote");e&&e[1]&&r&&(p=r+e[1],b&&(y=b,b=null))}if(p&&p.indexOf(gt())>-1&&(g=!0),e.type&&v&&(An(v)?v[0]?v[0].type=e.type:v.push({type:e.type}):v&&(v.type=e.type)),e.params&&(e.params.includes("type")||e.params.push("type"),e.params.forEach(e=>{An(l)?v&&v[0]&&l&&l[0]&&(v[0][e]=l[0][e]):v&&l&&(v[e]=l[e])})),e.urlParams){const t=[];e.urlParams.forEach(e=>{l&&void 0!==l[e]&&t.push(`${encodeURIComponent(e)}=${encodeURIComponent(l[e])}`)}),p&&t.length>0&&(p=`${p}?${t.join("&")}`)}e.timeout&&(h=e.timeout),e.config&&(m=e.config)}const _=JSON.stringify(v),D={timeout:h||15e3,method:f,headers:{Accept:"application/json, application/binary, text/plain, */*","Content-Type":E,Authorization:y||null,"Accept-Language":null,"X-Hub-Key":b||null},crossDomain:!0,responseType:"application/json",url:p,data:Hn(_)?null:_};return I.language&&I.language!==Zn.NONE?D.headers["Accept-Language"]=I.language:delete D.headers["Accept-Language"],Object.assign(D,m),new Promise((r,n)=>{e||p?(t.interceptors.response.use(e=>e&&e.headers&&e.headers["content-type"]?e.headers["content-type"].includes("application/json")||e.headers["content-type"].includes("application/binary")?(p&&Kc(p),e):(console.error("send: unknown response type"),e):(p&&Kc(p),e),e=>Promise.reject(e)),Nc(!(!g||!p||vt())).then(o=>{!o||Vc?(Vc=!0,n(new Error("SDK Error: SSL failure."))):(y&&Lc(y),t(D).then(e=>{g?pc(It.CONNECTED):d&&hc({hubId:d,state:_t.LOCAL}),r(e.data)}).catch(t=>{let r="SDK Send error:";t&&t.response?(t.response.data&&t.response.data.message&&(r=r.concat(t.response.data.message)),t.response.status&&(r=r.concat(`Status: ${t.response.status}`)),g?(e!==St.CLOUD_META&&pc(_c(t)),O&&d&&hc({hubId:d,state:Dc(t)})):(t&&t.response&&401===t.response.status&&pc(_c(t)),O&&d&&hc({hubId:d,state:Dc(t)}))):t.request?g?(pc(It.UNCONNECTED),O&&d&&hc({hubId:d,state:_t.UNCONNECTED}),r=r.concat(`Cloud unconnected in remote. Status ${t.request.status}`)):O&&d&&(hc({hubId:d,state:_t.UNCONNECTED}),r=r.concat(`Hub unconnected. Status ${t.request.status}`)):g?(pc(It.UNCONNECTED),r=r.concat("Cloud unconnected in remote"),O&&d&&(hc({hubId:d,state:_t.UNCONNECTED}),r=r.concat("Hub unconnected in remote"))):O&&d&&(hc({hubId:d,state:_t.UNCONNECTED}),r=r.concat("Hub unconnected")),console.error(r),n(t)}))})):n(new Error("SDK Error: Command or Command API URL not found."))})}function xc(){return Fn.selectors.getUser(tc.getState())}function Gc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gc(n,!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gc(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zc(){const e=tc.getState();return $t.selectors.getDevices(e)}function Bc(){const e=tc.getState();return Lt.selectors.getPairings(e)}function Wc(e,t,r){let n={};const o=Bc();o&&o[e]&&(n=o[e]);const c={hubId:e,devices:{}};r.map(e=>{const t=Hc({},e.status),r=e;delete r.status;const n=Hc({},r,{},t);return c.devices[e.id]=n,!0}),t?tc.dispatch(Lt.actions.setPairingDevices(c)):Object.entries(c.devices).forEach(([t,r])=>{const o={hubId:e,device:r};t&&r?tc.dispatch(Lt.actions.setPairingDevice(o)):t&&n[t]&&tc.dispatch(Lt.actions.deletePairingDevice(t))})}function Fc(){const e=tc.getState();return Jn.selectors.getRooms(e)}function $c(e,t,r){return new Promise((n,o)=>{const c=tc.getState(),a=Fn.selectors.getUser(c);if(!a||!a.authKey)return console.error("SDK sendRoomCmd error: No userKey!"),void o(new Error("Room command error: No userKey!"));const i=cr.selectors.getHubs(c),s=i[e],{hubKey:u}=i[e];if(!s||!u&&-1===gt().indexOf("https://one.cozify.fi"))return console.error("SDK sendRoomCmd error: No hubKey!"),void o(new Error("Room command error: No hubKey!"));if(s.connectionState!==_t.LOCAL&&s.connectionState!==_t.REMOTE)return console.error("SDK sendRoomCmd error: No Hub connection"),void o(new Error("Room command error: No hub connection"));const{authKey:l}=a;if(!l)return console.error("SDK sendRoomCmd error: No authKey!"),void o(new Error("Room command error: No authKey!"));t&&kc({command:t,authKey:l,hubId:e,localUrl:s.url,hubKey:u,data:r}).then(t=>{console.debug("SDK sendRoomCmd ok",t),kc({command:St.CMD_GET_ROOMS,authKey:l,hubId:e,localUrl:s.url,hubKey:u}).then(t=>{console.debug("SDK sendRoomCmd refresh rooms ok",t),tc.dispatch(Jn.actions.setRooms({hubId:e,rooms:t})),n(t)}).catch(e=>{console.error("SDK Room command error:",e),o(e)})}).catch(e=>{console.error("SDK Room command error:",e),o(e)})})}const zc=e=>{const t=e;return e.message&&(t.messageHTML=function(e){try{return decodeURIComponent(Array.prototype.map.call(dt(e),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).name(-2)})).join(""))}catch(e){return console.error("b64DecodeUnicode: trying atob failed"),"b64DecodeUnicode error"}}(e.message),t.messageTxt=function(e){let t=e;return(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<\/div>/gi,"")).replace(/<\/li>/gi,"")).replace(/<li>/gi,"")).replace(/<\/ul>/gi,"")).replace(/<\/p>/gi,"")).replace(/<br\s*[\/]?>/gi,"")).replace(/<[^>]+>/gi,"")).replace(/\s\s+/g," ")).trim()}(t.message)),t};function qc(){const e=tc.getState();return et.selectors.getAlarms(e)}function Yc(e,t,r){return new Promise((n,o)=>{const c=tc.getState(),a=Fn.selectors.getUser(c);if(!a||!a.authKey)return console.error("SDK closeAlarm error: No userKey!"),void o(new Error("Alarm command error: No userKey!"));const i=cr.selectors.getHubs(c),s=i[e],{hubKey:u}=i[e];if(!s||!u&&!vt())return console.error("SDK closeAlarm error: No hubKey!"),void o(new Error("Alarm command error: No hubKey!"));if(s.connectionState!==_t.LOCAL&&s.connectionState!==_t.REMOTE)return console.error("SDK closeAlarm error: No Hub connection"),void o(new Error("Alarm command error: No hub connection"));const{authKey:l}=a;if(!l)return console.error("SDK closeAlarm error: No authKey!"),void o(new Error("Alarm command error: No authKey!"));kc({command:t,authKey:l,hubId:e,localUrl:s.url,hubKey:u,data:r}).then(t=>{console.debug("SDK sendAlarmCmd ok",t),kc({command:St.CMD_GET_ALARMS,authKey:l,hubId:e,localUrl:s.url,hubKey:u}).then(t=>{console.debug("SDK sendAlarmCmd refresh alarms ok",t),tc.dispatch(et.actions.setRooms({hubId:e,alarms:t})),n(t)}).catch(e=>{console.error("SDK Alarm command error:",e),o(e)})}).catch(e=>{o(e)})})}let Xc,Jc={};function Qc(e,t){const r=t;r.hubId&&(r.id=r.hubId,delete r.hubId),r.id&&(Jc[r.id]||(Jc[r.id]={id:r.id,name:r.name||""}),Jc[r.id].name=r.name,Jc[r.id].connected=r.connected,Jc[r.id].features=r.features,Jc[r.id].state=r.state,Jc[r.id].version=r.version,Jc[r.id].connectionState=r.connected?_t.REMOTE:_t.UNCONNECTED,e?(Jc[r.id].connectionState=_t.LOCAL,Jc[r.id].url=e):Jc[r.id].url=void 0)}function ea(e,t,r){return new Promise((n,o)=>{kc({command:St.CLOUD_META,authKey:t,hubKey:r,hubId:e}).then(e=>{Qc(void 0,e),n(e)}).catch(t=>{console.log(`doRemoteIdQuery ${e} error `,t.message),o(e)})})}function ta(){return cr.selectors.getHubs(tc.getState())}function ra(){return new Promise(e=>{kc({command:St.CLOUD_IP}).then(t=>{const r=[];t&&!Hn(t)&&t.forEach(e=>{r.push(function(e){return new Promise(t=>{if(e){const r=`${dc+e}:${fc}`;kc({url:`${r}/hub`,timeout:500}).then(n=>{Qc(r,n),t(e)}).catch(r=>{console.log(`doLocalIdQuery ${e} error `,r.message),t(e)})}else t()})}(e))}),Mc(r).finally(()=>{!function(e){const t=ta();Object.values(t).forEach(t=>{if(t.selected){const r=e[t.id];r&&(r.selected=!0)}})}(Jc),tc.dispatch(cr.actions.updateHubs(Jc)),e("ok")})}).catch(t=>{console.error("doCloudDiscovery error: ",t.message),tc.dispatch(cr.actions.updateHubs(Jc)),e("error")})})}function na(){return Fn.selectors.getUser(tc.getState())}function oa(e,t=!0,r=!1){const{authKey:n}=na();return new Promise(o=>{Jc=function(e){const t={};return e&&Object.keys(e).forEach(r=>{if(e[r]){const n=ft(e[r].split(".")[1]),o=JSON.parse(n),c={};c.id=o.hubId||o.hub_id,c.name=o.hubName||o.hub_name,c.hubKey=e[r],c.connectionState=_t.UNCONNECTED,o.role&&(c.role=o.role,c.roleString="",Object.keys(Wn).forEach(e=>{Wn[e]===c.role&&(c.roleString=e)})),t[c.id]=c}else t[r]={id:r,connectionState:_t.UNCONNECTED}}),t}(e),tc.dispatch(cr.actions.updateHubs(Jc)),function(e,t){return new Promise(r=>{const n=[];Object.values(e).forEach(e=>{n.push(ea(e.id,t,e.hubKey))}),Mc(n).then(e=>{console.debug("fetchCloudMetaData values",e)}).catch(e=>{console.error("fetchCloudMetaData error",e)}).finally(()=>{r()})})}(Jc,n).finally(()=>{tc.dispatch(cr.actions.updateHubs(Jc)),r?t?ra().then(()=>{o(ta())}).catch(()=>{o(ta())}):o(ta()):(t&&ra(),o(ta()))})})}function ca(){const{authKey:e}=na();return new Promise((t,r)=>{e?kc({command:St.HUB_KEYS,authKey:e}).then(e=>{e?oa(e).then(e=>t(e)):t(ta())}).catch(e=>{console.error("fetchHubTokens error: ",e.message),r(e)}):r(new Error("No userKey!"))})}function aa(){Xc||(ca(),Xc=setInterval(ca,ac))}const ia={},sa={},ua={},la={};function da(e,t=!1){return new Promise((r,n)=>{let o=t;if(sa[e])return console.debug("doPairing: pairing stopped"),void n(new Error("pairing stopped"));ua[e]||(ua[e]=0);const c=ta()[e],{authKey:a}=na(),{hubKey:i}=c;if(console.debug("doPairing connection state: ",c.connectionState),c.connectionState!==_t.LOCAL&&c.connectionState!==_t.REMOTE)return console.warn("SDK doPairing: no Hub connection"),void n(new Error("no hub connection"));la[e]?n(new Error("pairing already in action")):(la[e]=!0,o&&(ua[e]=0),o=0===ua[e],kc({command:St.PAIR_START,hubId:e,authKey:a,hubKey:i,localUrl:c.url,data:{ts:ua[e]}}).then(t=>{if(t)switch(ua[e]=t.timestamp,t.type){case"SCAN_DELTA":Wc(e,o,t.devices)}la[e]=!1,r("ok")}).catch(t=>{console.error("SDK: doPairing error: ",t.message),la[e]=!1,n(t)}))})}const fa={};function pa(e){return new Promise((t,r)=>{if(fa[e])return void r(new Error("already stopping"));fa[e]=!0;const{authKey:n}=na(),o=ta()[e],{hubKey:c}=o;clearInterval(ia[e]),kc({command:St.PAIR_STOP,hubId:e,authKey:n,hubKey:c,localUrl:o.url}).then(r=>{console.debug("SDK: pairingStopped: Ok , data: ",r),sa[e]=!0,fa[e]=!1,Wc(e,!0,[]),t("ok")}).catch(t=>{console.error("SDK: pairingStopped error: ",t.message),fa[e]=!1,r(t)})})}const ha={},ya={},ba={},ma={},Ea={};function va(e,t=!1){return new Promise((r,n)=>{let o=t;if(o&&(ba[e]=0),o=0===ba[e],ya[e])return console.debug("doPolling: polling stopped"),void r("stopped");ba[e]||(ba[e]=0);const c=ta()[e];if(!c||c.connectionState!==_t.LOCAL&&c.connectionState!==_t.REMOTE)return console.warn("SDK doPoll: No Hub connection"),void n(new Error("doPoll error: No Hub connection"));if(console.debug("doPoll connection state: ",c.connectionState),c.connectionState===_t.REMOTE&&!o){if(Ea[e])return Ea[e]=!1,void r("skipped");Ea[e]=!0}const{authKey:a}=na(),{hubKey:i}=c;ma[e]?n(new Error("doPoll error: Already polling")):(ma[e]=!0,kc({command:St.POLL,hubId:e,authKey:a,hubKey:i,localUrl:c.url,data:{ts:ba[e]}}).then(t=>{t&&((0===ba[e]||t.full)&&(o=!0),ba[e]=t.timestamp,t.polls.forEach(t=>{switch(t.type){case"DEVICE_DELTA":!function(e,t,r){let n={};const o=Zc();if(o&&o[e]&&(n=o[e]),t){const t={hubId:e,devices:r};tc.dispatch($t.actions.setDevices(t))}else Object.entries(r).forEach(([t,r])=>{const o={hubId:e,device:r};t&&r?tc.dispatch($t.actions.setDevice(o)):t&&n[t]&&tc.dispatch($t.actions.deleteDevice(t))})}(e,o,t.devices);break;case"GROUP_DELTA":case"SCENE_DELTA":case"RULE_DELTA":case"USERS_DELTA":break;case"ROOM_DELTA":!function(e,t,r){let n={};const o=Fc();if(o&&o[e]&&(n=o[e]),t){const t={hubId:e,rooms:r};tc.dispatch(Jn.actions.setRooms(t))}else Hn(r)||Object.entries(r).forEach(([t,r])=>{const o={hubId:e,room:r};t&&r?tc.dispatch(Jn.actions.setRoom(o)):t&&n[t]&&tc.dispatch(Jn.actions.removeRoom({hubId:e,roomId:t}))})}(e,o,t.rooms);break;case"ZONE_DELTA":case"USER_ALERTS":break;case"ALARM_DELTA":!function(e,t,r){let n={};const o=qc();if(o&&o[e]&&(n=o[e]),t){const t={};Hn(r)||Object.entries(r).forEach(([e,r])=>{t[e]=zc(r)});const n={hubId:e,alarms:t};tc.dispatch(et.actions.setAlarms(n))}else Hn(r)||Object.entries(r).forEach(([t,r])=>{if(t&&r){const t={hubId:e,alarm:zc(r)};tc.dispatch(et.actions.setAlarm(t))}else t&&n[t]&&tc.dispatch(et.actions.removeAlarm({hubId:e,alarmId:t}))})}(e,o,t.alarms)}})),ma[e]=!1,r(t)}).catch(t=>{console.error("SDK doPoll error: ",t.message),ma[e]=!1,n(t)}))})}function ga(e){ya[e]=!1;const t=ic,r=e=>va(e).then(()=>{}).catch(()=>{});try{ha[e]=setInterval(r,t,e)}catch(e){console.error("Catch startPollingById: ",e)}return va(e)}function Oa(e){ya[e]=!0,clearInterval(ha[e])}function Sa(e,t=!1){return new Promise((r,n)=>{const o=ta();if(!Hn(o)){let c=null;return Object.values(o).every(r=>e!==r.id||(tc.dispatch(cr.actions.selectHub({hubId:r.id})),t?(c=ga(r.id),!1):(console.debug("SDK selectHubById: Ready to start polling"),!1))),c?c.then(e=>r(e)).catch(()=>r("polling started")):(!c&&t?n(new Error("hub not found")):r("ready to poll"),!0)}return n(new Error("no hubs")),!0})}function Ia(){return Fn.selectors.getUser(tc.getState())}function _a(){return cr.selectors.getHubs(tc.getState())}rc("user.state",e=>{e===Bn.AUTHENTICATED&&aa()});const Da={},Pa={},Aa={};function Na(e,t,r){(function(e){return new Promise((t,r)=>{if(Da[e])return console.debug("askZwaveInclusionStatus: inclusion stopped"),void r(new Error("inclusion stopped"));const n=_a()[e],{authKey:o}=Ia(),{hubKey:c}=n;if(console.debug("askZwaveInclusionStatus connection state: ",n.connectionState),n.connectionState!==_t.LOCAL&&n.connectionState!==_t.REMOTE)return console.warn("SDK askZwaveInclusionStatus: no Hub connection"),void r(new Error("no hub connection"));Pa[e]?r(new Error("inclusion already in action")):(Pa[e]=!0,kc({command:St.ZWAVE_INCLUSION_STATUS,hubId:e,authKey:o,hubKey:c,localUrl:n.url,data:[]}).then(r=>{Pa[e]=!1,t(r)}).catch(t=>{console.error("SDK: askZwaveInclusionStatus error: ",t.message),Pa[e]=!1,r(t)}))})})(e).then(n=>{if(n&&n.status)switch(n.status){case oc.RUNNING:setTimeout(()=>{Na(e,t,r)},uc);break;case oc.SUCCESS:t(!0);break;case oc.TIMEOUT:case oc.CANCEL:t(!1);break;default:r(new Error("Invalid inclusion state"))}else r(new Error("Invalid inclusion state"))}).catch(e=>{console.error("Error in askZwaveInclusionStatusPromise: ",e),r(e)})}const wa={},Ta={},Ca={};function Ra(e){return new Promise((t,r)=>{if(wa[e])return console.debug("askZwaveExclusionStatus: exclusion stopped"),void r(new Error("exclusion stopped"));const n=_a()[e],{authKey:o}=Ia(),{hubKey:c}=n;if(console.debug("askZwaveExclusionStatus connection state: ",n.connectionState),n.connectionState!==_t.LOCAL&&n.connectionState!==_t.REMOTE)return console.warn("SDK askZwaveExclusionStatus: no Hub connection"),void r(new Error("no hub connection"));Ta[e]?r(new Error("exclusion already in action")):(Ta[e]=!0,kc({command:St.ZWAVE_EXCLUSION_STATUS,hubId:e,authKey:o,hubKey:c,localUrl:n.url,data:[]}).then(r=>{Ta[e]=!1,t(r)}).catch(t=>{console.error("SDK: askZwaveExclusionStatus error: ",t.message),Ta[e]=!1,r(t)}))})}const ja={};const Ka={};function Ua(){return Fn.selectors.getUser(tc.getState())}function La(){return cr.selectors.getHubs(tc.getState())}var Ma="[object Symbol]";var Va=function(e){return"symbol"==typeof e||gn(e)&&kr(e)==Ma},ka=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xa=/^\w*$/;var Ga=function(e,t){if(An(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Va(e))||(xa.test(e)||!ka.test(e)||null!=t&&e in Object(t))},Ha=an(Object,"create");var Za=function(){this.__data__=Ha?Ha(null):{},this.size=0};var Ba=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Wa="__lodash_hash_undefined__",Fa=Object.prototype.hasOwnProperty;var $a=function(e){var t=this.__data__;if(Ha){var r=t[e];return r===Wa?void 0:r}return Fa.call(t,e)?t[e]:void 0},za=Object.prototype.hasOwnProperty;var qa=function(e){var t=this.__data__;return Ha?void 0!==t[e]:za.call(t,e)},Ya="__lodash_hash_undefined__";var Xa=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ha&&void 0===t?Ya:t,this};function Ja(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ja.prototype.clear=Za,Ja.prototype.delete=Ba,Ja.prototype.get=$a,Ja.prototype.has=qa,Ja.prototype.set=Xa;var Qa=Ja;var ei=function(){this.__data__=[],this.size=0};var ti=function(e,t){return e===t||e!=e&&t!=t};var ri=function(e,t){for(var r=e.length;r--;)if(ti(e[r][0],t))return r;return-1},ni=Array.prototype.splice;var oi=function(e){var t=this.__data__,r=ri(t,e);return!(r<0)&&(r==t.length-1?t.pop():ni.call(t,r,1),--this.size,!0)};var ci=function(e){var t=this.__data__,r=ri(t,e);return r<0?void 0:t[r][1]};var ai=function(e){return ri(this.__data__,e)>-1};var ii=function(e,t){var r=this.__data__,n=ri(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function si(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}si.prototype.clear=ei,si.prototype.delete=oi,si.prototype.get=ci,si.prototype.has=ai,si.prototype.set=ii;var ui=si;var li=function(){this.size=0,this.__data__={hash:new Qa,map:new(un||ui),string:new Qa}};var di=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var fi=function(e,t){var r=e.__data__;return di(t)?r["string"==typeof t?"string":"hash"]:r.map};var pi=function(e){var t=fi(this,e).delete(e);return this.size-=t?1:0,t};var hi=function(e){return fi(this,e).get(e)};var yi=function(e){return fi(this,e).has(e)};var bi=function(e,t){var r=fi(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function mi(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}mi.prototype.clear=li,mi.prototype.delete=pi,mi.prototype.get=hi,mi.prototype.has=yi,mi.prototype.set=bi;var Ei=mi,vi="Expected a function";function gi(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(vi);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],c=r.cache;if(c.has(o))return c.get(o);var a=e.apply(this,n);return r.cache=c.set(o,a)||c,a};return r.cache=new(gi.Cache||Ei),r}gi.Cache=Ei;var Oi=gi,Si=500;var Ii=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_i=/\\(\\)?/g,Di=function(e){var t=Oi(e,(function(e){return r.size===Si&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ii,(function(e,r,n,o){t.push(n?o.replace(_i,"$1"):r||e)})),t}));var Pi=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o},Ai=1/0,Ni=Nr?Nr.prototype:void 0,wi=Ni?Ni.toString:void 0;var Ti=function e(t){if("string"==typeof t)return t;if(An(t))return Pi(t,e)+"";if(Va(t))return wi?wi.call(t):"";var r=t+"";return"0"==r&&1/t==-Ai?"-0":r};var Ci=function(e){return null==e?"":Ti(e)};var Ri=function(e,t){return An(e)?e:Ga(e,t)?[e]:Di(Ci(e))},ji=1/0;var Ki=function(e){if("string"==typeof e||Va(e))return e;var t=e+"";return"0"==t&&1/e==-ji?"-0":t};var Ui=function(e,t){for(var r=0,n=(t=Ri(t,e)).length;null!=e&&r<n;)e=e[Ki(t[r++])];return r&&r==n?e:void 0},Li=function(){try{var e=an(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var Mi=function(e,t,r){"__proto__"==t&&Li?Li(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},Vi=Object.prototype.hasOwnProperty;var ki=function(e,t,r){var n=e[t];Vi.call(e,t)&&ti(n,r)&&(void 0!==r||t in e)||Mi(e,t,r)},xi=9007199254740991,Gi=/^(?:0|[1-9]\d*)$/;var Hi=function(e,t){var r=typeof e;return!!(t=null==t?xi:t)&&("number"==r||"symbol"!=r&&Gi.test(e))&&e>-1&&e%1==0&&e<t};var Zi=function(e,t,r,n){if(!xr(e))return e;for(var o=-1,c=(t=Ri(t,e)).length,a=c-1,i=e;null!=i&&++o<c;){var s=Ki(t[o]),u=r;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;if(o!=a){var l=i[s];void 0===(u=n?n(l,s,i):void 0)&&(u=xr(l)?l:Hi(t[o+1])?[]:{})}ki(i,s,u),i=i[s]}return e};var Bi=function(e,t,r){for(var n=-1,o=t.length,c={};++n<o;){var a=t[n],i=Ui(e,a);r(i,a)&&Zi(c,Ri(a,e),i)}return c};var Wi=function(e,t){return null!=e&&t in Object(e)};var Fi=function(e,t,r){for(var n=-1,o=(t=Ri(t,e)).length,c=!1;++n<o;){var a=Ki(t[n]);if(!(c=null!=e&&r(e,a)))break;e=e[a]}return c||++n!=o?c:!!(o=null==e?0:e.length)&&wn(o)&&Hi(a,o)&&(An(e)||Pn(e))};var $i=function(e,t){return null!=e&&Fi(e,t,Wi)};var zi=function(e,t){return Bi(e,t,(function(t,r){return $i(e,r)}))};var qi=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},Yi=Nr?Nr.isConcatSpreadable:void 0;var Xi=function(e){return An(e)||Pn(e)||!!(Yi&&e&&e[Yi])};var Ji=function e(t,r,n,o,c){var a=-1,i=t.length;for(n||(n=Xi),c||(c=[]);++a<i;){var s=t[a];r>0&&n(s)?r>1?e(s,r-1,n,o,c):qi(c,s):o||(c[c.length]=s)}return c};var Qi=function(e){return(null==e?0:e.length)?Ji(e,1):[]};var es=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},ts=Math.max;var rs=function(e,t,r){return t=ts(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,c=ts(n.length-t,0),a=Array(c);++o<c;)a[o]=n[t+o];o=-1;for(var i=Array(t+1);++o<t;)i[o]=n[o];return i[t]=r(a),es(e,this,i)}};var ns=function(e){return function(){return e}};var os=Li?function(e,t){return Li(e,"toString",{configurable:!0,enumerable:!1,value:ns(t),writable:!0})}:function(e){return e},cs=800,as=16,is=Date.now;var ss=function(e){var t=0,r=0;return function(){var n=is(),o=as-(n-r);if(r=n,o>0){if(++t>=cs)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(os);var us=function(e){return ss(rs(e,void 0,Qi),e+"")}((function(e,t){return null==e?{}:zi(e,t)}));function ls(e,t,r,n,o){return new Promise((t,c)=>{const a=tc.getState(),i=Fn.selectors.getUser(a);if(!i||!i.authKey)return console.error("SDK sendDeviceCmd error: No userKey!"),void c(new Error("Device command error: No userKey!"));const s=cr.selectors.getHubs(a)[e];let u;if(s&&s.hubKey&&(u=s.hubKey),!s||!u&&!vt())return console.error("SDK sendDeviceCmd error: No hubKey!"),void c(new Error("Device command error: No hubKey!"));if(s.connectionState!==_t.LOCAL&&s.connectionState!==_t.REMOTE)return console.error("SDK sendDeviceCmd error: No Hub connection"),void c(new Error("Device command error: No hub connection"));const{authKey:l}=i;if(!l)return console.error("SDK sendDeviceCmd error: No authKey!"),void c(new Error("Device command error: No authKey!"));let d=n;Hn(o)||(d=us(d,o)),r&&kc({command:r,method:void 0,authKey:l,hubId:e,localUrl:s.url,hubKey:u,data:[d]}).then(e=>{console.debug("SDK sendDeviceCmd ok",e),t(e)}).catch(e=>{console.error("SDK sendDeviceCmd error:",e),c(new Error("Device command error!"))})})}const ds=Object.freeze({LOCATION:"LOCATION",TEMPLATE:"TEMPLATE",HUB:"HUB"});Object.freeze({DUMMY:"DUMMY"});e.CLOUD_CONNECTION_STATES=It,e.HUB_CONNECTION_STATES=_t,e.HUB_STATES=nc,e.LANGUAGES=Zn,e.PLAN_NODES=ds,e.ROLES=Wn,e.USER_STATES=Bn,e.ZWAVE_EXCLUSION_STATUS=cc,e.ZWAVE_INCLUSION_STATUS=oc,e.acceptEula=function(){return tc.dispatch(Fn.actions.setEula(!0)),xc().state===Bn.WAITING_EULA&&tc.dispatch(Fn.actions.changeState(Bn.EULA_ACCEPTED)),!0},e.addRoom=async function(e,t){return new Promise((r,n)=>{$c(e,St.CMD_SET_ROOM,[t]).then(e=>{r(e)}).catch(e=>{n(e)})})},e.changeLanguage=function(e){let t=!1;return Object.values(Zn).indexOf(e)>-1&&(tc.dispatch(Fn.actions.setLanguage(e)),t=!0,xc().state===Bn.WAITING_LANGUAGE&&tc.dispatch(Fn.actions.changeState(Bn.LANGUAGE_SET))),t},e.checkIsFailedZWaveNode=async function(e,t){return new Promise((r,n)=>{const{authKey:o}=Ia(),c=_a()[e],{hubKey:a}=c;kc({command:St.ZWAVE_CHECK_IS_FAILED_NODE,hubId:e,authKey:o,hubKey:a,localUrl:c.url,data:[{nodeId:t}]}).then(t=>{console.debug("SDK: checkIsFailedZWaveNode: Ok , data: ",t),t&&0===t.status?(Ka[e]=!1,t.isFailed?r(!0):r(!1)):(console.error("SDK: checkIsFailedZWaveNode error: ",t?t.status:"unknown"),Ka[e]=!1,n(t.status))}).catch(t=>{console.error("SDK: checkIsFailedZWaveNode error: ",t.message),Ka[e]=!1,n(t)})})},e.closeAlarm=async function(e,t){const r=t;return new Promise((t,n)=>{Yc(e,St.CMD_CLOSE_ALARM,{alarmId:r.id}).then(e=>{t(e)}).catch(e=>{n(e)})})},e.connectHubBySite=function(e,t,r=!1,n=!0){return new Promise((t,o)=>{const{authKey:c}=na();e||o(new Error("No Hub Id")),c||o(new Error("No AuthKey"));const a={};a[e]=null,oa(a,r,n).then(()=>{Sa(e,!1).then(()=>{t(ta())}).catch(e=>o(e))}).catch(e=>o(e))})},e.connectHubByTokens=function(e,t,r=!1,n=!0){return new Promise((o,c)=>{const{authKey:a}=na();e||c(new Error("No Hub Id")),t||c(new Error("No hubKey")),a||c(new Error("No AuthKey"));oa({},r,n).then(()=>{Sa(e,!1).then(()=>{o(ta())}).catch(e=>c(e))}).catch(e=>c(e))})},e.cozifyReducer=qo,e.deleteDevice=nr,e.devicesState=$t,e.doPoll=va,e.doPwLogin=function(e,t){return new Promise((r,n)=>{kc({command:St.USER_LOGIN,data:{email:e,password:t}}).then(e=>{e&&bc(e)&&(tc.dispatch(Fn.actions.setAuthKey(e)),xc().state===Bn.WAITING_LOGIN&&tc.dispatch(Fn.actions.changeState(Bn.LOGIN_DONE))),r(e)}).catch(e=>{console.debug("doPwLogin error",e),n(new Error("Login failure"))})})},e.doRemoteIdQuery=ea,e.doZwaveExclusion=async function(e){return new Promise((t,r)=>{wa[e]=!1,function(e){return new Promise((t,r)=>{if(wa[e])return console.debug("startZwaveExclusion: exclusion stopped"),void r(new Error("exclusion stopped"));const n=_a()[e],{authKey:o}=Ia(),{hubKey:c}=n;if(console.debug("startZwaveExclusion connection state: ",n.connectionState),n.connectionState!==_t.LOCAL&&n.connectionState!==_t.REMOTE)return console.warn("SDK startZwaveExclusion: no Hub connection"),void r(new Error("no hub connection"));Ta[e]?r(new Error("exclusion already in action")):(Ta[e]=!0,kc({command:St.ZWAVE_START_EXCLUSION,hubId:e,authKey:o,hubKey:c,localUrl:n.url,data:[]}).then(n=>{Ta[e]=!1,n.status===cc.RUNNING?t(n):(console.error("SDK: doExclusionById - wrong state: ",n),r(n))}).catch(t=>{console.error("SDK: doExclusionById error: ",t.message),Ta[e]=!1,r(t)}))})}(e).then(n=>{n&&n.status===cc.RUNNING?new Promise((t,r)=>{!function e(t,r,n){Ra(t).then(o=>{if(o&&o.status)switch(o.status){case cc.RUNNING:setTimeout(()=>{e(t,r,n)},lc);break;case cc.SUCCESS:r(!0);break;case cc.TIMEOUT:case cc.CANCEL:r(!1);break;default:n(new Error("Wrong exclusion status"))}else n(new Error("Wrong exclusion status"))}).catch(e=>{console.error("Error in askZwaveExclusionStatusPromise: ",e),n(e)})}(e,t,r)}).then(e=>{t(e)}).catch(e=>{r(e)}):r(new Error("Wrong exclusion status"))}).catch(e=>{console.error("Error in doZwaveExclusion: ",e),r(e)})})},e.doZwaveInclusion=async function(e){return new Promise((t,r)=>{Da[e]=!1,function(e){return new Promise((t,r)=>{if(Da[e])return console.debug("startZwaveInclusion: inclusion stopped"),void r(new Error("inclusion stopped"));const n=_a()[e],{authKey:o}=Ia(),{hubKey:c}=n;if(console.debug("startZwaveInclusion connection state: ",n.connectionState),n.connectionState!==_t.LOCAL&&n.connectionState!==_t.REMOTE)return console.warn("SDK startZwaveInclusion: no Hub connection"),void r(new Error("no hub connection"));Pa[e]?r(new Error("inclusion already in action")):(Pa[e]=!0,kc({command:St.ZWAVE_START_INCLUSION,hubId:e,authKey:o,hubKey:c,localUrl:n.url,data:[]}).then(n=>{Pa[e]=!1,n?n.status===oc.RUNNING?t(n):r(n):r(new Error("No inclusion state received"))}).catch(t=>{console.error("SDK: startZwaveInclusion error: ",t.message),Pa[e]=!1,r(t)}))})}(e).then(n=>{n&&n.status===oc.RUNNING?new Promise((t,r)=>{Na(e,t,r)}).then(e=>{t(e)}).catch(e=>{r(e)}):r(new Error("Wrong inclusion status"))}).catch(e=>{console.error("Error in doZwavePairing: ",e),r(e)})})},e.editRoom=async function(e,t){return new Promise((r,n)=>{$c(e,St.CMD_SET_ROOM,[t]).then(e=>{r(e)}).catch(e=>{n(e)})})},e.fetchHubs=ca,e.getAlarms=qc,e.getCloudConnectionState=function(){const e=tc.getState();return Dt.selectors.getConnections(e).cloudState},e.getDevices=Zc,e.getHubAlarms=function(e){let t;const r=qc();return r&&r[e]&&(t=r[e]),t},e.getHubConnectionState=function(e){const t=tc.getState();return cr.selectors.getHubs(t)[e]?cr.selectors.getHubs(t)[e].connectionState:_t.UNCONNECTED},e.getHubDevices=function(e){let t;const r=Zc();return r&&r[e]&&(t=r[e]),t},e.getHubPairingDevices=function(e){let t;const r=Bc();return r&&r[e]&&(t=r[e]),t},e.getHubRooms=function(e){let t;const r=Fc();return r&&r[e]&&(t=r[e]),t},e.getHubs=ta,e.getModbusDevicePairings=async function(e){return new Promise((t,r)=>{const n=La()[e],{authKey:o}=Ua(),{hubKey:c}=n;if(console.debug("getModbusDevices connection state: ",n.connectionState),n.connectionState!==_t.LOCAL&&n.connectionState!==_t.REMOTE)return console.warn("SDK getModbusDevices: no Hub connection"),void r(new Error("no hub connection"));kc({command:St.GET_MODBUS_DEVICE_PAIRINGS,hubId:e,authKey:o,hubKey:c,localUrl:n.url,data:[]}).then(e=>(console.info("SDK: getModbusDevicePairings success: ",e),t(e))).catch(e=>{console.error("SDK: getModbusDevicePairings error: ",e.message),r(e)})})},e.getPairingDevices=Bc,e.getRooms=Fc,e.getUserState=function(){return xc().state},e.getZWaveNodeParameter=async function(e,t,r){return new Promise((n,o)=>{const{authKey:c}=Ia(),a=_a()[e],{hubKey:i}=a;kc({command:St.ZWAVE_GET_NODE_CONFIGURATION,hubId:e,authKey:c,hubKey:i,localUrl:a.url,data:[{nodeId:t,parameter:r}]}).then(e=>{e&&0===e.status?(console.debug("SDK: getZWaveNodeParameter: Ok , data: ",e),n(e)):(console.error("SDK: getZWaveNodeParameter error: ",e?e.status:"unknown"),o(new Error("Getting ZWave node parem failed")))}).catch(e=>{console.error("SDK: getZWaveNodeParameter error: ",e.message),o(e)})})},e.getZwaveNodes=async function(e){return new Promise((t,r)=>{if(Ka[e])return void r(new Error("nodesInAction already in action"));Ka[e]=!0;const{authKey:n}=Ia(),o=_a()[e],{hubKey:c}=o;kc({command:St.ZWAVE_GET_NODES,hubId:e,authKey:n,hubKey:c,localUrl:o.url,data:[]}).then(r=>{console.debug("SDK: getZwaveNodes: Ok , data: ",r),Ka[e]=!1,t(r)}).catch(t=>{console.error("SDK: getZwaveNodes error: ",t.message),Ka[e]=!1,r(t)})})},e.healZwave=async function(e){return new Promise((t,r)=>{if(ja[e])return void r(new Error("healingInAction already in action"));ja[e]=!0;const{authKey:n}=Ia(),o=_a()[e],{hubKey:c}=o;kc({command:St.ZWAVE_HEAL,hubId:e,authKey:n,hubKey:c,localUrl:o.url,data:[]}).then(r=>{console.debug("SDK: healZwave: Ok , status: ",r),ja[e]=!1,t("ok")}).catch(t=>{console.error("SDK: healZwave error: ",t.message),ja[e]=!1,r(t)})})},e.hubsState=cr,e.identifyDevice=function(e,t){return ls(e,0,St.CMD_DEVICE_IDENTIFY,{id:t})},e.ignorePairingByIds=function(e,t,r){const{authKey:n}=na(),o=ta()[e],{hubKey:c}=o;return kc({command:St.PAIR_IGNORE,hubId:e,authKey:n,hubKey:c,localUrl:o.url,data:{id:t,ignored:r}})},e.isZwaveEnabled=async function(e){return new Promise((t,r)=>{Ra(e).then(e=>{e&&e.status!==cc.NO_ZWAVE?t(!0):t(!1)}).catch(e=>{console.error("Error in isZwaveEnabled: ",e),r(e)})})},e.lockAndBackup=function(e,t,r){return new Promise((n,o)=>{kc({command:St.HUB_LOCK_BACKUP,authKey:t,hubKey:r,hubId:e}).then(e=>{n(e)}).catch(t=>{console.log(`lockAndBackup ${e} error `,t.message),o(t)})})},e.reactFetchPlanDocumentNodes=Lo,e.reactFetchPlanDocuments=So,e.reactFetchPlans=so,e.reactInsertPlan=lo,e.reactInsertPlanDocument=_o,e.reactInsertPlanDocumentNode=Vo,e.reactRemovePlan=po,e.reactRemovePlanDocument=Po,e.reactRemovePlanDocumentNode=xo,e.reactSelectAllDocumentNodes=Wo,e.reactSelectAllDocuments=Co,e.reactSelectAllPlans=vo,e.reactSelectPlanDocumentNodes=$o,e.reactSelectPlanDocuments=jo,e.reactSubscribePlanDocumentNodes=Mo,e.reactSubscribePlanDocuments=Io,e.reactSubscribePlans=uo,e.reactUpdatePlan=fo,e.reactUpdatePlanDocument=Do,e.reactUpdatePlanDocumentNode=ko,e.removeAlarm=async function(e,t){const r=t;return new Promise((t,n)=>{Yc(e,St.CMD_REMOVE_ALARM,{alarmId:r.id}).then(e=>{t(e)}).catch(e=>{n(e)})})},e.removeFailedZWaveNode=async function(e,t){return new Promise((r,n)=>{const{authKey:o}=Ia(),c=_a()[e],{hubKey:a}=c;kc({command:St.ZWAVE_REMOVE_FAILED_NODE,hubId:e,authKey:o,hubKey:a,localUrl:c.url,data:[{nodeId:t}]}).then(t=>{console.debug("SDK: removeFailedZWaveNode: Ok , data: ",t),t&&1===t.status?(Ka[e]=!1,r(!0)):(console.error("SDK: removeFailedZWaveNode error: ",t?t.status:"unknown"),Ka[e]=!1,n(t.status))}).catch(t=>{console.error("SDK: removeFailedZWaveNode error: ",t.message),Ka[e]=!1,n(t)})})},e.removeRoom=async function(e,t){return new Promise((r,n)=>{$c(e,St.CMD_REMOVE_ROOM,{roomId:t.id}).then(e=>{r(e)}).catch(t=>{if(t.response&&t.response.status&&404===t.response.status){const t=Fc();r(t[e])}n(t)})})},e.selectCloud=function(e){Et=e},e.selectHubById=Sa,e.sendDeviceCmd=ls,e.sendDeviceStateCmd=function(e,t,r,n){return new Promise((o,c)=>{const a=tc.getState(),i=Fn.selectors.getUser(a);if(!i||!i.authKey)return console.error("SDK sendDeviceStateCmd error: No userKey!"),void c(new Error("Device command error: No userKey!"));const s=cr.selectors.getHubs(a);if(!s[e]||!s[e].hubKey&&!vt())return console.error("SDK sendDeviceStateCmd error: No hubKey!"),void c(new Error("Device command error: No hubKey!"));const{authKey:u}=i,{hubKey:l}=s[e];let d=r;Hn(n)||(d=us(d,n)),kc({command:St.CMD_DEVICE_STATE,authKey:u,hubId:e,hubKey:l,data:[{id:t,state:d}]}).then(e=>{console.debug("SDK sendDeviceCmd ok",e),o(e)}).catch(e=>{console.error(e),console.error("SDK sendDeviceStateCmd error:",e),c(new Error("Device state command error!"))})})},e.setAuthenticated=function(e){return tc.dispatch(Fn.actions.setAuthenticated(e)),xc()},e.setDeviceHotWater=function(e,t,r){return ls(e,0,St.CMD_DEVICE_HOT_WATER,{id:t,hotWater:r})},e.setDeviceLocked=function(e,t,r){return ls(e,0,St.CMD_DEVICE_LOCK,{id:t,locked:r})},e.setDeviceMeta=function(e,t,r,n){return ls(e,0,St.CMD_DEVICE_META,{id:t,name:r,room:n})},e.setDeviceVisibility=function(e,t,r){return ls(e,0,St.CMD_DEVICE_VISIBILITY,{id:t,visible:r})},e.setDevices=rr,e.setModbusDevicePairings=async function(e,t){return new Promise((r,n)=>{const o=La()[e],{authKey:c}=Ua(),{hubKey:a}=o;if(console.debug("setModbusDevices connection state: ",o.connectionState),o.connectionState!==_t.LOCAL&&o.connectionState!==_t.REMOTE)return console.warn("SDK setModbusDevices: no Hub connection"),void n(new Error("no hub connection"));let i=!1;const s=[];t.map(e=>{e.address||(i=!0,n(new Error("Invalid address"))),e.deviceType||(i=!0,n(new Error("Invalid device type")));const t={address:Number(e.address),deviceType:e.deviceType,name:e.name||"",readDeviceIdSupported:e.readDeviceIdSupported,registerRequired:e.registerRequired,register:void 0,registerType:void 0,normallyOff:!1,type:"PAIR_MODBUS"};return"RELAY"!==e.deviceType&&"SIGNAL"!==e.deviceType||(t.normallyOff=!!e.normallyOff),null!=e.name&&e.name.length>0&&null!=e.address&&e.address<=247&&e.address>0?e.registerRequired?null!=e.register&&e.register>=0&&e.register<=65535&&e.registerType?(t.registerRequired=!0,t.register=Number(e.register),t.registerType=Number(e.registerType)):(i=!0,n(new Error("Invalid register data"))):t.registerRequired=!1:(i=!0,n(new Error("Invalid name or address data"))),s.push(t),!0}),!i&&s.length>0?kc({command:St.SET_MODBUS_DEVICE_PAIRINGS,hubId:e,authKey:c,hubKey:a,localUrl:o.url,data:s}).then(e=>(console.info("SDK: setModbusDevicePairings success: ",e),e&&!0===e?r(e):n(new Error(e?e.message:"unknown error")))).catch(e=>{console.error("SDK: setModbusDevicePairings error: ",e.message),n(e)}):n(new Error("Invalid data"))})},e.setZWaveNodeParameter=async function(e,t,r,n,o,c){return new Promise((a,i)=>{const{authKey:s}=Ia(),u=_a()[e],{hubKey:l}=u;let d=c;o&&(d=null),kc({command:St.ZWAVE_SET_NODE_CONFIGURATION,hubId:e,authKey:s,hubKey:l,localUrl:u.url,data:[{nodeId:t,parameter:r,size:n,default:o,value:d}]}).then(e=>{e&&0===e.status?(console.debug("SDK: setZWaveNodeParameter: Ok , data: ",e),a(e)):(console.error("SDK: setZWaveNodeParameter error: ",e?e.status:"unknown"),i(new Error("Setting ZWave node parem failed"))),a(e)}).catch(e=>{console.error("SDK: setZWaveNodeParameter error: ",e.message),i(e)})})},e.startDiscoveringHubs=aa,e.startPairingById=function(e,t){const r=sc;sa[e]=!1;const n=(e,t)=>da(e,t).then(()=>{}).catch(()=>{});try{ia[e]=setInterval(n,r,e,t)}catch(e){console.error("Catch startPairingById: ",e)}return da(e,t)},e.startPollingById=ga,e.stopDiscoveringHubs=function(){clearInterval(Xc)},e.stopPairingById=pa,e.stopPairings=function(){const e=ta();Object.values(e).forEach(e=>{pa(e.id).then(()=>console.debug("SDK: pairingStopped: ",e.id)).catch(()=>console.log("SDK: pairingStopped error: ",e.id))})},e.stopPollingById=Oa,e.stopZwaveExclusion=async function(e){return new Promise((t,r)=>{if(Ca[e])return void r(new Error("stopExclusionById already stopping"));Ca[e]=!0;const{authKey:n}=Ia(),o=_a()[e],{hubKey:c}=o;kc({command:St.ZWAVE_STOP_EXCLUSION,hubId:e,authKey:n,hubKey:c,localUrl:o.url,data:[]}).then(r=>{console.debug("SDK: stopZwaveExclusion: Ok , status: ",r),wa[e]=!0,Ca[e]=!1,t("ok")}).catch(t=>{console.error("SDK: stopZwaveExclusion error: ",t.message),Ca[e]=!1,r(t)})})},e.stopZwaveInclusion=async function(e){return new Promise((t,r)=>{if(Aa[e])return void r(new Error("stopInclusionById already stopping"));Aa[e]=!0;const{authKey:n}=Ia(),o=_a()[e],{hubKey:c}=o;kc({command:St.ZWAVE_STOP_INCLUSION,hubId:e,authKey:n,hubKey:c,localUrl:o.url,data:[]}).then(r=>{console.debug("SDK: stopZwavePairing: Ok , status: ",r),Da[e]=!0,Aa[e]=!1,t("ok")}).catch(t=>{console.error("SDK: stopZwavePairing error: ",t.message),Aa[e]=!1,r(t)})})},e.store=tc,e.unSelectHubById=function(e){const t=ta();Object.values(t).forEach(t=>{e===t.id&&(tc.dispatch(cr.actions.unSelectHub({hubId:t.id})),Oa(t.id))})},e.unSelectHubs=function(){const e=ta();Object.values(e).forEach(e=>{tc.dispatch(cr.actions.unSelectHub({hubId:e.id})),Oa(e.id)})},e.unpairDevice=function(e,t){return ls(e,0,St.CMD_DEVICE_IGNORE,{id:t})},e.updateHubs=hr,e.urlBase64Decode=ft,e.useTestcloud=function(){Et=ht},e.watchChanges=rc,Object.defineProperty(e,"__esModule",{value:!0})}));
